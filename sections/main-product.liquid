{% render 'breadcrumbs' %}
{%- liquid
  assign has_content_below_gallery = false

  for block in section.blocks
    if block.type == 'complementary_products'
      assign has_content_below_gallery = true
      break
    endif

    unless block.settings.show_below_gallery
      continue
    endunless

    if block.type == 'accordion' and block.settings.title != blank and block.settings.content != blank or block.settings.liquid != blank or block.settings.page.content != blank
      assign has_content_below_gallery = true
      break
    elsif block.type == 'description' and product.description != blank
      assign has_content_below_gallery = true
      break
    endif
  endfor
-%}

<style>
  #shopify-section-{{ section.id }} {
    --product-grid: "product-gallery" "product-info" {% if has_content_below_gallery %}"product-content"{% endif %} / minmax(0, 1fr);
  }

  @media screen and (min-width: 768px) {
    #shopify-section-{{ section.id }} {
      {%- if has_content_below_gallery -%}
        --product-grid: "product-gallery product-info" auto "product-content product-info" minmax(0, 1fr) / minmax(0, {{ 100.0 | minus: section.settings.product_info_size | divided_by: 100.0 }}fr) minmax(0, {{ section.settings.product_info_size | divided_by: 100.0 }}fr);
      {%- else -%}
        --product-grid: "product-gallery product-info" / minmax(0, {{ 100.0 | minus: section.settings.product_info_size | divided_by: 100.0 }}fr) minmax(0, {{ section.settings.product_info_size | divided_by: 100.0 }}fr);
      {%- endif -%}
    }
  }
</style>

{%- assign color_scheme_hash = section.settings.color_scheme.settings.background_gradient | default: section.settings.color_scheme.settings.background | md5 -%}
{%- capture product_form_id -%}product-form-main-{{ product.id }}-{{ section.id }}{%- endcapture -%}

<div class="section-spacing section-spacing--tight color-scheme color-scheme--{{ section.settings.color_scheme.id }} color-scheme--bg-{{ color_scheme_hash }}">
  <div class="container {% unless section.settings.container_size == 'full' %}container--{{ section.settings.container_size }}{% endunless %}">
    <product-rerender id="product-info-{{ product.id }}-{{ section.id }}" observe-form="{{ product_form_id }}" allow-partial-rerender>
      <div class="product" id="scroll-product-buttons">
        {%- if product.media.size > 0 -%}
          {%- render 'product-gallery',
              product: product,
              product_form_id: product_form_id,
              desktop_layout: section.settings.desktop_media_layout,
              mobile_controls: section.settings.mobile_controls,
              enable_media_autoplay: section.settings.enable_media_autoplay,
              enable_video_looping: section.settings.enable_video_looping,
              enable_image_zoom: section.settings.enable_image_zoom,
              max_image_zoom_level: section.settings.max_image_zoom_level -%}
        {%- endif -%}

        {%- render 'product-info', 
          product: product, 
          product_form_id: product_form_id,
          center_basic_info: section.settings.center_basic_info, 
          has_content_below_gallery: has_content_below_gallery, 
          context: 'main_product' 
        -%}

        {%- comment -%}On Prestige, some content may be on the left part below the product gallery{%- endcomment -%}
        {%- if has_content_below_gallery -%}
          <div id="product-extra-information" class="product-content-below-gallery empty:hidden scroll-margin-offset">
            {%- for block in section.blocks -%}
              {%- unless block.settings.show_below_gallery -%}
                {%- continue -%}
              {%- endunless -%}

              {%- case block.type -%}
                {%- when 'description' -%}
                  {%- if product.description != blank -%}
                    {%- if block.settings.collapse_content -%}
                      {%- assign accordion_title = 'product.general.description' | t -%}
                      {%- render 'accordion', title: accordion_title, content: product.description, prose_content: true, size: 'lg', block: block -%}
                    {%- else -%}
                      <div class="product-content-below-gallery__description prose">
                        {{- product.description -}}
                      </div>
                    {%- endif -%}
                  {%- endif -%}

                {%- when 'accordion' -%}
                  {%- liquid
                    assign accordion_title = block.settings.page.title | default: block.settings.title 
                    assign accordion_content = block.settings.page.content | default: block.settings.liquid | default: block.settings.content

                    if accordion_title != blank and accordion_content != blank
                      render 'accordion', title: accordion_title, content: accordion_content, size: 'lg', prose_content: true, icon: block.settings.icon, custom_icon: block.settings.custom_icon, block: block
                    endif
                  -%}

                {%- when 'complementary_products' -%}
                  {%- render 'complementary-products', product: product, block: block -%}
              {%- endcase -%}
            {%- endfor -%}
          </div>
        {%- endif -%}
      </div>
    </product-rerender>
  </div>
</div>

{%- if section.settings.show_sticky_add_to_cart and product.available -%}
  <product-rerender id="{{ product_form_id }}-sticky-bar" observe-form="{{ product_form_id }}">
    <product-sticky-bar form="{{ product_form_id }}" class="product-sticky-bar">

      <!-- Product Info -->
      <div class="product-sticky-bar__info">
        <div class="h-stack gap-6">
          {%- if product.media.size > 0 -%}
            {%- assign default_media = product.selected_or_first_available_variant.featured_media | default: product.featured_media -%}
            {{- default_media | image_url: width: default_media.width | image_tag: loading: 'lazy', sizes: '60px', widths: '60,120,180' -}}
          {%- endif -%}

          <div class="v-stack">
            <span class="h6 sticky-title">{{ product.title }}</span>
            {%- if product.selected_or_first_available_variant -%}
              <span class="variant-name">
                <span class="variant-title-text">{{ product.selected_or_first_available_variant.title }}</span>
                {%- if product.selected_or_first_available_variant.selling_plan_allocations.size > 0 -%}
                  <a href="javascript:void(0);" class="change-subscription">Change</a>
                {%- endif -%}
              </span>
            {%- endif -%}
          </div>
        </div>
      </div>

      <!-- Price, Delivery Text & Buy Buttons -->
      <div class="sticky-bar-right h-stack items-center gap-4">
        {%- if product.selected_or_first_available_variant -%}
          <div class="price-wrapper v-stack gap-1">
            {%- if product.selected_or_first_available_variant.selling_plan_allocations.size > 0 -%}
              <div id="sticky-subscription-price-container" style="display: none;">
                <div class="subscription-price">
                  <span class="selling-plan-price" id="sticky-subscription-price">
                    {{ product.selected_or_first_available_variant.selling_plan_allocations[0].price | money }}
                  </span>
                </div>
                <div id="sticky-original-price" class="original-price strike-through">
                  <span class="price" id="sticky-original-price-value">
                    {{ product.selected_or_first_available_variant.price | money }}
                  </span>
                </div>
              </div>
              <div id="sticky-one-time-price-container" style="display: flex;">
                <div class="normal-price" id="sticky-normal-price">
                  <span class="price" id="sticky-one-time-price-value">
                    {{ product.selected_or_first_available_variant.price | money }}
                  </span>
                </div>
              </div>
            {%- else -%}
              <div class="normal-price" id="sticky-normal-price">
                <span class="price" id="sticky-one-time-price-value">
                  {{ product.selected_or_first_available_variant.price | money }}
                </span>
              </div>
            {%- endif -%}

            <!-- Delivery Text Underneath Price -->
            <div class="delivery-option-text">              
              {% if product.selling_plan_groups.size > 0 %}
                <div class="selling-plan-container">
                  <select id="SellingPlanSelector" name="selling_plan">
                    <!-- One-time purchase -->
                    <option value="">One-time purchase</option>

                    <!-- Selling plan options -->
                    {% for group in product.selling_plan_groups %}
                      {% for plan in group.selling_plans %}
                        <option value="{{ plan.id }}">
                          {{ plan.name }}
                        </option>
                      {% endfor %}
                    {% endfor %}
                  </select>
                </div>
              {% endif %}
            </div>
          </div>
        {%- endif -%}

        <buy-buttons class="buy-buttons small-hide" template="{{ product.template_suffix | escape }}" form="{{ product_form_id }}">
          {%- liquid
            assign button_disabled = false
            assign button_style    = 'solid'
            if product.selected_or_first_available_variant == nil
              assign button_disabled = true
              assign button_style    = 'outline'
              assign button_content  = 'product.general.unavailable_button' | t
            elsif product.selected_or_first_available_variant.available == false
              assign button_disabled = true
              assign button_style    = 'outline'
              assign button_content  = 'product.general.sold_out_button' | t
            else
              if product.template_suffix contains 'pre-order'
                assign button_content = 'product.general.pre_order_button' | t
              else
                assign button_content = 'product.general.add_to_cart_button' | t
              endif
            endif
          -%}
          {%- render 'button',
            content: button_content,
            style:   button_style,
            type:    'submit',
            form:    product_form_id,
            disabled: button_disabled
          -%}
        </buy-buttons>
      </div>
      <div class="mobile__buy_btn medium-hide large-up-hide">
        <buy-buttons class="buy-buttons" template="{{ product.template_suffix | escape }}" form="{{ product_form_id }}">
          {%- liquid
            assign button_disabled = false
            assign button_style    = 'solid'
            if product.selected_or_first_available_variant == nil
              assign button_disabled = true
              assign button_style    = 'outline'
              assign button_content  = 'product.general.unavailable_button' | t
            elsif product.selected_or_first_available_variant.available == false
              assign button_disabled = true
              assign button_style    = 'outline'
              assign button_content  = 'product.general.sold_out_button' | t
            else
              if product.template_suffix contains 'pre-order'
                assign button_content = 'product.general.pre_order_button' | t
              else
                assign button_content = 'product.general.add_to_cart_button' | t
              endif
            endif
          -%}
          {%- render 'button',
            content: button_content,
            style:   button_style,
            type:    'submit',
            form:    product_form_id,
            disabled: button_disabled
          -%}
        </buy-buttons>
      </div>

      <div class="product-sticky-bar__options">
        {%- if product != blank -%}

          {% assign hide_sold_out_variants = false %}
          {% assign selector_style = 'block' %}
          {% assign swatch_selector_style = 'swatch' %}

          <div id="variant__scent">
          {%- render 'variant-picker',
              product: product,
              form_id: product_form_id,
              context: context,
              hide_sold_out_variants: hide_sold_out_variants,
              selector_style: selector_style,
              swatch_selector_style: swatch_selector_style,
              sticky: true
          -%}
          </div>
        {%- endif -%}
      </div>

    </product-sticky-bar>
  </product-rerender>
{%- endif -%}

{%- comment -%}
IMPLEMENTATION NOTE: Shopify does not currently allows to render a given section within the context of a given product. However,
when rendering the quick buy drawers/popovers, we want to be able to re-use the merchant's choices (such as the selector type). This
is however only possible by rendering the whole product page, and extracting the relevant part. Here, we therefore render the
quick buy information in a template, that will be extracted in JS, which ensures it is not visible in the main product page
{%- endcomment -%}
{%- render 'product-quick-buy', product: product -%}

<script>
  // We save the product ID in local storage to be eventually used for recently viewed section
  try {
    let recentlyViewedProducts = JSON.parse(localStorage.getItem('theme:recently-viewed-products') || '[]');

    recentlyViewedProducts = recentlyViewedProducts.filter(item => item !== {{ product.id }}); // Delete product to remove to the start
    recentlyViewedProducts.unshift({{ product.id }}); // Add at the start

    localStorage.setItem('theme:recently-viewed-products', JSON.stringify(recentlyViewedProducts));
  } catch (e) {
    // Safari in private mode does not allow setting item, we silently fail
  }
</script>


{%- unless product == blank -%}
  <script type="application/json" id="product-json" data-product-json>
    {
      "id": {{ product.id | json }},
      "title": {{ product.title | json }},
      "handle": {{ product.handle | json }},
      "variants": [
        {%- for variant in product.variants -%}
          {
            "id": {{ variant.id | json }},
            "title": {{ variant.title | json }},
            "price": {{ variant.price | json }},
            "compare_at_price": {{ variant.compare_at_price | json }},
            "available": {{ variant.available | json }},
            "selling_plan_allocations": [
              {%- for allocation in variant.selling_plan_allocations -%}
                {
                  "price": {{ allocation.price | json }},
                  "compare_at_price": {{ allocation.compare_at_price | json }},
                  "selling_plan": {
                    "id": {{ allocation.selling_plan.id | json }},
                    "name": {{ allocation.selling_plan.name | json }}
                  }
                }
                {%- unless forloop.last -%},{%- endunless -%}
              {%- endfor -%}
            ]
          }
          {%- unless forloop.last -%},{%- endunless -%}
        {%- endfor -%}
      ]
    }
  </script>
{%- endunless -%}

<script>
document.addEventListener('DOMContentLoaded', function() {
  console.log("script from rc")
  const productForm = document.querySelector('#{{ product_form_id }}');
  const variantSelectors = productForm.querySelectorAll('[name="id"]');
  
  // Load product data with better error handling
  let productData = null;
  
  // Try to get product data from the script tag we just created
  const productScript = document.getElementById('product-json');
  if (productScript) {
    try {
      productData = JSON.parse(productScript.textContent);
    } catch (e) {
      console.error('Could not parse product data:', e);
    }
  }
  
  // Fallback: try to get from window.product if it exists
  if (!productData && window.product) {
    productData = window.product;
  }
  
  // If still no product data, try to get from other script tags
  if (!productData) {
    const fallbackScript = document.querySelector('script[data-product-json]');
    if (fallbackScript) {
      try {
        productData = JSON.parse(fallbackScript.textContent);
      } catch (e) {
        console.warn('Could not parse fallback product data:', e);
      }
    }
  }
  
  if (!productData) {
    console.error('No product data found. Sticky bar pricing may not work correctly.');
    return;
  }
  
  let currentVariant = null;
  let lastPurchaseOption = null;
  let lastSellingPlan = null;
  
  // Function to get fresh DOM elements each time
  function getStickyBarElements() {
    const stickyBar = document.querySelector('product-sticky-bar');
    if (!stickyBar) {
      console.error('Sticky bar not found');
      return null;
    }
    
    return {
      stickyBar: stickyBar,
      variantName: stickyBar.querySelector('.variant-name'),
      variantTitleText: stickyBar.querySelector('.variant-title-text'),
      changeLink: stickyBar.querySelector('.change-subscription'),
      subscriptionPriceContainer: stickyBar.querySelector('#sticky-subscription-price-container'),
      oneTimePriceContainer: stickyBar.querySelector('#sticky-one-time-price-container'),
      subscriptionPriceEl: stickyBar.querySelector('#sticky-subscription-price'),
      originalPriceEl: stickyBar.querySelector('#sticky-original-price-value'),
      normalPriceEl: stickyBar.querySelector('#sticky-one-time-price-value'),
      sellingPlanInfoEl: stickyBar.querySelector('.selling-plan-info'),
      deliveryOptionTextEl: stickyBar.querySelector('.delivery-option-text')
    };
  }
  
  function getCurrentVariant() {
    const variantSelector = productForm.querySelector('[name="id"]');
    if (!variantSelector) {
      console.error('No variant selector found');
      return null;
    }
    
    const variantId = variantSelector.value;
    
    if (productData && productData.variants && Array.isArray(productData.variants)) {
      // Convert variantId to both string and number for comparison
      const variant = productData.variants.find(v => 
        v.id == variantId || v.id === parseInt(variantId) || v.id === variantId.toString()
      );
      
      if (variant) {
        return variant;
      } else {
        console.warn('Variant not found in product data. Available variants:', productData.variants.map(v => v.id));
      }
    }
    
    // Fallback: try to get price from the DOM
    const selectedOption = variantSelector.selectedOptions[0];
    if (selectedOption) {
      const fallbackVariant = {
        id: variantId,
        title: selectedOption.textContent || selectedOption.innerText || 'Default Title',
        price: parseInt(selectedOption.dataset.price || selectedOption.getAttribute('data-price') || '0'),
        selling_plan_allocations: []
      };
      return fallbackVariant;
    }
    
    console.error('Could not determine current variant');
    return null;
  }
  
  function getRechargeSelection() {
    // Check for Recharge widget radio buttons (multiple possible selectors)
    const rechargeRadios = [
      'input[name="purchaseOption"]:checked',
      'input[name="purchase_option"]:checked',
      'input[name="rc_purchase_option"]:checked',
      '.rc-purchase-option input:checked'
    ];
    
    for (const selector of rechargeRadios) {
      const radio = document.querySelector(selector);
      if (radio) {
        return radio.value; // 'subscription' or 'onetime'
      }
    }
    
    // Check for selected state in Recharge widget classes (for pill-style widgets)
    const subscriptionSelected = document.querySelector('.rc-purchase-option__subscription.rc-selected, .rc-purchase-option__subscription[rc-selected], .rc-purchase-option__subscription.selected');
    const onetimeSelected = document.querySelector('.rc-purchase-option__onetime.rc-selected, .rc-purchase-option__onetime[rc-selected], .rc-purchase-option__onetime.selected');
    
    if (subscriptionSelected) {
      return 'subscription';
    }
    
    if (onetimeSelected) {
      return 'onetime';
    }
    
    // Check for active/selected pills by looking at various possible class combinations
    const activePills = document.querySelectorAll('.rc-purchase-option.rc-selected, .rc-purchase-option.selected, .rc-purchase-option.active');
    for (const pill of activePills) {
      if (pill.classList.contains('rc-purchase-option__subscription') || 
          pill.getAttribute('data-option') === 'subscription' ||
          pill.querySelector('[value="subscription"]')) {
        return 'subscription';
      }
      if (pill.classList.contains('rc-purchase-option__onetime') || 
          pill.getAttribute('data-option') === 'onetime' ||
          pill.querySelector('[value="onetime"]')) {
        return 'onetime';
      }
    }
    
    // Fallback to checking selling plan input
    const sellingPlanInput = productForm.querySelector('[name="selling_plan"]');
    const sellingPlanId = sellingPlanInput ? sellingPlanInput.value : null;
    
    if (!sellingPlanId || sellingPlanId === '' || sellingPlanId === 'null') {
      return 'onetime';
    }
    
    return 'subscription';
  }
  
  function getSelectedSellingPlan() {
    const sellingPlanInput = productForm.querySelector('[name="selling_plan"]');
    const sellingPlanId = sellingPlanInput ? sellingPlanInput.value : null;
    
    if (!sellingPlanId || sellingPlanId === '' || sellingPlanId === 'null') {
      return null;
    }
    
    // Try to find the selling plan in the current variant
    if (currentVariant && currentVariant.selling_plan_allocations) {
      const allocation = currentVariant.selling_plan_allocations.find(
        allocation => allocation.selling_plan.id == sellingPlanId
      );
      if (allocation) {
        return allocation.selling_plan;
      }
    }
    
    // Enhanced fallback: try to get selling plan name from Recharge widget (works with pills)
    const rechargeWidget = document.querySelector('.rc-selection__root, .rc-widget');
    if (rechargeWidget) {
      // Look for selected subscription option (pill-style)
      const selectedOptions = [
        '.rc-purchase-option__subscription.rc-selected',
        '.rc-purchase-option__subscription[rc-selected]',
        '.rc-purchase-option__subscription.selected',
        '.rc-purchase-option.rc-selected',
        '.rc-purchase-option.selected'
      ];
      
      for (const selector of selectedOptions) {
        const selectedOption = rechargeWidget.querySelector(selector);
        if (selectedOption) {
          // Try multiple selectors for plan name in pill-style widgets
          const planNameSelectors = [
            '.rc-selling-plan-name',
            '.rc-plan-name',
            '.rc-frequency',
            '.rc-option-name',
            '.rc-delivery-frequency',
            '[data-frequency]'
          ];
          
          for (const nameSelector of planNameSelectors) {
            const planNameEl = selectedOption.querySelector(nameSelector);
            if (planNameEl && planNameEl.textContent.trim()) {
              return {
                id: sellingPlanId,
                name: planNameEl.textContent.trim()
              };
            }
          }
          
          // If no specific plan name element found, try to get from data attributes
          const frequency = selectedOption.getAttribute('data-frequency') || 
                          selectedOption.getAttribute('data-plan-name') ||
                          selectedOption.getAttribute('data-delivery-frequency');
          
          if (frequency) {
            return {
              id: sellingPlanId,
              name: frequency
            };
          }
          
          // Last resort: try to get text content from the selected option
          const optionText = selectedOption.textContent.trim();
          if (optionText) {
            return {
              id: sellingPlanId,
              name: optionText
            };
          }
        }
      }
    }
    
    return {
      id: sellingPlanId,
      name: 'Subscription'
    };
  }
  
  function getRechargePrice(purchaseType) {
    // Try to get prices from the Recharge widget first
    const rechargeWidget = document.querySelector('.rc-selection__root, .rc-widget');
    if (rechargeWidget) {
      if (purchaseType === 'subscription') {
        const subscriptionOption = rechargeWidget.querySelector('.rc-purchase-option__subscription, .rc-option--subscription');
        if (subscriptionOption) {
          // Look for the discounted price (subscription price)
          const discountedPriceEl = subscriptionOption.querySelector('.rc-price:not(.strike-through), .rc-price:not(.rc-price--compare)');
          // Look for the original price (strikethrough price)
          const originalPriceEl = subscriptionOption.querySelector('.rc-price.strike-through, .rc-price.rc-price--compare');
          
          if (discountedPriceEl && originalPriceEl) {
            return {
              subscriptionPrice: discountedPriceEl.textContent.trim(),
              originalPrice: originalPriceEl.textContent.trim()
            };
          }
        }
      } else {
        const onetimeOption = rechargeWidget.querySelector('.rc-purchase-option__onetime, .rc-option--onetime');
        if (onetimeOption) {
          const priceEl = onetimeOption.querySelector('.rc-price');
          if (priceEl) {
            return {
              onetimePrice: priceEl.textContent.trim()
            };
          }
        }
      }
    }
    
    // Fallback to current variant pricing
    if (currentVariant) {
      if (purchaseType === 'subscription' && currentVariant.selling_plan_allocations && currentVariant.selling_plan_allocations.length > 0) {
        return {
          subscriptionPrice: formatMoney(currentVariant.selling_plan_allocations[0].price),
          originalPrice: formatMoney(currentVariant.price)
        };
      } else {
        return {
          onetimePrice: formatMoney(currentVariant.price)
        };
      }
    }
    
    return null;
  }
  
  function forceUpdateDeliveryMessage(purchaseType) {
    const elements = getStickyBarElements();
    if (!elements || !elements.sellingPlanInfoEl) return;
    
    let deliveryMessage = '';
    
    if (purchaseType === 'subscription') {
      // Get selected selling plan for delivery message
      const selectedSellingPlan = getSelectedSellingPlan();
      
      deliveryMessage = 'Subscribe & Save';
      
      if (selectedSellingPlan && selectedSellingPlan.name) {
        // Parse the selling plan name to extract delivery frequency
        const planName = selectedSellingPlan.name.toLowerCase();
        let frequency = '';
        
        // Enhanced pattern matching for pill-style widgets
        if (planName.includes('1 month') || planName.includes('monthly') || planName.includes('every month') || planName.includes('month 1')) {
          frequency = 'Delivery every 1 month';
        } else if (planName.includes('2 month') || planName.includes('month 2')) {
          frequency = 'Delivery every 2 months';
        } else if (planName.includes('3 month') || planName.includes('month 3')) {
          frequency = 'Delivery every 3 months';
        } else if (planName.includes('4 month') || planName.includes('month 4')) {
          frequency = 'Delivery every 4 months';
        } else if (planName.includes('5 month') || planName.includes('month 5')) {
          frequency = 'Delivery every 5 months';
        } else if (planName.includes('6 month') || planName.includes('month 6')) {
          frequency = 'Delivery every 6 months';
        } else if (planName.includes('week')) {
          if (planName.includes('1 week') || planName.includes('weekly') || planName.includes('week 1')) {
            frequency = 'Delivery every 1 week';
          } else if (planName.includes('2 week') || planName.includes('week 2')) {
            frequency = 'Delivery every 2 weeks';
          } else if (planName.includes('3 week') || planName.includes('week 3')) {
            frequency = 'Delivery every 3 weeks';
          } else if (planName.includes('4 week') || planName.includes('week 4')) {
            frequency = 'Delivery every 4 weeks';
          }
        }
        
        // Additional patterns for pill-style widgets
        if (!frequency) {
          // Look for patterns like "30 days", "60 days", etc.
          const dayMatch = planName.match(/(\d+)\s*days?/);
          if (dayMatch) {
            const days = parseInt(dayMatch[1]);
            if (days === 30 || days === 1) {
              frequency = 'Delivery every 1 month';
            } else if (days === 60) {
              frequency = 'Delivery every 2 months';
            } else if (days === 90) {
              frequency = 'Delivery every 3 months';
            } else if (days === 7) {
              frequency = 'Delivery every 1 week';
            } else if (days === 14) {
              frequency = 'Delivery every 2 weeks';
            } else {
              frequency = `Delivery every ${days} days`;
            }
          }
          
          // Look for patterns like "1x", "2x", etc.
          const timeMatch = planName.match(/(\d+)x/);
          if (timeMatch) {
            const times = parseInt(timeMatch[1]);
            if (times === 1) {
              frequency = 'Delivery every 1 month';
            } else {
              frequency = `Delivery every ${times} months`;
            }
          }
        }
        
        if (frequency) {
          deliveryMessage = frequency;
        }
      }
    } else {
      // For one-time purchase, show "One time purchase"
      deliveryMessage = 'One time purchase';
    }
    
    // Force update the delivery message with multiple aggressive methods
    const updateMethods = [
      () => { elements.sellingPlanInfoEl.textContent = deliveryMessage; },
      () => { elements.sellingPlanInfoEl.innerHTML = deliveryMessage; },
      () => { elements.sellingPlanInfoEl.innerText = deliveryMessage; },
      () => { elements.sellingPlanInfoEl.setAttribute('data-message', deliveryMessage); },
      () => { 
        elements.sellingPlanInfoEl.removeAttribute('hidden');
        elements.sellingPlanInfoEl.style.display = 'inline-block';
        elements.sellingPlanInfoEl.style.visibility = 'visible';
      }
    ];
    
    // Apply all update methods
    updateMethods.forEach(method => {
      try {
        method();
      } catch (e) {
        console.warn('Error updating delivery message:', e);
      }
    });
    
    // Force multiple repaints
    elements.sellingPlanInfoEl.style.transform = 'translateZ(0)';
    elements.sellingPlanInfoEl.offsetHeight; // Force reflow
    
    requestAnimationFrame(() => {
      elements.sellingPlanInfoEl.style.transform = '';
      elements.sellingPlanInfoEl.style.opacity = '0.99';
      
      requestAnimationFrame(() => {
        elements.sellingPlanInfoEl.style.opacity = '';
        
        // Final update to ensure the message is set
        elements.sellingPlanInfoEl.textContent = deliveryMessage;
        elements.sellingPlanInfoEl.innerHTML = deliveryMessage;
      });
    });
    
    // Always show the delivery option text container
    if (elements.deliveryOptionTextEl) {
      elements.deliveryOptionTextEl.style.display = 'block';
      elements.deliveryOptionTextEl.style.visibility = 'visible';
    }
  }
  
  function updateDeliveryMessage(purchaseType) {
    // Use multiple calls with different timings to ensure the message updates
    forceUpdateDeliveryMessage(purchaseType);
    
    setTimeout(() => forceUpdateDeliveryMessage(purchaseType), 10);
    setTimeout(() => forceUpdateDeliveryMessage(purchaseType), 50);
    setTimeout(() => forceUpdateDeliveryMessage(purchaseType), 100);
    setTimeout(() => forceUpdateDeliveryMessage(purchaseType), 200);
  }
  
  function updateStickyBar() {
    // Get fresh DOM elements
    const elements = getStickyBarElements();
    if (!elements) {
      console.error('Could not get sticky bar elements');
      return;
    }
    
    currentVariant = getCurrentVariant();
    
    if (!currentVariant) {
      console.warn('No current variant found');
      return;
    }
    
    // Update variant title text only (not the change link)
    if (elements.variantTitleText) {
      elements.variantTitleText.textContent = currentVariant.title;
    }
    
    // Handle change link visibility
    const hasSellingPlans = currentVariant.selling_plan_allocations && currentVariant.selling_plan_allocations.length > 0;
    
    if (elements.changeLink) {
      if (hasSellingPlans) {
        elements.changeLink.style.display = 'inline';
      } else {
        elements.changeLink.style.display = 'none';
      }
    }
    
    const purchaseType = getRechargeSelection();
    const priceData = getRechargePrice(purchaseType);
    
    // Update prices first
    if (purchaseType === 'subscription' && priceData && priceData.subscriptionPrice) {
      // Hide one-time container first
      if (elements.oneTimePriceContainer) {
        elements.oneTimePriceContainer.style.display = 'none';
        elements.oneTimePriceContainer.style.visibility = 'hidden';
      }
      
      // Show subscription container
      if (elements.subscriptionPriceContainer) {
        elements.subscriptionPriceContainer.style.display = 'flex';
        elements.subscriptionPriceContainer.style.visibility = 'visible';
      }
      
      // Update subscription price with both textContent and innerHTML
      if (elements.subscriptionPriceEl) {
        elements.subscriptionPriceEl.textContent = priceData.subscriptionPrice;
        elements.subscriptionPriceEl.innerHTML = priceData.subscriptionPrice;
        // Force a DOM update
        elements.subscriptionPriceEl.style.display = 'inline';
      }
      
      // Update original price with both textContent and innerHTML
      if (elements.originalPriceEl) {
        elements.originalPriceEl.textContent = priceData.originalPrice;
        elements.originalPriceEl.innerHTML = priceData.originalPrice;
        // Force a DOM update
        elements.originalPriceEl.style.display = 'inline';
      }
    } else {
      const onetimePrice = priceData && priceData.onetimePrice ? priceData.onetimePrice : formatMoney(currentVariant.price);
      
      // Hide subscription container first
      if (elements.subscriptionPriceContainer) {
        elements.subscriptionPriceContainer.style.display = 'none';
        elements.subscriptionPriceContainer.style.visibility = 'hidden';
      }
      
      // Show one-time container
      if (elements.oneTimePriceContainer) {
        elements.oneTimePriceContainer.style.display = 'flex';
        elements.oneTimePriceContainer.style.visibility = 'visible';
      }
      
      // Update one-time price with both textContent and innerHTML
      if (elements.normalPriceEl) {
        elements.normalPriceEl.textContent = onetimePrice;
        elements.normalPriceEl.innerHTML = onetimePrice;
        // Force a DOM update
        elements.normalPriceEl.style.display = 'inline';
      }
    }
    
    // Update delivery message AFTER prices are updated
    updateDeliveryMessage(purchaseType);
    
    // Force multiple repaints to ensure DOM updates
    if (elements.stickyBar.offsetHeight) {
      elements.stickyBar.style.transform = 'translateZ(0)';
      elements.stickyBar.style.opacity = '0.999';
      
      requestAnimationFrame(() => {
        elements.stickyBar.style.transform = '';
        elements.stickyBar.style.opacity = '';
        
        // Force another repaint
        requestAnimationFrame(() => {
          elements.stickyBar.style.display = 'block';
          setTimeout(() => {
            elements.stickyBar.style.display = '';
            // Final delivery message update
            updateDeliveryMessage(purchaseType);
          }, 1);
        });
      });
    }
  }
  
  function formatMoney(cents) {
    if (typeof cents !== 'number') {
      cents = parseInt(cents) || 0;
    }
    
    if (typeof Shopify !== 'undefined' && Shopify.formatMoney) {
      return Shopify.formatMoney(cents);
    }
    
    // Basic fallback formatting
    return '$' + (cents / 100).toFixed(2);
  }
  
  // Enhanced event listeners with immediate updates
  function handleVariantChange() {
    // Use multiple timeouts to ensure DOM is ready
    setTimeout(updateStickyBar, 10);
    setTimeout(updateStickyBar, 50);
    setTimeout(updateStickyBar, 100);
  }
  
  function handlePurchaseOptionChange() {
    const purchaseType = getRechargeSelection();
    const sellingPlan = getSelectedSellingPlan();
    
    // Force immediate delivery message update
    updateDeliveryMessage(purchaseType);
    
    // Use multiple timeouts to ensure DOM is ready and force delivery message update
    setTimeout(() => {
      updateStickyBar();
      updateDeliveryMessage(purchaseType);
    }, 10);
    
    setTimeout(() => {
      updateStickyBar();
      updateDeliveryMessage(purchaseType);
    }, 50);
    
    setTimeout(() => {
      updateStickyBar();
      updateDeliveryMessage(purchaseType);
    }, 100);
    
    setTimeout(() => {
      updateStickyBar();
      updateDeliveryMessage(purchaseType);
    }, 200);
  }
  
  // Listen for variant changes
  if (variantSelectors.length > 0) {
    variantSelectors.forEach(selector => {
      selector.addEventListener('change', handleVariantChange);
    });
  }
  
  // Enhanced Recharge widget event listeners for pill-style widgets
  const rechargeSelectors = [
    'input[name="purchaseOption"]',
    'input[name="purchase_option"]',
    'input[name="rc_purchase_option"]',
    '.rc-purchase-option input',
    '.rc-purchase-option',
    '.rc-option'
  ];
  
  // Listen for changes on Recharge inputs
  document.addEventListener('change', function(e) {
    if (rechargeSelectors.some(selector => e.target.matches(selector))) {
      handlePurchaseOptionChange();
    }
  });
  
  // Enhanced click listener for pill-style widgets
  document.addEventListener('click', function(e) {
    const rechargeElement = e.target.closest('.rc-purchase-option') || 
                           e.target.closest('.rc-selection__root') ||
                           e.target.closest('.rc-widget') ||
                           e.target.closest('.rc-option');
    
    if (rechargeElement || e.target.matches('input[name*="purchase"]') || e.target.matches('.rc-purchase-option')) {
      // Immediate update for pill clicks
      setTimeout(handlePurchaseOptionChange, 5);
      setTimeout(handlePurchaseOptionChange, 20);
      setTimeout(handlePurchaseOptionChange, 50);
    }
  });
  
  // Enhanced MutationObserver with better delivery message handling
  const observer = new MutationObserver(function(mutations) {
    let shouldUpdate = false;
    
    mutations.forEach(function(mutation) {
      // Check for attribute changes on Recharge elements
      if (mutation.type === 'attributes') {
        const element = mutation.target;
        const isRechargeElement = element.closest('.rc-purchase-option') || 
                                 element.closest('.rc-selection__root') ||
                                 element.closest('.rc-widget') ||
                                 element.closest('.rc-option');
        
        if (isRechargeElement) {
          const relevantAttributes = ['checked', 'rc-selected', 'rc-not-selected', 'class', 'value', 'selected', 'active'];
          if (relevantAttributes.includes(mutation.attributeName)) {
            shouldUpdate = true;
          }
        }
      }
      
      // Check for changes in Recharge widget structure
      if (mutation.type === 'childList') {
        mutation.addedNodes.forEach(node => {
          if (node.nodeType === 1) {
            const hasRechargeClasses = node.classList && (
              node.classList.contains('rc-purchase-option') || 
              node.classList.contains('rc-selection__root') ||
              node.classList.contains('rc-widget') ||
              node.classList.contains('rc-option')
            );
            
            const hasRechargeChildren = node.querySelector && (
              node.querySelector('.rc-purchase-option') || 
              node.querySelector('.rc-selection__root') ||
              node.querySelector('.rc-widget') ||
              node.querySelector('.rc-option')
            );
            
            if (hasRechargeClasses || hasRechargeChildren) {
              shouldUpdate = true;
            }
          }
        });
      }
    });
    
    if (shouldUpdate) {
      handlePurchaseOptionChange();
    }
  });
  
  // Start observing with more specific configuration
  observer.observe(document.body, {
    childList: true,
    subtree: true,
    attributes: true,
    attributeFilter: ['checked', 'rc-selected', 'rc-not-selected', 'value', 'class', 'style', 'selected', 'active']
  });
  
  // Enhanced periodic check with better change detection and delivery message updates
  function periodicCheck() {
    const currentPurchaseOption = getRechargeSelection();
    const currentSellingPlan = getSelectedSellingPlan();
    
    if (lastPurchaseOption !== currentPurchaseOption || 
        (lastSellingPlan && currentSellingPlan && lastSellingPlan.id !== currentSellingPlan.id)) {
      lastPurchaseOption = currentPurchaseOption;
      lastSellingPlan = currentSellingPlan;
      
      updateStickyBar();
      
      // Force delivery message update
      setTimeout(() => {
        updateDeliveryMessage(currentPurchaseOption);
      }, 10);
      
      setTimeout(() => {
        updateDeliveryMessage(currentPurchaseOption);
      }, 50);
    }
  }
  
  // Run periodic check every 200ms for better responsiveness
  const periodicInterval = setInterval(periodicCheck, 200);
  
  // Enhanced initialization with better retry logic
  let initAttempts = 0;
  const maxInitAttempts = 25;
  
  function initializeStickyBar() {
    initAttempts++;
    
    // Check if Recharge widget is loaded and functional
    const rechargeWidget = document.querySelector('.rc-selection__root, .rc-widget');
    const hasRechargeOptions = document.querySelector('.rc-purchase-option__subscription, .rc-purchase-option__onetime, .rc-purchase-option, .rc-option');
    
    if ((!rechargeWidget || !hasRechargeOptions) && initAttempts < maxInitAttempts) {
      setTimeout(initializeStickyBar, 200);
      return;
    }
    
    lastPurchaseOption = getRechargeSelection();
    lastSellingPlan = getSelectedSellingPlan();
    updateStickyBar();
    
    // Force delivery message update on initialization
    setTimeout(() => {
      updateDeliveryMessage(lastPurchaseOption);
    }, 50);
    
    setTimeout(() => {
      updateDeliveryMessage(lastPurchaseOption);
    }, 100);
  }
  
  // Start initialization immediately and with delay
  initializeStickyBar();
  setTimeout(initializeStickyBar, 100);
  setTimeout(initializeStickyBar, 300);
  
  // Also trigger update when page is fully loaded
  if (document.readyState === 'complete') {
    updateStickyBar();
  } else {
    window.addEventListener('load', function() {
      updateStickyBar();
      setTimeout(() => {
        const purchaseType = getRechargeSelection();
        updateDeliveryMessage(purchaseType);
      }, 100);
    });
  }
  
  // Clean up interval when page is unloaded
  window.addEventListener('beforeunload', function() {
    clearInterval(periodicInterval);
    observer.disconnect();
  });
});



</script>




<style>
  #shopify-section-{{ section.id }} .shopify-section--main-product .section-spacing {
    padding-block-start: 0;
  }
  #shopify-section-{{ section.id }} .product-info__block-item .product-title {
    margin-top: -20px;
  }
  #shopify-section-{{ section.id }} .product-info__block-item price-list.price-list.price-list--product > sale-price {
    color: #035C68;
    font-size: 23px;
    font-style: normal;
    font-weight: 400;
    line-height: normal;
  }
  #shopify-section-{{ section.id }} .product-info__block-item .yotpo-sr-bottom-line-left-panel {
    padding-top: 0 !important;
    height: 28px;
  }
  .breadcrumbs__item--current,
  .breadcrumbs__link {
    color: #035C68;
    font-size: 14px;
  }
  #shopify-section-{{ section.id }} .yotpo-sr-vertical-border {
    height: 20px !important;
  }
  #shopify-section-{{ section.id }} .yotpo-sr-bottom-line-text--right-panel {
    line-height: 20px !important;
    font-size: 16px !important;
    font-style: normal !important;
    font-weight: 400 !important;
    color: #035C68 !important;
  }
  #shopify-section-{{ section.id }} .yotpo-star-rating-reviews-summary-link {
    margin-left: 10px;
  }
  #shopify-section-{{ section.id }} .go1617797074 {
    margin-left: 0;
  }
  #shopify-section-{{ section.id }} .go3808782589.go701998048 {
    background: #F4F0ED;
    padding: 10px 20px;
  }
  #shopify-section-{{ section.id }} .go1617797074 {
    width: calc(100% - 5.00px - 278px);
  }
  #shopify-section-{{ section.id }} .yotpo-star-rating-reviews-summary-text {
    color: #035C68 !important;
    padding-top: 0 !important;
  }

  #shopify-section-{{ section.id }} .video-reels-lists {
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-start;
    gap: 30px;
  }
  #shopify-section-{{ section.id }} .video-reel-item a {
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: center;
  }
  #shopify-section-{{ section.id }} .video-reel-thumb {
    position: relative;
    width: 80px;
    height: 80px;
    border-radius: 100%;
    overflow: hidden;
    border: 5px solid #fff;
    cursor: pointer;    
    outline: 2px solid #035C68;
  }  
  #shopify-section-{{ section.id }} .video-reel-thumb:hover img { 
    transform: scale(1.1); 
  }
  #shopify-section-{{ section.id }} .video-reel-thumb img { 
    width: 100%; 
    height: 100%; 
    object-fit: cover; 
    transition: transform 0.3s ease;
  }
  #shopify-section-{{ section.id }} .play_icon {
    position: absolute;
    top: 0;
    left: 0;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 50%;
    padding: 10px;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  #shopify-section-{{ section.id }} .video-reel-content .video-title {
    text-align: center;
    display: block;
    font-size: 16px;
    font-style: normal;
    font-weight: 400;
    line-height: normal;
  }
  #shopify-section-{{ section.id }} :checked + .block-swatch, .block-swatch.is-selected {
    background: #F3F9F7;
  }
  #shopify-section-{{ section.id }} .product-offers {
    display: flex;
    align-items: center;
    gap: 5px;
    border: 0;
    border-radius: 30px;
    padding: 0 10px;
  }
  #shopify-section-{{ section.id }} .product-offers__item {
    padding: 0.6rem 0;
  }
  #shopify-section-{{ section.id }} .prev-next-button {
    width: 40px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    opacity: 1 !important;
    visibility: visible !important;
  }
  #shopify-section-{{ section.id }} .prev-next-button[disabled] {
    opacity: 0.5 !important;
  }
  #shopify-section-{{ section.id }} .prev-next-button svg {
    width: 8px;
    height: 12px;
  }
  .video_reel__popup {
    padding: 0;
    max-width: 380px;
    border-radius: 16px;
    overflow: hidden;
  }
  .video_reel__popup .is-close-button {
    position: absolute;
    left: 10px;
    top: 10px;
  }
  .reel_play {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 40px;
    height: 40px;
    cursor: pointer;
  }
  .reel_mute {
    position: absolute;
    right: 20px;
    bottom: 20px;
    width: 30px;
    height: 30px;
    cursor: pointer;
  }
  .reel_mute svg {
    fill: #fff;
  }
  .fancybox__backdrop {
    background: rgb(24 24 27 / 70%);
  }
  #shopify-section-{{ section.id }} .video-reel-item a:focus-visible {
    outline: none;
  }

  .is-horizontal.is-ltr .f-button.is-arrow.is-prev {
    left: calc(50% - 290px);
  }
  .is-horizontal.is-ltr .f-button.is-arrow.is-next {
    right: calc(50% - 290px);
  }
  .video_reel__popup video.popup-video {
    width: 100%;
  }
  .fancybox__carousel {
    {% comment %} flex: none; {% endcomment %}
  }
  .f-thumbs.is-modern .f-thumbs__slide {
    --clip-shift: inherit;
    --clip-path: inherit;
    padding: 0;
    overflow: visible;
    left: inherit;
    will-change: inherit;
  }
  .f-thumbs.is-modern .f-thumbs__slide button {
    display: block;
    margin-inline: inherit;
    width: inherit;
    clip-path: inherit;
    background: #B2B2B2;
    border-radius: 100%;
  }
  .f-thumbs.is-modern .f-thumbs__slide.is-selected button {
    background: #ffffff;
  }
  .f-thumbs__slide {
    height: 7px;
    width: 7px;
  }
  .f-thumbs.is-modern .f-thumbs__viewport {
    display: flex;
  }
  .f-thumbs.is-modern .f-thumbs__slide button img {
    display: none;
  }
  .fancybox__thumbs {
    display: none;
  }

  #shopify-section-{{ section.id }} .product-sticky-bar__options .variant-picker {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    align-content: start;
    margin-bottom: 10px;
  }
  #shopify-section-{{ section.id }} .product-sticky-bar__options {
    grid-column: 1 / -1;
    display: none;
  }
  .product-sticky-bar {
    gap: 1rem;
    left: 2.5rem;
    right: 2.5rem;
    bottom: 2.5rem;
    width: calc(100% - 5rem);
    border-bottom: 0;
    border-radius: 10px;
    padding-left: 20px;
    padding-right: 20px;
    box-shadow: 0 0 5px #d9d9d9;
    z-index: 5;
  }
  #shopify-section-{{ section.id }} .product-sticky-bar .price-wrapper {
    display: flex;
    flex-direction: row-reverse;
    gap: 1rem;
  }
  #shopify-section-{{ section.id }} .product-sticky-bar .selling-plan-container {
    border: 1px solid #035C68;
    position: relative;
  }
  #shopify-section-{{ section.id }} .product-sticky-bar .selling-plan-container #SellingPlanSelector {
    padding: 13px;
    padding-left: 40px;
    font-size: 14px;
    font-style: normal;
    font-weight: 400;
    line-height: normal;
    color: #035C68;
  }
  #shopify-section-{{ section.id }} .product-sticky-bar .selling-plan-container:before {
    content: '';
    position: absolute;
    left: 15px;
    top: 50%;
    background: #035C68;
    width: 12px;
    height: 12px;
    border-radius: 100%;
    transform: translateY(-50%);
    outline: 1px solid #035C68;
    outline-offset: 3px;
  }
  #shopify-section-{{ section.id }} .product-sticky-bar .selling-plan-container #SellingPlanSelector:focus-visible {
    outline: none;
  }
  #shopify-section-{{ section.id }} .product-sticky-bar .sticky-title {
    font-size: 20px;
    font-style: normal;
    font-weight: 500;
    line-height: 23.4px;
    color: #035C68;
  }
  #shopify-section-{{ section.id }} .product-sticky-bar .variant-name {
    font-size: 14px;
    color: #035C68;
  }
  #shopify-section-{{ section.id }} .pdp-badge-list {
    position: absolute;
    left: 15px;
    top: 15px;
    z-index: 1;
  }
  #shopify-section-{{ section.id }} .pdp-badge-list .badge {
    padding: 4px 9px;
    font-size: 12px;
    text-transform: inherit;
    border-radius: 4px;
  }


  @media(max-width: 989px) {
    #shopify-section-{{ section.id }} .product-sticky-bar .price-wrapper {
      flex-direction: column;
      gap: 0;
    }
    #shopify-section-{{ section.id }} .product-sticky-bar .selling-plan-container #SellingPlanSelector {
      padding: 10px;
      padding-left: 40px;
    }
  }
  @media(max-width: 767px) {
    #shopify-section-{{ section.id }} {
      {% comment %} padding-top: 45px; {% endcomment %}
    }
    #shopify-section-{{ section.id }} .video-reels-lists {
      gap: 20px;
    }
    #shopify-section-{{ section.id }} .video-reel-content .video-title {
      font-size: 14px;
    }
    #shopify-section-{{ section.id }} .product-sticky-bar .product-sticky-bar__info img {
      display: none;
    }
    #shopify-section-{{ section.id }} .product-sticky-bar buy-buttons.buy-buttons.small-hide {
      display: none;
    }
    #shopify-section-{{ section.id }} .product-sticky-bar .mobile__buy_btn.medium-hide.large-up-hide {
      display: block !important;
      grid-column: 1 / -1;
    }
    #shopify-section-{{ section.id }} .product-sticky-bar .product-sticky-bar__options .variant-picker {
      grid-template-columns: 1fr;
    }
    #shopify-section-{{ section.id }} .product-sticky-bar {
      left: 1rem;
      right: 1rem;
      bottom: 1rem;
      width: calc(100% - 2rem);
    }
    #shopify-section-{{ section.id }} .product-sticky-bar .selling-plan-container #SellingPlanSelector {
      font-size: 12px;
    }
    #shopify-section-{{ section.id }} .product-sticky-bar .selling-plan-container #SellingPlanSelector {
      padding-left: 30px;
    }
    #shopify-section-{{ section.id }} .product-sticky-bar .selling-plan-container:before {
      left: 10px;
    }
    #shopify-section-{{ section.id }} .pdp-badge-list { 
      left: 0;
    }
    #shopify-section-{{ section.id }} .pdp-badge-list .badge {
      padding: 1px 7px;
      font-size: 10px;
    }
  }
  
  @media(max-width: 480px){
    #shopify-section-{{ section.id }} .product-sticky-bar {
      left: 0.5rem;
      right: 0.5rem;
      bottom: 0.5rem;
      width: calc(100% - 1rem);
      padding-left: 10px;
      padding-right: 10px;
    }
    #shopify-section-{{ section.id }} .product-sticky-bar .selling-plan-container #SellingPlanSelector {
      padding-left: 20px;
      max-width: 150px;
    }
    #shopify-section-{{ section.id }} .product-sticky-bar .selling-plan-container:before {
      width: 6px;
      height: 6px;
    }
    #shopify-section-{{ section.id }} .product-sticky-bar .selling-plan-container #SellingPlanSelector option {
      padding-left: 10px;
    }
  }

</style>

{% schema %}
{
  "name": "t:sections.main_product.name",
  "class": "shopify-section--main-product",
  "tag": "section",
  "settings": [
   {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:global.colors.scheme",
      "default": "scheme-1"
    },
    {
      "type": "select",
      "id": "container_size",
      "label": "t:global.sizes.section_width",
      "options": [
        {
          "value": "lg",
          "label": "t:global.sizes.large"
        },
        {
          "value": "xl",
          "label": "t:global.sizes.x_large"
        },
        {
          "value": "full",
          "label": "t:global.sizes.full_width"
        }
      ],
      "default": "lg"
    },
    {
      "type": "range",
      "id": "product_info_size",
      "label": "t:sections.main_product.product_info_size",
      "info": "t:sections.main_product.product_info_size_info",
      "min": 30,
      "max": 60,
      "step": 1,
      "unit": "%",
      "default": 35
    },
    {
      "type": "checkbox",
      "id": "show_sticky_add_to_cart",
      "label": "t:sections.main_product.show_sticky_add_to_cart",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "center_basic_info",
      "label": "t:sections.main_product.center_basic_info",
      "info": "t:sections.main_product.center_basic_info_info",
      "default": false
    },
    {
      "type": "header",
      "content": "t:sections.main_product.media_category",
      "info": "t:sections.main_product.media_category_info"
    },
    {
      "type": "select",
      "id": "desktop_media_layout",
      "label": "t:sections.main_product.desktop_media_layout",
      "options": [
        {
          "value": "grid",
          "label": "t:sections.main_product.desktop_media_layout_options.grid"
        },
        {
          "value": "grid_2x",
          "label": "t:sections.main_product.desktop_media_layout_options.grid_2x"
        },
        {
          "value": "grid_2x_highlighted",
          "label": "t:sections.main_product.desktop_media_layout_options.grid_2x_highlighted"
        },
        {
          "value": "carousel_thumbnails_left",
          "label": "t:sections.main_product.desktop_media_layout_options.carousel_thumbnails_left"
        },
        {
          "value": "carousel_thumbnails_bottom",
          "label": "t:sections.main_product.desktop_media_layout_options.carousel_thumbnails_bottom"
        },
        {
          "value": "carousel_dots",
          "label": "t:sections.main_product.desktop_media_layout_options.carousel_dots"
        }
      ],
      "default": "grid"
    },
    {
      "type": "range",
      "id": "desktop_media_grid_gap",
      "min": 0,
      "max": 50,
      "unit": "px",
      "label": "t:sections.main_product.desktop_media_grid_gap",
      "default": 30
    },
    {
      "type": "select",
      "id": "mobile_controls",
      "label": "t:sections.main_product.mobile_controls",
      "options": [
        {
          "value": "dots",
          "label": "t:sections.main_product.mobile_controls_options.dots"
        },
        {
          "value": "thumbnails",
          "label": "t:sections.main_product.mobile_controls_options.thumbnails"
        },
        {
          "value": "free_scroll",
          "label": "t:sections.main_product.mobile_controls_options.free_scroll"
        }
      ],
      "default": "dots"
    },
    {
      "type": "checkbox",
      "id": "enable_media_autoplay",
      "label": "t:sections.main_product.enable_media_autoplay",
      "info": "t:sections.main_product.enable_media_autoplay_info",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "enable_video_looping",
      "label": "t:sections.main_product.enable_video_looping",
      "default": true
    },
    {
      "type": "header",
      "content": "t:sections.main_product.image_zoom_category",
      "info": "t:sections.main_product.image_zoom_category_info"
    },
    {
      "type": "checkbox",
      "id": "enable_image_zoom",
      "label": "t:sections.main_product.image_zoom_enable",
      "default": true
    },
    {
      "type": "range",
      "id": "max_image_zoom_level",
      "min": 1,
      "max": 4,
      "step": 0.5,
      "label": "t:sections.main_product.image_zoom_max_level",
      "default": 3
    }
  ],
  "blocks": [
    {
      "type": "@app"
    },
    {
      "type": "vendor",
      "name": "t:sections.main_product.blocks.vendor.name",
      "limit": 1
    },
    {
      "type": "title",
      "name": "t:sections.main_product.blocks.title.name",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "heading_tag",
          "label": "t:global.text.style",
          "options": [
            {
              "value": "h1",
              "label": "H1"
            },
            {
              "value": "h2",
              "label": "H2"
            },
            {
              "value": "h3",
              "label": "H3"
            },
            {
              "value": "h4",
              "label": "H4"
            },
            {
              "value": "h5",
              "label": "H5"
            },
            {
              "value": "h6",
              "label": "H6"
            }
          ],
          "default": "h3"
        }
      ]
    },
    {
      "type": "sku",
      "name": "t:sections.main_product.blocks.sku.name",
      "limit": 1
    },
    {
      "type": "badges",
      "name": "t:sections.main_product.blocks.badges.name",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.main_product.blocks.badges.instructions"
        }
      ]
    },
    {
      "type": "price",
      "name": "t:sections.main_product.blocks.price.name",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_taxes_notice",
          "label": "t:sections.main_product.blocks.price.show_taxes_notice",
          "default": false
        }
      ]
    },
    {
      "type": "rating",
      "name": "t:sections.main_product.blocks.rating.name",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.main_product.blocks.rating.instructions"
        },
        {
          "type": "checkbox",
          "id": "show_empty",
          "label": "t:sections.main_product.blocks.rating.show_if_no_reviews",
          "default": true
        },
        {
          "type": "select",
          "id": "rating_mode",
          "label": "t:sections.main_product.blocks.rating.show_product_rating_as",
          "options": [
            {
              "value": "rating",
              "label": "t:sections.main_product.blocks.rating.show_product_rating_as_options.rating"
            },
            {
              "value": "count",
              "label": "t:sections.main_product.blocks.rating.show_product_rating_as_options.count"
            }
          ],
          "default": "rating"
        }
      ]
    },
    {
      "type": "payment_terms",
      "name": "t:sections.main_product.blocks.payment_terms.name",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.main_product.blocks.payment_terms.instructions"
        }
      ]
    },
    {
      "type": "separator",
      "name": "t:sections.main_product.blocks.separator.name"
    },
    {
      "type": "description",
      "name": "t:sections.main_product.blocks.description.name",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "collapse_content",
          "label": "t:sections.main_product.blocks.description.collapse_content",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "show_below_gallery",
          "label": "t:sections.main_product.blocks.description.show_below_gallery",
          "default": false
        }
      ]
    },
    {
      "type": "variant_picker",
      "name": "t:sections.main_product.blocks.variant_picker.name",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "hide_sold_out_variants",
          "label": "t:sections.main_product.blocks.variant_picker.hide_sold_out_variants",
          "default": false
        },
        {
          "type": "select",
          "id": "selector_style",
          "label": "t:sections.main_product.blocks.variant_picker.selector_style",
          "options": [
            {
              "value": "block",
              "label": "t:sections.main_product.blocks.variant_picker.selector_style_options.block"
            },
            {
              "value": "dropdown",
              "label": "t:sections.main_product.blocks.variant_picker.selector_style_options.dropdown"
            }
          ],
          "default": "block"
        },
        {
          "type": "select",
          "id": "swatch_selector_style",
          "label": "t:sections.main_product.blocks.variant_picker.swatch_selector_style",
          "info": "t:sections.main_product.blocks.variant_picker.swatch_selector_style_info",
          "options": [
            {
              "value": "swatch",
              "label": "t:sections.main_product.blocks.variant_picker.swatch_selector_style_options.swatch"
            },
            {
              "value": "block_swatch",
              "label": "t:sections.main_product.blocks.variant_picker.swatch_selector_style_options.block_swatch"
            },
            {
              "value": "none",
              "label": "t:sections.main_product.blocks.variant_picker.swatch_selector_style_options.none"
            }
          ],
          "default": "swatch"
        },
        {
          "type": "text",
          "id": "variant_image_options",
          "label": "t:sections.main_product.blocks.variant_picker.variant_image_options",
          "info": "t:sections.main_product.blocks.variant_picker.variant_image_options_info"
        },
        {
          "type": "page",
          "id": "size_chart_page",
          "label": "t:sections.main_product.blocks.variant_picker.size_chart_page",
          "info": "t:sections.main_product.blocks.variant_picker.size_chart_page_info"
        }
      ]
    },
    {
      "type": "product_variations",
      "name": "t:sections.main_product.blocks.product_variations.name",
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.main_product.blocks.product_variations.instructions"
        },
        {
          "type": "text",
          "id": "option_name",
          "label": "t:sections.main_product.blocks.product_variations.option_name",
          "placeholder": "t:sections.main_product.blocks.product_variations.option_name_placeholder"
        },
        {
          "type": "text",
          "id": "option_value_metafield",
          "label": "t:sections.main_product.blocks.product_variations.option_value_metafield",
          "info": "t:sections.main_product.blocks.product_variations.option_value_metafield_info"
        },
        {
          "type": "product_list",
          "id": "products",
          "label": "t:sections.main_product.blocks.product_variations.product_list",
          "info": "t:sections.main_product.blocks.product_variations.product_list_info"
        },
        {
          "type": "select",
          "id": "selector_style",
          "label": "t:sections.main_product.blocks.variant_picker.selector_style",
          "options": [
            {
              "value": "block",
              "label": "t:sections.main_product.blocks.variant_picker.selector_style_options.block"
            },
            {
              "value": "block_swatch",
              "label": "t:sections.main_product.blocks.variant_picker.swatch_selector_style_options.block_swatch"
            },
            {
              "value": "swatch",
              "label": "t:sections.main_product.blocks.variant_picker.swatch_selector_style_options.swatch"
            },
            {
              "value": "variant_image",
              "label": "t:sections.main_product.blocks.variant_picker.selector_style_options.variant_image"
            }
          ],
          "default": "swatch"
        }
      ]
    },
    {
      "type": "line_item_property",
      "name": "t:sections.main_product.blocks.line_item_property.name",
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.main_product.blocks.line_item_property.line_item_info"
        },
        {
          "type": "text",
          "id": "label",
          "label": "t:sections.main_product.blocks.line_item_property.line_item_label",
          "default": "Your label"
        },
        {
          "type": "select",
          "id": "type",
          "label": "t:sections.main_product.blocks.line_item_property.line_item_type",
          "options": [
            {
              "value": "text",
              "label": "t:sections.main_product.blocks.line_item_property.line_item_type_options.text"
            },
            {
              "value": "checkbox",
              "label": "t:sections.main_product.blocks.line_item_property.line_item_type_options.checkbox"
            },
            {
              "value": "dropdown",
              "label": "t:sections.main_product.blocks.line_item_property.line_item_type_options.dropdown"
            }
          ],
          "default": "text"
        },
        {
          "type": "checkbox",
          "id": "required",
          "label": "t:sections.main_product.blocks.line_item_property.required",
          "info": "t:sections.main_product.blocks.line_item_property.required_info",
          "default": false
        },
        {
          "type": "header",
          "content": "t:sections.main_product.blocks.line_item_property.text_type_category",
          "info": "t:sections.main_product.blocks.line_item_property.text_type_category_info"
        },
        {
          "type": "checkbox",
          "id": "allow_long_text",
          "label": "t:sections.main_product.blocks.line_item_property.text_type_allow_long_text",
          "default": false
        },
        {
          "type": "number",
          "id": "max_length",
          "label": "t:sections.main_product.blocks.line_item_property.text_type_max_length"
        },
        {
          "type": "header",
          "content": "t:sections.main_product.blocks.line_item_property.checkbox_type_category",
          "info": "t:sections.main_product.blocks.line_item_property.checkbox_type_category_info"
        },
        {
          "type": "text",
          "id": "checkbox_value",
          "label": "t:sections.main_product.blocks.line_item_property.checkbox_value",
          "info": "t:sections.main_product.blocks.line_item_property.checkbox_value_info",
          "default": "Yes"
        },
        {
          "type": "header",
          "content": "t:sections.main_product.blocks.line_item_property.dropdown_type_category",
          "info": "t:sections.main_product.blocks.line_item_property.dropdown_type_category_info"
        },
        {
          "type": "text",
          "id": "select_values",
          "label": "t:sections.main_product.blocks.line_item_property.dropdown_values",
          "info": "t:sections.main_product.blocks.line_item_property.dropdown_values_info",
          "default": "Value 1,Value 2,Value 3"
        }
      ]
    },
    {
      "type": "quantity_selector",
      "name": "t:sections.main_product.blocks.quantity_selector.name",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.main_product.blocks.quantity_selector.instructions"
        }
      ]
    },
    {
      "type": "volume_pricing",
      "name": "t:sections.main_product.blocks.volume_pricing.name",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.main_product.blocks.volume_pricing.instructions"
        }
      ]
    },
    {
      "type": "inventory",
      "name": "t:sections.main_product.blocks.inventory.name",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_in_stock_quantity",
          "label": "t:sections.main_product.blocks.inventory.show_in_stock_quantity",
          "default": true
        },
        {
          "type": "range",
          "id": "low_inventory_threshold",
          "label": "t:sections.main_product.blocks.inventory.low_inventory_threshold",
          "info": "t:sections.main_product.blocks.inventory.low_inventory_threshold_info",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 0
        },
        {
          "type": "checkbox",
          "id": "show_progress_bar",
          "label": "t:sections.main_product.blocks.inventory.show_progress_bar",
          "default": true
        },
        {
          "type": "number",
          "id": "progress_bar_max_value",
          "label": "t:sections.main_product.blocks.inventory.progress_bar_max_value",
          "info": "t:sections.main_product.blocks.inventory.progress_bar_max_value_info",
          "default": 50
        }
      ]
    },
    {
      "type": "buy_buttons",
      "name": "t:sections.main_product.blocks.buy_buttons.name",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_payment_button",
          "label": "t:sections.main_product.blocks.buy_buttons.show_payment_button",
          "info": "t:sections.main_product.blocks.buy_buttons.show_payment_button_info",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_gift_card_recipient",
          "label": "t:sections.main_product.blocks.buy_buttons.show_gift_card_recipient",
          "info": "t:sections.main_product.blocks.buy_buttons.show_gift_card_recipient_info",
          "default": true
        },
        {
          "type": "color",
          "id": "atc_button_background",
          "label": "t:sections.main_product.blocks.buy_buttons.add_to_cart_background"
        },
        {
          "type": "color",
          "id": "atc_button_text_color",
          "label": "t:sections.main_product.blocks.buy_buttons.add_to_cart_text_color"
        },
        {
          "type": "color",
          "id": "payment_button_background",
          "label": "t:sections.main_product.blocks.buy_buttons.payment_button_background"
        },
        {
          "type": "color",
          "id": "payment_button_text_color",
          "label": "t:sections.main_product.blocks.buy_buttons.payment_button_text_color"
        }
      ]
    },
    {
      "type": "pickup_availability",
      "name": "t:sections.main_product.blocks.pickup_availability.name",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.main_product.blocks.pickup_availability.instructions"
        }
      ]
    },
    {
      "type": "complementary_products",
      "name": "t:sections.main_product.blocks.complementary_products.name",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.main_product.blocks.complementary_products.instructions"
        },
        {
          "type": "inline_richtext",
          "id": "title",
          "label": "t:global.text.heading",
          "default": "Pairs well with"
        },
        {
          "type": "range",
          "id": "products_count",
          "label": "t:sections.main_product.blocks.complementary_products.products_count",
          "min": 1,
          "max": 10,
          "default": 2
        },
        {
          "type": "checkbox",
          "id": "show_below_gallery",
          "label": "t:sections.main_product.blocks.complementary_products.show_below_gallery",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "stack_products",
          "label": "t:sections.main_product.blocks.complementary_products.stack_products",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "show_quick_buy",
          "label": "t:sections.main_product.blocks.complementary_products.show_quick_buy",
          "default": true
        }
      ]
    },
    {
      "type": "offers",
      "name": "t:sections.main_product.blocks.offers.name",
      "settings": [
        {
          "type": "checkbox",
          "id": "stack_offers",
          "label": "t:sections.main_product.blocks.offers.stack_offers",
          "default": false
        },
        {
          "type": "header",
          "content": "t:sections.main_product.blocks.offers.offer_1_category"
        },
        {
          "type": "inline_richtext",
          "id": "offer_1_title",
          "label": "t:sections.main_product.blocks.offers.offer_title",
          "default": "Write something"
        },
        {
          "type": "richtext",
          "id": "offer_1_content",
          "label": "t:sections.main_product.blocks.offers.offer_content",
          "default": "<p>Share some temporary offers to your customers.</p>"
        },
        {
          "type": "header",
          "content": "t:sections.main_product.blocks.offers.offer_2_category"
        },
        {
          "type": "inline_richtext",
          "id": "offer_2_title",
          "label": "t:sections.main_product.blocks.offers.offer_title"
        },
        {
          "type": "richtext",
          "id": "offer_2_content",
          "label": "t:sections.main_product.blocks.offers.offer_content"
        },
        {
          "type": "header",
          "content": "t:sections.main_product.blocks.offers.offer_3_category"
        },
        {
          "type": "inline_richtext",
          "id": "offer_3_title",
          "label": "t:sections.main_product.blocks.offers.offer_title"
        },
        {
          "type": "richtext",
          "id": "offer_3_content",
          "label": "t:sections.main_product.blocks.offers.offer_content"
        },
        {
          "type": "header",
          "content": "t:global.colors.category"
        },
        {
          "type": "color",
          "id": "background",
          "label": "t:global.colors.background"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "t:global.colors.text"
        },
        {
          "type": "color",
          "id": "border_color",
          "label": "t:global.colors.border"
        }
      ]
    },
    {
      "type": "feature_with_icon",
      "name": "t:sections.main_product.blocks.feature_with_icon.name",
      "settings": [
        {
          "type": "inline_richtext",
          "id": "text",
          "label": "t:global.text.text",
          "default": "Feature"
        },
        {
          "type": "url",
          "id": "link",
          "label": "t:global.text.link"
        },
        {
          "type": "select",
          "id": "icon",
          "label": "t:global.icons.icon",
          "options": [
            {
              "value": "none",
              "label": "t:global.icons.none"
            },
            {
              "value": "picto-award-gift",
              "label": "t:global.icons.award_gift",
              "group": "t:global.icons.shop_category"
            },
            {
              "value": "picto-bag-handle",
              "label": "t:global.icons.bag_handle",
              "group": "t:global.icons.shop_category"
            },
            {
              "value": "picto-building",
              "label": "t:global.icons.building",
              "group": "t:global.icons.shop_category"
            },
            {
              "value": "picto-coupon",
              "label": "t:global.icons.coupon",
              "group": "t:global.icons.shop_category"
            },
            {
              "value": "picto-gift",
              "label": "t:global.icons.gift",
              "group": "t:global.icons.shop_category"
            },
            {
              "value": "picto-info",
              "label": "t:global.icons.info",
              "group": "t:global.icons.shop_category"
            },
            {
              "value": "picto-love",
              "label": "t:global.icons.love",
              "group": "t:global.icons.shop_category"
            },
            {
              "value": "picto-percent",
              "label": "t:global.icons.percent",
              "group": "t:global.icons.shop_category"
            },
            {
              "value": "picto-star",
              "label": "t:global.icons.star",
              "group": "t:global.icons.shop_category"
            },
            {
              "value": "picto-box",
              "label": "t:global.icons.box",
              "group": "t:global.icons.shipping_category"
            },
            {
              "value": "picto-delivery-truck",
              "label": "t:global.icons.delivery_truck",
              "group": "t:global.icons.shipping_category"
            },
            {
              "value": "picto-pin",
              "label": "t:global.icons.pin",
              "group": "t:global.icons.shipping_category"
            },
            {
              "value": "picto-plane",
              "label": "t:global.icons.plane",
              "group": "t:global.icons.shipping_category"
            },
            {
              "value": "picto-return",
              "label": "t:global.icons.return",
              "group": "t:global.icons.shipping_category"
            },
            {
              "value": "picto-credit-card",
              "label": "t:global.icons.credit_card",
              "group": "t:global.icons.payment_and_security_category"
            },
            {
              "value": "picto-lock",
              "label": "t:global.icons.lock",
              "group": "t:global.icons.payment_and_security_category"
            },
            {
              "value": "picto-money",
              "label": "t:global.icons.money",
              "group": "t:global.icons.payment_and_security_category"
            },
            {
              "value": "picto-secure-profile",
              "label": "t:global.icons.secure_profile",
              "group": "t:global.icons.payment_and_security_category"
            },
            {
              "value": "picto-shield",
              "label": "t:global.icons.shield",
              "group": "t:global.icons.payment_and_security_category"
            },
            {
              "value": "picto-earth",
              "label": "t:global.icons.earth",
              "group": "t:global.icons.ecology_category"
            },
            {
              "value": "picto-leaf",
              "label": "t:global.icons.leaf",
              "group": "t:global.icons.ecology_category"
            },
            {
              "value": "picto-recycle",
              "label": "t:global.icons.recycle",
              "group": "t:global.icons.ecology_category"
            },
            {
              "value": "picto-tree",
              "label": "t:global.icons.tree",
              "group": "t:global.icons.ecology_category"
            },
            {
              "value": "picto-at-sign",
              "label": "t:global.icons.at_sign",
              "group": "t:global.icons.tech_category"
            },
            {
              "value": "picto-bluetooth",
              "label": "t:global.icons.bluetooth",
              "group": "t:global.icons.tech_category"
            },
            {
              "value": "picto-camera",
              "label": "t:global.icons.camera",
              "group": "t:global.icons.tech_category"
            },
            {
              "value": "picto-printer",
              "label": "t:global.icons.printer",
              "group": "t:global.icons.tech_category"
            },
            {
              "value": "picto-smart-watch",
              "label": "t:global.icons.smart_watch",
              "group": "t:global.icons.tech_category"
            },
            {
              "value": "picto-wifi",
              "label": "t:global.icons.wifi",
              "group": "t:global.icons.tech_category"
            },
            {
              "value": "picto-avatar",
              "label": "t:global.icons.avatar",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-chat",
              "label": "t:global.icons.chat",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-calendar",
              "label": "t:global.icons.calendar",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-comment",
              "label": "t:global.icons.comment",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-customer-support",
              "label": "t:global.icons.customer_support",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-happy-face",
              "label": "t:global.icons.happy_face",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-mailbox",
              "label": "t:global.icons.mailbox",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-mobile-phone",
              "label": "t:global.icons.mobile_phone",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-operator",
              "label": "t:global.icons.operator",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-phone",
              "label": "t:global.icons.phone",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-send",
              "label": "t:global.icons.send",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-user",
              "label": "t:global.icons.user",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-burger",
              "label": "t:global.icons.burger",
              "group": "t:global.icons.food_category"
            },
            {
              "value": "picto-beer",
              "label": "t:global.icons.beer",
              "group": "t:global.icons.food_category"
            },
            {
              "value": "picto-coffee",
              "label": "t:global.icons.coffee",
              "group": "t:global.icons.food_category"
            },
            {
              "value": "picto-pizza",
              "label": "t:global.icons.pizza",
              "group": "t:global.icons.food_category"
            },
            {
              "value": "picto-bottle",
              "label": "t:global.icons.bottle",
              "group": "t:global.icons.food_category"
            },
            {
              "value": "picto-document",
              "label": "t:global.icons.document",
              "group": "t:global.icons.other_category"
            },
            {
              "value": "picto-error",
              "label": "t:global.icons.error",
              "group": "t:global.icons.other_category"
            },
            {
              "value": "picto-file",
              "label": "t:global.icons.file",
              "group": "t:global.icons.other_category"
            },
            {
              "value": "picto-jewelry",
              "label": "t:global.icons.jewelry",
              "group": "t:global.icons.other_category"
            },
            {
              "value": "picto-mask",
              "label": "t:global.icons.mask",
              "group": "t:global.icons.other_category"
            },
            {
              "value": "picto-music",
              "label": "t:global.icons.music",
              "group": "t:global.icons.other_category"
            },
            {
              "value": "picto-not-allowed",
              "label": "t:global.icons.not_allowed",
              "group": "t:global.icons.other_category"
            },
            {
              "value": "picto-target",
              "label": "t:global.icons.target",
              "group": "t:global.icons.other_category"
            },
            {
              "value": "picto-timer",
              "label": "t:global.icons.timer",
              "group": "t:global.icons.other_category"
            },
            {
              "value": "picto-success",
              "label": "t:global.icons.success",
              "group": "t:global.icons.other_category"
            }
          ],
          "default": "none"
        },
        {
          "type": "image_picker",
          "id": "custom_icon",
          "label": "t:global.icons.custom_icon",
          "info": "t:global.icons.custom_icon_info"
        },
        {
          "type": "range",
          "id": "icon_width",
          "min": 12,
          "max": 32,
          "step": 4,
          "unit": "px",
          "label": "t:global.icons.icon_width",
          "default": 16
        },
        {
          "type": "color",
          "id": "background",
          "label": "t:global.colors.background",
          "default": "#ffffff"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "t:global.colors.text",
          "default": "#6b6b6b"
        },
        {
          "type": "color",
          "id": "border_color",
          "label": "t:global.colors.border"
        }
      ]
    },
    {
      "type": "text",
      "name": "t:sections.main_product.blocks.text.name",
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "label": "t:global.text.content",
          "default": "<p>Share some content to your customers about your products.</p>"
        }
      ]
    },
    {
      "type": "accordion",
      "name": "t:sections.main_product.blocks.collapsible_text.name",
      "settings": [
        {
          "type": "checkbox",
          "id": "show_below_gallery",
          "label": "t:sections.main_product.blocks.collapsible_text.show_below_gallery",
          "default": true
        },
        {
          "type": "select",
          "id": "icon",
          "label": "t:global.icons.icon",
          "options": [
            {
              "value": "none",
              "label": "t:global.icons.none"
            },
            {
              "value": "picto-award-gift",
              "label": "t:global.icons.award_gift",
              "group": "t:global.icons.shop_category"
            },
            {
              "value": "picto-bag-handle",
              "label": "t:global.icons.bag_handle",
              "group": "t:global.icons.shop_category"
            },
            {
              "value": "picto-building",
              "label": "t:global.icons.building",
              "group": "t:global.icons.shop_category"
            },
            {
              "value": "picto-coupon",
              "label": "t:global.icons.coupon",
              "group": "t:global.icons.shop_category"
            },
            {
              "value": "picto-gift",
              "label": "t:global.icons.gift",
              "group": "t:global.icons.shop_category"
            },
            {
              "value": "picto-info",
              "label": "t:global.icons.info",
              "group": "t:global.icons.shop_category"
            },
            {
              "value": "picto-love",
              "label": "t:global.icons.love",
              "group": "t:global.icons.shop_category"
            },
            {
              "value": "picto-percent",
              "label": "t:global.icons.percent",
              "group": "t:global.icons.shop_category"
            },
            {
              "value": "picto-star",
              "label": "t:global.icons.star",
              "group": "t:global.icons.shop_category"
            },
            {
              "value": "picto-box",
              "label": "t:global.icons.box",
              "group": "t:global.icons.shipping_category"
            },
            {
              "value": "picto-delivery-truck",
              "label": "t:global.icons.delivery_truck",
              "group": "t:global.icons.shipping_category"
            },
            {
              "value": "picto-pin",
              "label": "t:global.icons.pin",
              "group": "t:global.icons.shipping_category"
            },
            {
              "value": "picto-plane",
              "label": "t:global.icons.plane",
              "group": "t:global.icons.shipping_category"
            },
            {
              "value": "picto-return",
              "label": "t:global.icons.return",
              "group": "t:global.icons.shipping_category"
            },
            {
              "value": "picto-credit-card",
              "label": "t:global.icons.credit_card",
              "group": "t:global.icons.payment_and_security_category"
            },
            {
              "value": "picto-lock",
              "label": "t:global.icons.lock",
              "group": "t:global.icons.payment_and_security_category"
            },
            {
              "value": "picto-money",
              "label": "t:global.icons.money",
              "group": "t:global.icons.payment_and_security_category"
            },
            {
              "value": "picto-secure-profile",
              "label": "t:global.icons.secure_profile",
              "group": "t:global.icons.payment_and_security_category"
            },
            {
              "value": "picto-shield",
              "label": "t:global.icons.shield",
              "group": "t:global.icons.payment_and_security_category"
            },
            {
              "value": "picto-earth",
              "label": "t:global.icons.earth",
              "group": "t:global.icons.ecology_category"
            },
            {
              "value": "picto-leaf",
              "label": "t:global.icons.leaf",
              "group": "t:global.icons.ecology_category"
            },
            {
              "value": "picto-recycle",
              "label": "t:global.icons.recycle",
              "group": "t:global.icons.ecology_category"
            },
            {
              "value": "picto-tree",
              "label": "t:global.icons.tree",
              "group": "t:global.icons.ecology_category"
            },
            {
              "value": "picto-at-sign",
              "label": "t:global.icons.at_sign",
              "group": "t:global.icons.tech_category"
            },
            {
              "value": "picto-bluetooth",
              "label": "t:global.icons.bluetooth",
              "group": "t:global.icons.tech_category"
            },
            {
              "value": "picto-camera",
              "label": "t:global.icons.camera",
              "group": "t:global.icons.tech_category"
            },
            {
              "value": "picto-printer",
              "label": "t:global.icons.printer",
              "group": "t:global.icons.tech_category"
            },
            {
              "value": "picto-smart-watch",
              "label": "t:global.icons.smart_watch",
              "group": "t:global.icons.tech_category"
            },
            {
              "value": "picto-wifi",
              "label": "t:global.icons.wifi",
              "group": "t:global.icons.tech_category"
            },
            {
              "value": "picto-avatar",
              "label": "t:global.icons.avatar",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-chat",
              "label": "t:global.icons.chat",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-calendar",
              "label": "t:global.icons.calendar",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-comment",
              "label": "t:global.icons.comment",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-customer-support",
              "label": "t:global.icons.customer_support",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-happy-face",
              "label": "t:global.icons.happy_face",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-mailbox",
              "label": "t:global.icons.mailbox",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-mobile-phone",
              "label": "t:global.icons.mobile_phone",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-operator",
              "label": "t:global.icons.operator",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-phone",
              "label": "t:global.icons.phone",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-send",
              "label": "t:global.icons.send",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-user",
              "label": "t:global.icons.user",
              "group": "t:global.icons.communication_category"
            },
            {
              "value": "picto-burger",
              "label": "t:global.icons.burger",
              "group": "t:global.icons.food_category"
            },
            {
              "value": "picto-beer",
              "label": "t:global.icons.beer",
              "group": "t:global.icons.food_category"
            },
            {
              "value": "picto-coffee",
              "label": "t:global.icons.coffee",
              "group": "t:global.icons.food_category"
            },
            {
              "value": "picto-pizza",
              "label": "t:global.icons.pizza",
              "group": "t:global.icons.food_category"
            },
            {
              "value": "picto-bottle",
              "label": "t:global.icons.bottle",
              "group": "t:global.icons.food_category"
            },
            {
              "value": "picto-document",
              "label": "t:global.icons.document",
              "group": "t:global.icons.other_category"
            },
            {
              "value": "picto-error",
              "label": "t:global.icons.error",
              "group": "t:global.icons.other_category"
            },
            {
              "value": "picto-file",
              "label": "t:global.icons.file",
              "group": "t:global.icons.other_category"
            },
            {
              "value": "picto-jewelry",
              "label": "t:global.icons.jewelry",
              "group": "t:global.icons.other_category"
            },
            {
              "value": "picto-mask",
              "label": "t:global.icons.mask",
              "group": "t:global.icons.other_category"
            },
            {
              "value": "picto-music",
              "label": "t:global.icons.music",
              "group": "t:global.icons.other_category"
            },
            {
              "value": "picto-not-allowed",
              "label": "t:global.icons.not_allowed",
              "group": "t:global.icons.other_category"
            },
            {
              "value": "picto-target",
              "label": "t:global.icons.target",
              "group": "t:global.icons.other_category"
            },
            {
              "value": "picto-timer",
              "label": "t:global.icons.timer",
              "group": "t:global.icons.other_category"
            },
            {
              "value": "picto-success",
              "label": "t:global.icons.success",
              "group": "t:global.icons.other_category"
            }
          ],
          "default": "none"
        },
        {
          "type": "image_picker",
          "id": "custom_icon",
          "label": "t:global.icons.custom_icon",
          "info": "t:global.icons.custom_icon_info"
        },
        {
          "type": "inline_richtext",
          "id": "title",
          "label": "t:global.text.title",
          "default": "Title"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "t:global.text.content",
          "default": "<p>Share some content to your customers about your products.</p>"
        },
        {
          "type": "liquid",
          "id": "liquid",
          "label": "t:global.code.liquid",
          "info": "t:sections.main_product.blocks.collapsible_text.liquid_info"
        },
        {
          "type": "page",
          "id": "page",
          "label": "t:sections.main_product.blocks.collapsible_text.page",
          "info": "t:sections.main_product.blocks.collapsible_text.page_info"
        }
      ]
    },
    {
      "type": "liquid",
      "name": "t:sections.main_product.blocks.liquid.name",
      "settings": [
        {
          "type": "liquid",
          "id": "liquid",
          "label": "t:global.code.liquid",
          "info": "t:global.code.liquid_info"
        }
      ]
    },
    {
      "type": "modal",
      "name": "t:sections.main_product.blocks.modal.name",
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.main_product.blocks.modal.instructions"
        },
        {
          "type": "header",
          "content": "Button"
        },
        {
          "type": "inline_richtext",
          "id": "button_title",
          "label": "t:global.text.button_text",
          "default": "Button title"
        },
        {
          "type": "select",
          "id": "button_style",
          "label": "t:global.text.style",
          "options": [
            {
              "value": "outline",
              "label": "t:global.text.link_style_options.outline"
            },
            {
              "value": "solid",
              "label": "t:global.text.link_style_options.solid"
            },
            {
              "value": "link",
              "label": "t:global.text.link_style_options.link"
            }
          ],
          "default": "solid"
        },
        {
          "type": "checkbox",
          "id": "stretch_button",
          "label": "t:sections.main_product.blocks.button.stretch"
        },
        {
          "type": "color",
          "id": "button_background",
          "label": "t:global.colors.background"
        },
        {
          "type": "color",
          "id": "button_text_color",
          "label": "t:global.colors.text"
        },
        {
          "type": "header",
          "content": "t:sections.main_product.blocks.modal.modal_category"
        },
        {
          "type": "inline_richtext",
          "id": "modal_title",
          "label": "t:sections.main_product.blocks.modal.modal_title",
          "default": "Modal title"
        },
        {
          "type": "richtext",
          "id": "modal_content",
          "label": "t:sections.main_product.blocks.modal.modal_content",
          "default": "<p>Write some content that will appear in a modal</p>"
        }
      ]
    },
    {
      "type": "image",
      "name": "t:sections.main_product.blocks.image.name",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "t:global.image.image"
        },
        {
          "type": "select",
          "id": "alignment",
          "label": "t:global.image.alignment",
          "options": [
            {
              "value": "start",
              "label": "t:global.position.left"
            },
            {
              "value": "center",
              "label": "t:global.position.center"
            },
            {
              "value": "end",
              "label": "t:global.position.right"
            }
          ],
          "default": "start"
        },
        {
          "type": "radio",
          "id": "width_mode",
          "label": "t:global.image.width",
          "options": [
            {
              "value": "full_width",
              "label": "t:global.image.width_options.full_width"
            },
            {
              "value": "custom",
              "label": "t:global.image.width_options.custom"
            }
          ],
          "default": "custom"
        },
        {
          "type": "range",
          "id": "max_width",
          "min": 100,
          "max": 600,
          "step": 10,
          "unit": "px",
          "label": "t:global.image.maximum_width",
          "default": 300
        },
        {
          "type": "range",
          "id": "mobile_max_width",
          "min": 100,
          "max": 600,
          "step": 10,
          "unit": "px",
          "label": "t:global.image.mobile_maximum_width",
          "default": 200
        }
      ]
    },
    {
      "type": "button",
      "name": "t:sections.main_product.blocks.button.name",
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.main_product.blocks.button.instructions"
        },
        {
          "type": "url",
          "id": "link",
          "label": "t:sections.main_product.blocks.button.link"
        },
        {
          "type": "text",
          "id": "text",
          "label": "t:sections.main_product.blocks.button.text",
          "default": "Button"
        },
        {
          "type": "checkbox",
          "id": "stretch",
          "label": "t:sections.main_product.blocks.button.stretch"
        },
        {
          "type": "color",
          "id": "background",
          "label": "t:global.colors.background"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "t:global.colors.text"
        }
      ]
    },
    {
      "type": "share_buttons",
      "name": "t:sections.main_product.blocks.share_buttons.name",
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.main_product.blocks.share_buttons.instructions"
        }
      ]
    },
    {
      "type": "more_information",
      "name": "t:sections.main_product.blocks.more_information.name",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.main_product.blocks.more_information.instructions"
        },
        {
          "type": "inline_richtext",
          "id": "text",
          "label": "t:sections.main_product.blocks.more_information.text",
          "default": "More information"
        }
      ]
    },
    {
      "type": "video-reels",
      "name": "Video Reels",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "Add video reels in product metafield key product.metafields.custom.video_reels."
        }
      ]
    }
  ]
}
{% endschema %}
