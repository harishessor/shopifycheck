!function(){"use strict";function e(e,t="success",o=!1){const n=document.createElement("div");n.textContent=e,n.style.cssText=`\n        position: fixed;\n        ${o?"top: 50%; left: 50%; transform: translate(-50%, -50%);":"bottom: 20px; right: 20px;"}\n        background: ${"error"===t?"#D9534F":"warning"===t?"rgb(87, 102, 92)":"#333"};\n        color: white;\n        padding: 15px 20px;\n        border-radius: 5px;\n        font-size: 16px;\n        font-weight: bold;\n        text-align: center;\n        z-index: 9999;\n        opacity: 1;\n        transition: opacity 0.5s ease-in-out;\n    `,document.body.appendChild(n),setTimeout((()=>{n.style.opacity="0",setTimeout((()=>n.remove()),500)}),2e3)}class t extends HTMLElement{constructor(){super(),this.sectionId=this.getAttribute("section_id"),this.productGroup=this.getAttribute("product_group"),this.registryKey=`${this.sectionId}__${this.productGroup}`}initPricingConfig(e){e?this.pricingConfig=e:console.error("WWAI-ERROR ‚ùå Pricing Config is missing or invalid.")}initFlowConfig(t){if(!t||!t.destination)return console.error("WWAI-ERROR ‚ùå Flow Config is missing or invalid."),void e("‚ö†Ô∏è Error: Flow Config is not set!","error",!0);this.flowConfig=t}initUXConfig(e){e?this.uxConfig=e:console.error("WWAI-ERROR ‚ùå UI Config is missing or invalid.")}}const o={PRODUCT_GROUP:{ADD_TO_CART:"product-custom-add-to-cart-button-selector",CAROUSEL:"product-custom-carousel-media-selector",COLLECTION_OPTIONS_OVERLAY:"product-custom-collection-options-overlay-selector",PRICE:"product-custom-price-selector",SUBMIT_INTERCEPTOR:"product-custom-submit-interceptor",GRID_SMART_INTERACTION:"product-grid-smart-interaction-button-selector",PRODUCT_MEDIA_GALLERY_FOR_GRIDS:"product-media-gallery-for-grids",PURCHASE_TYPE:"product-purchase-type-selector",SUBSCRIPTION_FREQUENCY:"product-subscription-frequency-selector",VARIANT_CUSTOM_LABEL:"product-variant-custom-labeled-text-selector",VARIANT:"product-variant-selector"},OTHER:{PRODUCT_GRID_HEIGHT_EQUALIZER:"product-grid-height-equalizer-selector"}},n=[{name:"id",label:"Variant ID"},{name:"selling_plan",label:"Selling Plan"},{name:"quantity",label:"Quantity"},{name:"bundle_payload",label:"Bundle Payload"}],i={ADD_TO_CART_TEXT:"data-wwai-add-to-cart-text",SOLD_OUT_TEXT:"data-wwai-sold-out-text"};class r extends t{constructor(){super(),this.button=null,this.addToCartText=null,this.soldOutText=null,this.variantIdInput=null,this.sellingPlanInput=null,this.quantityInput=null,this.bundleInput=null}connectedCallback(){console.log(`‚úÖ Registered Add to Cart for: ${this.sectionId} / ${this.productGroup}`),this.form=this.querySelector("form"),this.form?(n.forEach((({name:e})=>{let t=this.form.querySelector(`input[name="${e}"]`);t||(t=document.createElement("input"),t.type="hidden",t.name=e,t.value="quantity"===e?"1":"",this.form.appendChild(t)),"id"===e&&(this.variantIdInput=t),"selling_plan"===e&&(this.sellingPlanInput=t),"quantity"===e&&(this.quantityInput=t),"bundle_payload"===e&&(this.bundleInput=t)})),this.button=this.form.querySelector('button[type="submit"]')||null,this.addToCartText=this.button?.querySelector(`[${i.ADD_TO_CART_TEXT}]`)||null,this.soldOutText=this.button?.querySelector(`[${i.SOLD_OUT_TEXT}]`)||null,this.button||console.error("WWAI-ERROR ‚ùå No submit button found inside the form.")):console.error("WWAI-ERROR ‚ùå No form found inside <product-custom-add-to-cart-button>")}updateAddToCartForm(e){e.variantId&&this.variantIdInput&&(this.variantIdInput.value=e.variantId,this.variantIdInput.dataset.title=e.variantName),e.sellingPlanId&&this.sellingPlanInput&&(this.sellingPlanInput.value=e.sellingPlanId,this.sellingPlanInput.dataset.option_name=e.sellingPlanName),void 0!==e.available&&(this.button.disabled=!e.available,this.button.style.opacity=e.available?"1":"0.5",this.addToCartText&&this.soldOutText&&(this.addToCartText.style.display=e.available?"":"none",this.soldOutText.style.display=e.available?"none":""))}updateAddToCartFormWithBundlePayload(e){e.add_to_cart_payload&&this.bundleInput&&(this.bundleInput.value=JSON.stringify(e.add_to_cart_payload),this.bundleInput.dataset.title=e.title)}updateSellingPlan(e,t=""){this.sellingPlanInput?(console.log(`üîÑ Updating Selling Plan: ${e} (${t})`),this.sellingPlanInput.value=e,this.sellingPlanInput.dataset.option_name=t):console.warn("‚ö†Ô∏è Selling Plan input not found. Update aborted.")}}customElements.define(o.PRODUCT_GROUP.ADD_TO_CART,r);const s="carousel-slider",a=["clearSlides","createCustomCarouselSlide","gotoSlide"];class l extends t{constructor(){super(),this.currentMedia=null,this.carouselElement=null}connectedCallback(){console.log(`‚úÖ Registered carousel selector for: ${this.sectionId} / ${this.productGroup}`),this.carouselElement=this.querySelector(s),this.carouselElement||console.error(`WWAI-ERROR ‚ùå Missing <${s}> inside <product-custom-carousel-media-selector>.`)}updateCarouselMedia(e,t=0){if(!Array.isArray(e)||0===e.length)return void console.warn("‚ö†Ô∏è No media provided to update the carousel.");if(this.isSameMedia(e))return console.log("üîÑ Media is unchanged, skipping update."),void this.carouselElement.gotoSlide(t);this.currentMedia=e,this.carouselElement.clearSlides();const o=this.carouselElement.querySelector("main-slider"),n=this.carouselElement.querySelector("thumb-slider");o&&n&&(e.forEach(((e,t)=>{if("image"===e.media_type){const t=this.carouselElement.createCustomCarouselSlide(e,!1),i=this.carouselElement.createCustomCarouselSlide(e,!0);o.appendChild(t),n.appendChild(i)}})),this.carouselElement.refresh(t)),this.carouselElement.gotoSlide(t)}isSameMedia(e){return!!this.currentMedia&&(this.currentMedia.length===e.length&&this.currentMedia.every(((t,o)=>t.id===e[o].id)))}}customElements.define(o.PRODUCT_GROUP.CAROUSEL,l);const c="data-wwai-product-price-label",u={BEFORE:"data-wwai-product-before-price",AFTER:"data-wwai-product-after-price",DISCOUNT:"data-wwai-discount-percentage"},d="data-wwai-price-before-wrapper",p="data-wwai-price-after-wrapper",g="data-wwai-discount-percentage-wrapper";class f extends t{connectedCallback(){this.pricingConfig=null,this.availableLabels=new Set,this.querySelectorAll("[data-wwai-product-price-label]").forEach((e=>{this.availableLabels.add(e.getAttribute("data-wwai-product-price-label"))}))}findWrapper(e,t,o=3){let n=e.parentElement;for(let e=0;e<o&&n;e++){if(n.hasAttribute(t))return n;n=n.parentElement}return null}updatePrices({price:e,compareAtPrice:t,discount_percent:o},n){let i=!0,r=!0;this.pricingConfig&&null!=this.pricingConfig.roundDiscount&&(i=this.pricingConfig.roundDiscount),this.pricingConfig&&null!=this.pricingConfig.addOffSuffixToDiscount&&(r=this.pricingConfig.addOffSuffixToDiscount);const s=this.querySelectorAll(`[${c}="${n}"]`);if(!s.length)return void console.error(`WWAI-ERROR ‚ùå No elements found with ${c}="${n}" inside <product-custom-price-selector> (section: ${this.sectionId}, group: ${this.productGroup}).\nFound labels: ${Array.from(this.availableLabels).join(", ")}`);const a=e!=t,l=Number(o);s.forEach((n=>{n.hasAttribute(u.BEFORE)&&(n.textContent=a?t:"",n.setAttribute("data-wwai-slash-pricing-before-tag",a?"true":"false")),n.hasAttribute(u.AFTER)&&(n.textContent=e,n.setAttribute("data-wwai-slash-pricing-after-tag",a?"true":"false"));const s=this.findWrapper(n,d);s&&(s.style.display=a?"":"none");const c=this.findWrapper(n,g);if(c&&(c.style.display=a?"":"none"),n.hasAttribute(u.DISCOUNT)){if(isNaN(l))return void console.error("WWAI-ERROR ‚ùå Invalid discount_percent received:",o);let e=`${i?Math.round(l):l}%${r?" OFF":""}`;const t=n.textContent.trim();a?t.includes("(")?n.textContent=t.replace(/\(\d+(\.\d+)?%\)/,`(${e})`):n.textContent=e:n.textContent=""}}))}}function h(e,t){!function(){if(document.getElementById("wwai-overlay-styles"))return;const e=document.createElement("style");e.id="wwai-overlay-styles",e.innerText="\n    /* White overlay */\n    .overlay-spinner {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(255, 255, 255, 0.7);\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      z-index: 10;\n    }\n\n    /* Positioning wrapper */\n    product-media-gallery-for-grids {\n      position: relative;\n    }\n  \n    @keyframes spin {\n      to {\n        transform: rotate(360deg);\n      }\n    }\n  ",document.head.appendChild(e)}();const o=document.querySelector(`product-media-gallery-for-grids[section_id="${e}"][product_group="${t}"]`);if(!o)return void console.error("WWAI-ERROR ‚ùå product-media-gallery-for-grids not found for",e,t);if(o.querySelector(`.overlay-spinner[data-overlay-id="${e}__${t}"]`))return;const n=document.createElement("div");n.className="overlay-spinner",n.setAttribute("data-overlay-id",`${e}__${t}`),n.innerHTML='\n    <div style="\n      width: 40px;\n      height: 40px;\n      border: 4px solid rgba(0, 0, 0, 0.1);\n      border-top-color: #333;\n      border-radius: 50%;\n      animation: spin 0.8s linear infinite;\n      display: block;\n    "></div>\n  ',o.appendChild(n)}function m(e,t,o){switch(o){case"none":break;case"media-gallery":h(e,t);break;case"add-to-cart-submit-button":!function(e,t){const o=document.querySelector(`product-custom-submit-interceptor[section_id="${e}"][product_group="${t}"]`);o?o.submitButton?.classList.add("loading"):console.error("WWAI-ERROR ‚ùå product-custom-submit-interceptor not found for",e,t)}(e,t);break;default:console.warn(`‚ö†Ô∏è Unknown overlay_type "${o}" passed to addLoadingOverlay`)}}function b(e,t,o,n=!1){switch(o){case"none":break;case"media-gallery":!function(e,t,o=!1){const n=document.querySelector(`.overlay-spinner[data-overlay-id="${e}__${t}"]`);n?(n.remove(),console.log(`‚úÖ Overlay removed for ${e} / ${t}`)):o||console.warn(`‚ö†Ô∏è No overlay found for ${e} / ${t}`)}(e,t,n);break;case"add-to-cart-submit-button":!function(e,t,o=!1){const n=document.querySelector(`product-custom-submit-interceptor[section_id="${e}"][product_group="${t}"]`);n?(n.submitButton?.classList.remove("loading"),console.log(`‚úÖ Submit button loader removed for ${e} / ${t}`)):o||console.error("WWAI-ERROR ‚ùå product-custom-submit-interceptor not found for",e,t)}(e,t,n);break;default:console.warn(`‚ö†Ô∏è Unknown overlay_type "${o}" passed to removeLoadingOverlay`)}}function y(){const e=document.querySelectorAll("product-variant-selector"),t=new Set;e.forEach((e=>{const o=e.getAttribute("section_id"),n=e.getAttribute("product_group"),i=`${o}::${n}`;t.has(i)||(t.add(i),b(o,n,"media-gallery",!0),b(o,n,"add-to-cart-submit-button",!0))}))}function _(e,t=400,o={}){!function({backgroundColor:e="#E8DDFA",textColor:t="#000000",borderColor:o="transparent",fontFamily:n="sans-serif"}={}){if(document.getElementById("wwai-notification-styles"))return;const i=`\n      .wwai-temporary-notification {\n        position: fixed;\n        bottom: 20px;\n        right: 20px;\n        background-color: ${e};\n        color: ${t};\n        border: 1px solid ${o};\n        font-family: ${n};\n        padding: 10px 20px;\n        border-radius: 5px;\n        font-size: 14px;\n        z-index: 10000;\n        opacity: 0.95;\n        transition: opacity 0.3s ease-in-out;\n        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);\n        max-width: 300px;\n      }\n  \n      .wwai-temporary-notification.fade-out {\n        opacity: 0;\n      }\n    `,r=document.createElement("style");r.type="text/css",r.id="wwai-notification-styles",r.innerText=i,document.head.appendChild(r)}(o);const n=document.createElement("div");n.className="wwai-temporary-notification",n.innerText=e,document.body.appendChild(n),setTimeout((()=>{n.classList.add("fade-out"),setTimeout((()=>{n.remove()}),500)}),t)}async function w(t,o,n,i){if(n){return void e((e=>`üõí Product added to cart (mock mode) ‚Äî ${e} redirect enabled.\n\n${i||""}`)("side-cart"),"success",!0)}let r=!1;switch(t){case"littlewords":r=function(){const e=document.querySelector("cart-drawer");return!(!e||"function"!=typeof e.show||(window.isCartRefreshed=!0,document.documentElement.dispatchEvent(new CustomEvent("cart:refresh",{bubbles:!0})),e.show(),0))}();break;case"rco":r=!!window.VueMinicart?.$store&&(window.VueMinicart.$store.dispatch("refreshCart"),window.VueMinicart.$store.commit("toggleCart",!0),document.body.classList.add("noscroll"),!0);break;case"nwkw":r=await(s=o,fetch("/?sections=cart-drawer,cart-icon-bubble").then((e=>{if(!e.ok)throw new Error("Failed to fetch cart sections");return e.json()})).then((e=>{const t=document.querySelector("cart-drawer");if(!t||"function"!=typeof t.renderContents)return!1;t.renderContents({sections:e});const o=t.querySelector("#CartDrawer-CartItems");return o&&o.innerHTML.trim()&&t.classList.remove("is-empty"),setTimeout((()=>{t.classList.contains("active")||t.classList.add("active")}),100),publish(PUB_SUB_EVENTS.cartUpdate,{source:"product-form",productVariantId:`virtual-${Math.random().toString(36).slice(2,10)}`,cartData:s}),!0})).catch((e=>(console.error("WWAI-ERROR [SideCart] Failed to open drawer:",e),!1))));break;case"kitsch":r=await(window.dispatchEvent(new Event("toggle-cart-drawer")),window.dispatchEvent(new Event("update-cart")),console.log("‚úÖ Cart drawer refreshed and opened."),!0);break;default:console.warn(`[SideCart] Unknown or missing brandName: "${t}". Redirecting to /cart.`)}var s;r||(window.location.href="/cart")}function E(e={}){const t=[],o={loader:e.loader??"none",showSuccessNotification:e.showSuccessNotification??!0,showErrorNotification:e.showErrorNotification??!0,successNotificationMessage:e.successNotificationMessage??"üéâ Item(s) added to cart!",errorNotificationMessage:e.errorNotificationMessage??"‚ùå Something went wrong.",destination:e.destination??"cart",sideCartLabel:e.sideCartLabel??null,notificationOptions:e.notificationOptions??{},clearCartBeforeAddingItems:e.clearCartBeforeAddingItems??!1};return null==e.loader||["media-gallery","add-to-cart-submit-button","none"].includes(e.loader)||t.push(`Invalid loader value: "${e.loader}"`),null!=e.showSuccessNotification&&"boolean"!=typeof e.showSuccessNotification&&t.push("showSuccessNotification must be a boolean"),null!=e.showErrorNotification&&"boolean"!=typeof e.showErrorNotification&&t.push("showErrorNotification must be a boolean"),null==e.destination||["cart","checkout","side-cart"].includes(e.destination)||t.push(`Invalid destination value: "${e.destination}"`),"side-cart"===o.destination&&"string"!=typeof o.sideCartLabel&&t.push('sideCartLabel must be defined as a string when destination is "side-cart"'),{isValid:0===t.length,errors:t,config:o}}function v(e,t){const o=document.querySelector(`product-custom-collection-options-overlay-selector[section_id="${e}"][product_group="${t}"]`);o&&o.closeOverlay()}async function I(t,o,n,i,r=!1,s=null){const{debugString:a,cleanedItems:l}=function(e){let t=`üõí Total Items to Add: ${e.length}\n`;const o=e.map(((e,o)=>{const n=e._debug||{};t+=`‚Ä¢ ${n.readableString||`Item ${o+1}`} - Variant ID: ${n.variantId||"N/A"} - Qty: ${n.quantity||"N/A"} - Selling Plan: ${n.sellingPlan||"None"}\n`;const{_debug:i,...r}=e;return r}));return{debugString:t,cleanedItems:o}}(t);console.log("üîç Cart add debug string:",a);const{isValid:c,errors:u,config:d}=E(o);if(!c)return void console.error("WWAI-ERROR ‚ùå Invalid flowConfig:",u);const{loader:p,showSuccessNotification:g,showErrorNotification:f,successNotificationMessage:h,errorNotificationMessage:y,destination:I,sideCartLabel:R,notificationOptions:A,clearCartBeforeAddingItems:O}=d;m(n,i,p);try{let t=null;r?await new Promise((e=>setTimeout(e,600))):("checkout"===I&&O&&await async function(){try{const e=await fetch("/cart/clear.js",{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok){const t=await e.json();return void console.error("WWAI-ERROR ‚ùå Failed to clear cart:",t)}console.log("üßπ Cart cleared successfully")}catch(e){console.error("WWAI-ERROR ‚ùå Error while clearing cart:",e)}}(),t=await function(e){return fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e})}).then((e=>{if(!e.ok)throw new Error("Add to cart failed");return e.json()}))}(l)),function(e,t,o={}){e&&_(t,2e3,o)}(g,h,A),await async function(t,o,n,i,r){const s=e=>`üõí Product added to cart (mock mode) ‚Äî ${e} redirect enabled.\n\n${r||""}`;"checkout"===t?n?e(s("checkout"),"success",!0):window.location.href="/checkout":"cart"===t?n?e(s("cart"),"success",!0):window.location.href="/cart":"side-cart"===t?await w(o,i,n,r):console.warn(`‚ö†Ô∏è Unknown destination "${t}"`)}(I,R,r,t,a)}catch(e){console.error("WWAI-ERROR ‚ùå Failed to add to cart:",e),function(e,t,o={}){e&&_(t,2e3,o)}(f,y||e.message,A)}finally{b(n,i,p),v(n,i),"function"==typeof s&&s("addedToCart")}}customElements.define(o.PRODUCT_GROUP.PRICE,f);class R extends t{constructor(){super(),this.formElement=null,this.submitButton=null,this.variantInput=null,this.sellingPlanInput=null,this.quantityInput=null,this.deployMode=null,this.flowConfig=null,this.handlers={}}connectedCallback(){console.log("‚úÖ Registered submit interceptor for:",this.sectionId,this.productGroup);const e=window.SECTION_DATA?.all_sections?.storeData?.deployMode;this.deployMode=e,this.formElement=this.querySelector("form"),this.submitButton=this.formElement?.querySelector('button[type="submit"]'),this.variantInput=this.formElement?.querySelector('input[name="id"]'),this.sellingPlanInput=this.formElement?.querySelector('input[name="selling_plan"]'),this.bundleInput=this.formElement?.querySelector('input[name="bundle_payload"]'),this.quantityInput=this.formElement?.querySelector('input[name="quantity"]'),this.formElement&&this.submitButton?this.formElement.addEventListener("submit",(e=>this.handleSubmit(e))):console.error("WWAI-ERROR ‚ùå Missing form or submit button inside <product-custom-submit-interceptor>")}registerHandler(e,t){console.log("registerHandler with type: ",e),this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)}triggerHandler(e){this.handlers&&this.handlers[e]&&(this.handlers[e]||[]).forEach((e=>e()))}itemsToAdd(){const e=this.variantInput?.value,t=Number(this.quantityInput?.value)||1,o=this.sellingPlanInput?.value||null,n=this.bundleInput?.value||null,i=this.variantInput?.dataset.title||"Unknown Product",r=this.sellingPlanInput?.dataset.option_name||"One-time purchase",s=this.quantityInput?.value||"1";if(n){return JSON.parse(n).map((e=>({...e,_debug:{source:"bundle",variantId:e.id,quantity:e.quantity,sellingPlan:e.selling_plan||null,bundlePayload:!0,readableString:null}})))}if(!e)return console.error("WWAI-ERROR ‚ùå No variant selected. Cannot proceed."),[];const a={id:e,quantity:t};return o&&(a.selling_plan=o),a._debug={source:"single",variantId:e,quantity:t,sellingPlan:o,bundlePayload:!1,readableString:`${i} - ${r} (Qty: ${s})`},[a]}validateFlowReady(){return this.deployMode?!!this.flowConfig||(e("‚ö†Ô∏è Error: Flow Config is not initialized!","error",!0),!1):(e("‚ö†Ô∏è Error: `deploy_mode` is not set!","error",!0),!1)}handleSubmit(t){if(!this.validateFlowReady())return void t.preventDefault();t.preventDefault();const o=this.itemsToAdd();0!==o.length?"local"===this.deployMode?(console.log("Running in Local Mode"),this.handleLocalMode(o)):"sandbox"===this.deployMode?(console.log("Running in Sandbox Mode"),this.handleSandboxMode(t)):this.proceedWithSubmission(t,this.flowConfig,o):e("‚ö†Ô∏è No items found for submission.","warning",!0)}handleLocalMode(t){console.info("[LOCAL] Simulated add-to-cart for items:",t);const o=this.variantInput?.dataset.title||"Unknown Product",n=this.sellingPlanInput?.dataset.option_name||"One-time purchase",i=this.quantityInput?.value||"1";e(`üõçÔ∏è Simulated add-to-cart for ${t.length} items. ${o} - ${n} (Qty: ${i})`),setTimeout((()=>{this.proceedWithSubmission(event,this.flowConfig,this.itemsToAdd())}),2e3)}handleSandboxMode(t){if(t.preventDefault(),this.sellingPlanInput?.value){const o=this.sellingPlanInput.value;console.warn(`[SANDBOX] Clearing selling_plan_id: ${o}`),e(`Removing Selling Plan: ${o}`,"warning",!0),setTimeout((()=>{this.sellingPlanInput.value="",console.log(`Selling plan removed: ${o}`),this.proceedWithSubmission(t,this.flowConfig,this.itemsToAdd())}),2e3)}else this.proceedWithSubmission(t,this.flowConfig,this.itemsToAdd())}async proceedWithSubmission(e,t,o){e&&e.preventDefault();let n="local"===this.deployMode;await I(o,t,this.sectionId,this.productGroup,n,(e=>this.triggerHandler(e)))}}customElements.define(o.PRODUCT_GROUP.SUBMIT_INTERCEPTOR,R);const A="data-wwai-purchase-type-option",O={ONETIME:"onetime",SUBSCRIPTION:"subscription"},C=`input[type="radio"][${A}]`,T=[{selector:o.PRODUCT_GROUP.VARIANT,required:!0,exact:1,name:"Variant Selector"},{selector:o.PRODUCT_GROUP.PRICE,required:!0,min:1,name:"Price Selector"},{selector:o.PRODUCT_GROUP.PURCHASE_TYPE,required:!1,max:1,name:"Purchase Type Selector"},{selector:o.PRODUCT_GROUP.SUBSCRIPTION_FREQUENCY,required:!1,max:1,name:"Subscription Frequency Selector"},{selector:o.PRODUCT_GROUP.ADD_TO_CART,required:!1,max:1,name:"Add to Cart Button"},{selector:o.PRODUCT_GROUP.SUBMIT_INTERCEPTOR,required:!1,max:1,name:"Submit Interceptor"},{selector:o.PRODUCT_GROUP.PRODUCT_MEDIA_GALLERY_FOR_GRIDS,required:!1,max:1,name:"Media Gallery for Grids"},{selector:o.PRODUCT_GROUP.CAROUSEL,required:!1,max:1,name:"Carousel Media"}],S=[{groupName:"Add to Cart Config",conditions:[[o.PRODUCT_GROUP.ADD_TO_CART,o.PRODUCT_GROUP.SUBMIT_INTERCEPTOR],[o.PRODUCT_GROUP.GRID_SMART_INTERACTION]],message:`Either both [${o.PRODUCT_GROUP.ADD_TO_CART} and ${o.PRODUCT_GROUP.SUBMIT_INTERCEPTOR}] or [${o.PRODUCT_GROUP.GRID_ICON_SMART_ADD_TO_CART}] must be present.`,enabled:!0},{groupName:"Media Display Config",conditions:[[o.PRODUCT_GROUP.CAROUSEL],[o.PRODUCT_GROUP.PRODUCT_MEDIA_GALLERY_FOR_GRIDS]],message:`Either [${o.PRODUCT_GROUP.CAROUSEL}] or [${o.PRODUCT_GROUP.PRODUCT_MEDIA_GALLERY_FOR_GRIDS}] must be present.`,enabled:!0}];const P=new class{constructor(e,t){this.requiredRules=e,this.conditionalRules=t}getAllRules(){return{required:this.requiredRules,conditional:this.conditionalRules.filter((e=>e.enabled))}}disableConditionalAssertion(e){const t=this.conditionalRules.find((t=>t.groupName===e));t?(t.enabled=!1,console.log(`Validation: Disabled conditional assertion "${e}"`)):console.warn(`Validation: Conditional assertion "${e}" not found.`)}enableConditionalAssertion(e){const t=this.conditionalRules.find((t=>t.groupName===e));t?(t.enabled=!0,console.log(`Validation: Enabled conditional assertion "${e}"`)):console.warn(`Validation: Conditional assertion "${e}" not found.`)}}([...T],[...S]);const $={},D=Object.values(o.PRODUCT_GROUP);function U(){Object.keys($).forEach((e=>delete $[e])),D.forEach((e=>{document.querySelectorAll(e).forEach((t=>{const o=t.getAttribute("section_id")?.trim(),n=t.getAttribute("product_group")?.trim();if(!o||!n)return void console.error(`WWAI-ERROR ‚ùå Skipping <${t.tagName.toLowerCase()}> ‚Äî Missing ${o?"":"`section_id`"}${o||n?"":" and "}${n?"":"`product_group`"}.`,t);const i=`${o}__${n}`;$[i]=$[i]||{sectionId:o,productGroup:n,elements:{}},$[i].elements[e]=$[i].elements[e]||[],$[i].elements[e].push(t)}))}));const e={};for(const t of Object.keys($)){const{sectionId:o,productGroup:n}=$[t];e[o]=e[o]||new Set,e[o].add(n)}const t={};for(const[o,n]of Object.entries(e))t[o]=Array.from(n);return console.group("[WWAI] üß± Product Group Registry"),console.table(t),console.groupEnd(),function(e){console.group("[WWAI] üß™ Validating Product Group Registry"),Object.entries(e).forEach((([e,t])=>{const{sectionId:o,productGroup:n,elements:i}=t,{required:r,conditional:s}=P.getAllRules(),a=[];r.forEach((({selector:e,required:t,exact:o,min:n,max:r})=>{const s=(i[e]||[]).length;t&&0===s&&a.push(`Missing required selector: ${e}`),void 0!==o&&s!==o&&a.push(`Selector "${e}" must have exactly ${o}, found ${s}`),void 0!==n&&s<n&&a.push(`Selector "${e}" must have at least ${n}, found ${s}`),void 0!==r&&s>r&&a.push(`Selector "${e}" must have at most ${r}, found ${s}`)})),s.forEach((({groupName:e,conditions:t,message:o})=>{t.some((e=>e.every((e=>(i[e]||[]).length>0))))||a.push(`‚ùå [${e}]: ${o}`)})),a.length>0&&(console.group(`‚ùå [${e}] (${o} / ${n})`),a.forEach((e=>console.warn(e))),console.groupEnd())})),console.groupEnd()}($),$}function x(e,t,o){const n=$[`${e}__${t}`];return n&&n.elements&&n.elements[o]?n.elements[o]:[]}function N(e,t,o){const n=x(e,t,o);return 0===n.length?(console.warn(`‚ö†Ô∏è No element found for selector="${o}" in group [${e} / ${t}]`),null):n.length>1?(console.error(`WWAI-ERROR ‚ùå Expected only one element for selector="${o}" but found ${n.length} in group [${e} / ${t}]`),null):n[0]}function L(e,t,o){t&&e.updatePrices({price:t.price,compareAtPrice:t.compareAtPrice,discount_percent:t.discount_percent},o)}function G({sectionId:e,productGroup:t,priceObj:n,type:i}){x(e,t,o.PRODUCT_GROUP.PRICE).forEach((e=>{"function"==typeof e.updatePrices?n?L(e,n,i):console.warn(`‚ö†Ô∏è priceObj data is missing for type '${i}'.`):console.warn("‚ö†Ô∏è Skipping price selector: missing updatePrices method",e)}))}function M({sectionId:e,productGroup:t,sellingPlanId:n,sellingPlanName:i}){const r=N(e,t,o.PRODUCT_GROUP.ADD_TO_CART);r&&(r&&"function"==typeof r.updateSellingPlan?r.updateSellingPlan(n,i):console.error("WWAI-ERROR ‚ùå Could not find <product-custom-add-to-cart-button-selector> or missing .updateSellingPlan()"))}function W({sectionId:e,productGroup:t,purchaseType:n,pricesDict:i}){n===O.ONETIME?function({sectionId:e,productGroup:t,pricesDict:o}){console.log("üõí One-Time Purchase Selected ‚Üí Clearing Selling Plan ID"),M({sectionId:e,productGroup:t,sellingPlanId:"",sellingPlanName:""}),G({sectionId:e,productGroup:t,priceObj:o.oneTimePrice,type:"onetime_or_subscription"})}({sectionId:e,productGroup:t,pricesDict:i}):n===O.SUBSCRIPTION?function({sectionId:e,productGroup:t}){const n=N(e,t,o.PRODUCT_GROUP.SUBSCRIPTION_FREQUENCY);if(!n)return void console.warn(`‚ö†Ô∏è No subscription frequency selector found for [${e} / ${t}]`);const i=n.getCurrentSelectedPlan();i?(console.log("‚úÖ Current Subscription Plan Found:",i),M({sectionId:e,productGroup:t,sellingPlanId:i.selling_plan_id,sellingPlanName:i.option_name}),G({sectionId:e,productGroup:t,priceObj:{price:i.after_price,compareAtPrice:i.before_price,discount_percent:i.discount_percent},type:"onetime_or_subscription"})):console.warn(`‚ö†Ô∏è No subscription plan selected for [${e} / ${t}]`)}({sectionId:e,productGroup:t}):console.warn(`‚ö†Ô∏è Unsupported purchase type '${n}' for [${e} / ${t}]`)}class q extends t{constructor(){super(),this.subscriptionInput=null,this.onetimeInput=null,this.pricesDict=null}connectedCallback(){if(!this.sectionId||!this.productGroup)return void console.warn(`‚ö†Ô∏è <product-purchase-type-selector> missing attributes ‚Äî sectionId: ${this.sectionId}, productGroup: ${this.productGroup}`);this.querySelectorAll(`input[type="radio"][${A}]`).forEach((e=>{const t=e.getAttribute(A);t===O.SUBSCRIPTION?this.subscriptionInput=e:t===O.ONETIME&&(this.onetimeInput=e)})),this.subscriptionInput&&this.onetimeInput?this.subscriptionInput.name===this.onetimeInput.name?(this.ensureAutocompleteOff(),this.subscriptionInput.addEventListener("change",(()=>{this.subscriptionInput.checked&&(this.onetimeInput.checked=!1,this.handlePurchaseTypeChange(O.SUBSCRIPTION))})),this.onetimeInput.addEventListener("change",(()=>{this.onetimeInput.checked&&(this.subscriptionInput.checked=!1,this.handlePurchaseTypeChange(O.ONETIME))})),console.log("‚úÖ Registered purchase type selector for:",this.sectionId,this.productGroup)):console.error("WWAI-ERROR ‚ùå Purchase type radios must have the same name"):console.error("WWAI-ERROR ‚ùå Missing both purchase type radio inputs")}cachePrices(e){this.pricesDict=e}getSelectedPurchaseType(){return this.subscriptionInput?.checked?{purchaseType:O.SUBSCRIPTION}:(this.onetimeInput,{purchaseType:O.ONETIME})}setPurchaseType(e){e===O.SUBSCRIPTION?(this.subscriptionInput.checked=!0,this.onetimeInput.checked=!1):(this.subscriptionInput.checked=!1,this.onetimeInput.checked=!0)}handlePurchaseTypeChange(e){console.log(`üîÑ Purchase type changed to: ${e}`),W({sectionId:this.sectionId,productGroup:this.productGroup,purchaseType:e,pricesDict:this.pricesDict})}ensureAutocompleteOff(){[this.subscriptionInput,this.onetimeInput].forEach((e=>{e.hasAttribute("autocomplete")||e.setAttribute("autocomplete","off")}))}}customElements.define(o.PRODUCT_GROUP.PURCHASE_TYPE,q);const k="data-wwai-subscription-frequency-select",j=`[${k}]`;function B({sectionId:e,productGroup:t,oneTimePrice:n,subscriptionPrice:i,purchaseType:r}){const s=x(e,t,o.PRODUCT_GROUP.PRICE);let a=function(e,t){return!!N(e,t,o.PRODUCT_GROUP.PURCHASE_TYPE)}(e,t);s.length?s.forEach((e=>{"function"==typeof e.updatePrices?(L(e,n,"one_time"),L(e,i,"subscription"),a&&(r==O.ONETIME?L(e,n,"onetime_or_subscription"):L(e,i,"onetime_or_subscription"))):console.warn("‚ö†Ô∏è Skipping price selector: missing updatePrices method",e)})):console.warn(`‚ö†Ô∏è No price selectors found for section="${e}", productGroup="${t}"`)}function H({sectionId:e,productGroup:t,oneTimePrice:n,subscriptionPrice:i,purchaseType:r,onlySetPurchaseType:s=!1}){const a=N(e,t,o.PRODUCT_GROUP.PURCHASE_TYPE);a&&(s||(void 0===n&&void 0===i?console.error(`WWAI-ERROR ‚ùå setPurchaseTypeForGroup: Both oneTimePrice and subscriptionPrice are undefined for [${e} / ${t}]`):void 0===n&&void 0===i||"function"==typeof a.cachePrices&&a.cachePrices({oneTimePrice:n,subscriptionPrice:i})),void 0===r?console.error(`WWAI-ERROR ‚ùå setPurchaseTypeForGroup: purchaseType is undefined for [${e} / ${t}]`):"function"==typeof a.setPurchaseType?(a.setPurchaseType(r),console.log(`‚úÖ Default purchase type set for [${e} / ${t}] ‚Üí ${r}`)):console.error("WWAI-ERROR ‚ùå <product-purchase-type-selector> is missing .setPurchaseType()"))}class F extends t{constructor(){super(),this.sellingPlans=[],this.selectElement=null}connectedCallback(){console.log(`‚úÖ Registered subscription frequency selector for: ${this.sectionId} / ${this.productGroup}`);const e=this.querySelectorAll(j);0!==e.length?(e.length>1&&console.warn("‚ö†Ô∏è Multiple <select> elements found for subscription frequency. Only the first one will be used."),this.selectElement=e[0],this.selectElement.addEventListener("change",(e=>{!function(e,t,o){if(!e||!t||!o)return void console.error("WWAI-ERROR ‚ùå Invalid parameters provided to updateSubscriptionPlanForGroup.");const n={price:e.after_price,compareAtPrice:e.before_price,discount_percent:e.discount_percent};H({sectionId:t,productGroup:o,oneTimePrice:void 0,subscriptionPrice:void 0,purchaseType:O.SUBSCRIPTION,onlySetPurchaseType:!0}),["subscription","onetime_or_subscription"].forEach((e=>{G({sectionId:t,productGroup:o,priceObj:n,type:e})})),M({sectionId:t,productGroup:o,sellingPlanId:e.selling_plan_id,sellingPlanName:e.option_name}),console.log(`‚úÖ Subscription plan successfully updated for [${t} / ${o}]`)}(this.getCurrentSelectedPlan(),this.sectionId,this.productGroup)}))):console.error(`WWAI-ERROR ‚ùå No <select> element found with selector ${j}`)}updateSubscriptionOptions(e){Array.isArray(e)?(this.selectElement.innerHTML="",e.forEach((e=>{const t=document.createElement("option");t.value=e.selling_plan_id,t.textContent=e.option_name,t.dataset.beforePrice=e.before_price,t.dataset.afterPrice=e.after_price,t.dataset.discountPercent=e.discount_percent,this.selectElement.appendChild(t)})),console.log("‚úÖ Subscription options updated:",JSON.stringify(e,null,2))):console.error("WWAI-ERROR ‚ùå Invalid subscription options received.")}getSelectedPlanId(){return this.selectElement.value||null}getCurrentSelectedPlan(){const e=this.selectElement.options[this.selectElement.selectedIndex];return e?{option_name:e.textContent.trim(),selling_plan_id:e.value.trim(),before_price:e.dataset.beforePrice?.trim(),after_price:e.dataset.afterPrice?.trim(),discount_percent:e.dataset.discountPercent?.trim()}:(console.warn("‚ö†Ô∏è No plan currently selected."),null)}}customElements.define(o.PRODUCT_GROUP.SUBSCRIPTION_FREQUENCY,F);const z="data-wwai-variant-custom-label-text",V="data-wwai-variant-custom-label-value",Y=`[${z}]`;class J extends t{connectedCallback(){console.log("‚úÖ Registered custom variant label for:",this.sectionId,this.productGroup)}updateCustomLabels(e){if("object"!=typeof e||!e)return void console.error("WWAI-ERROR ‚ùå Invalid label data received:",e);const t=this.querySelectorAll(`[${z}]`);t.length?t.forEach((t=>{const o=t.getAttribute(V),n=e[o];n?(t.textContent=n,console.log(`‚úÖ Updated label for ${o}:`,n)):console.warn(`‚ö†Ô∏è No label found for type: ${o} in labelData`)})):console.warn(`‚ö†Ô∏è No elements found with ${z} inside <product-variant-custom-labeled-text> (section: ${this.sectionId}, group: ${this.productGroup})`)}}customElements.define(o.PRODUCT_GROUP.VARIANT_CUSTOM_LABEL,J);const X="data-wwai-product-variant-option-type",Q="data-wwai-product-label",Z="data-wwai-product-variant-label",K="data-wwai-product-variant-label-level",ee="product",te="product_variant";function oe(e){return[...e].filter((e=>e.checked))}function ne(e){return e.find((e=>e.getAttribute(X)===ee))?.getAttribute(Q)}function ie(e){const t=e?e.inputs:null;if(!t||0===t.length)return console.error(`WWAI-ERROR [buildProductHierarchyFromSelector] ‚ùå No inputs found on selector: ${e}`),null;const o=new Set,n={};t.forEach((e=>{const t=e.getAttribute(X),i=e.getAttribute(Q);if(i&&(o.add(i),n[i]||(n[i]={}),"product_variant"===t)){const t=e.getAttribute(Z),o=e.getAttribute(K)||"option1";n[i][o]||(n[i][o]=new Set),n[i][o].add(t)}}));const i={productLabels:[...o],variants:{}};return Object.entries(n).forEach((([e,t])=>{i.variants[e]={},Object.entries(t).forEach((([t,o])=>{i.variants[e][t]=[...o]}))})),i}function re({rootElement:e,variantRadios:t,inputs:o,sectionId:n,productGroup:i,uxConfig:r={}}){if(!r)return void console.warn("‚ö†Ô∏è No variant UX config provided.");const{hideSingleLengthVariants:s,onlyShowVariantsWithLabelContains:a}=r;if(!t||!t.length)return void console.warn(`‚ö†Ô∏è No variant radios found in <product-variant-selector> [${n}].`);const l=ne(oe(o)),c=ie(e);s&&(console.log(`üîß Hiding single-length variants for [${i}, ${n}]`),function(e,t,o,n){if(!n)return;console.log(`üõ†Ô∏è Hiding single size variants for product: ${t}`);const i=o.variants[t];Object.entries(i).forEach((([t,o])=>{if(1===o.length){console.log(`üîç Single variant detected at ${t}: ${o[0]}`);const n=o[0].trim();e.forEach((e=>{const o=e.getAttribute(K)||"option1",i=e.getAttribute(Z)?.trim();if(o===t&&i===n){console.log(`üôà Hiding input for ${t} = ${n}`),e.parentElement.style.display="none",e.checked=!0;let o=e.parentElement,i=!1;for(let e=0;e<5&&o;e++){if(o.hasAttribute("data-wwai-product-variant-option-wrapper")){console.log("üéØ Found wrapper, setting display to none"),o.style.display="none",i=!0;break}o=o.parentElement}i||console.log(`‚ö†Ô∏è No wrapper found for ${n}`)}}))}}))}(t,l,c,s)),a&&(console.log(`üîß Showing only variants matching "${a}" for [${i}, ${n}]`),function(e,t){if(!t)return;const o=t.trim().toLowerCase();e.forEach((e=>{const t=e.getAttribute("data-wwai-product-variant-label-key")?.trim().toLowerCase();if(t&&t.includes(o)){"none"===e.parentElement.style.display&&(e.parentElement.style.display="");let t=e.parentElement;for(let e=0;e<5&&t;e++){if(t.hasAttribute("data-wwai-product-variant-option-wrapper")){"none"===t.style.display&&(console.log("‚Ü™Ô∏è Display was 'none', reverting back to original"),t.style.display="");break}t=t.parentElement}}else{e.parentElement.style.display="none";let t=e.parentElement;for(let e=0;e<5&&t;e++){if(t.hasAttribute("data-wwai-product-variant-option-wrapper")){t.style.display="none";break}t=t.parentElement}}}))}(t,a))}function se(e){if("number"!=typeof e||isNaN(e))return"";const t="number"==typeof window.CURRENCY_FACTOR?window.CURRENCY_FACTOR:.01,o=window.CURRENCY||"USD",n=e*t;return new Intl.NumberFormat(void 0,{style:"currency",currency:o}).format(n)}function ae(){return window.SECTION_DATA&&window.SECTION_DATA.all_sections?window.SECTION_DATA.all_sections:(console.warn("‚ö†Ô∏è No data found for section: all_sections."),null)}function le(e,t){if(t.startsWith("wwai_virtual_bundle__"))return{};const o=ae();if(!o||!o.storeData||!o.storeData.productGroups)return console.warn("‚ö†Ô∏è Invalid globalSectionData."),null;const n=o.storeData.productGroups[e];return n&&n[t]?n[t]:(console.warn(`‚ö†Ô∏è Product "${t}" not found in product group "${e}".`),null)}function ce(...e){return e.filter((e=>null!=e)).map((e=>e.trim()))}function ue(e,t){const o=ce(e.option1,e.option2,e.option3);return t.length===o.length&&t.every(((e,t)=>e===o[t]))}function de(e,t){let o=(n=e,i=t,Array.isArray(window.LIQUID_PRODUCT_MAPPING_ARRAY)&&window.LIQUID_PRODUCT_MAPPING_ARRAY.length>0?function(e,t,o){for(const n of e){const e=n.split(":").map((e=>e.trim()));if(e[0]===t&&e[1]===o)return e[2]}return null}(window.LIQUID_PRODUCT_MAPPING_ARRAY,n,i):null);var n,i;if(window.WWAI_VIRTUAL_BUNDLE_CONFIG&&window.WWAI_VIRTUAL_BUNDLE_CONFIG.hasOwnProperty(o)){const t=window.WWAI_VIRTUAL_BUNDLE_CONFIG[o],n=function(e,t,o){const n=`wwai_bundle - ${t.map((e=>e?.title||"Unknown")).join(" + ")}`;let i=0,r=0,s=!0;const a=[];return t.forEach(((e,t)=>{const n=o[t]?.quantity||1,l=null!=e.compare_at_price?e.compare_at_price:e.price;i+=e.price*n,r+=l*n,e.available||(s=!1),a.push({id:e.id,quantity:n})})),{id:`wwai_bundle_${e}`,title:n,available:s,price:i,compare_at_price:r,add_to_cart_payload:a}}(e,t.map((e=>pe(e.handle,e.handle,...e.variantOptions))),t);return n}return null}function pe(e,t,o,n=null,i=null){const r=le(e,t);if(!r)return null;if(t.startsWith("wwai_virtual_bundle__")){let o=de(e,t);return console.log("Resolved virtual bundle:",e,t,o),o}const s=r.variants||[],a=ce(o,n,i);if(1===a.length&&"__wwai_first__"===a[0])return window.customProductEventLoggingEnabled&&console.log("Returning first variant due to __wwai_first__ directive."),s[0];for(let e of s)if(ue(e,a))return e;return 1===s.length?s[0]:(console.warn(`‚ö†Ô∏è No matching variant found for options [${a.join(", ")}] in product "${t}" under group "${e}".`),null)}function ge(e,t,o=null){const n=function(e,t){const o=ae();if(!o||!o.storeData||!o.storeData.variantSellingPlans)return console.warn("‚ö†Ô∏è Invalid globalSectionData or missing variantSellingPlans."),null;const n=`${e}__${t}`;return o.storeData.variantSellingPlans[n]||(console.warn(`‚ö†Ô∏è No selling plan found for productGroup="${e}" and productLabel="${t}"`),null)}(e,t);if(!n)return console.warn(`‚ùå Cannot build subscription mapping ‚Äî selling plan data missing for ${e} / ${t}`),null;const{variants:i,selling_plan_groups:r}=n;return Array.isArray(i)&&Array.isArray(r)?function(e,t,o=null){let n={};return e.forEach((e=>{const i=e.id,r=e.title,s=e.price;let a=[];const l=Array.isArray(e.selling_plan_allocations)&&e.selling_plan_allocations.length>0;(e.selling_plan_allocations||[]).forEach((e=>{const n=e.selling_plan_id,i=e.price_adjustments||[];let r=s,l=null;i.forEach((e=>{1===e.position?r=e.price:2===e.position&&(l=e.price)})),null===l&&(l=r),t.forEach((e=>{e.selling_plans.forEach((e=>{if(e.id===n){let t=e.name;o&&t.startsWith(o)&&(t=t.substring(o.length).trim()),a.push({selling_plan_id:n,delivery_option:t,base_price:s,first_order_price:r,subsequent_order_price:l})}}))}))})),n[`${i}, ${r}`]={variant_id:i,variant_title:r,has_subscription:l,selling_plans:a}})),n}(i,r,o):(console.warn("‚ùå Invalid variants or selling_plan_groups format."),null)}function fe(e,t,o,n){if(!(e&&t&&o&&n))return console.warn("‚ùå Invalid product group, product label, variant object, or config."),null;const i=ge(e,t,n.uxConfig.variantOptionRemovePrefix),r=function(){const e=ae();return e&&e.storeData&&void 0!==e.storeData.useMockSubscription?e.storeData.useMockSubscription:(console.warn("‚ö†Ô∏è Missing or invalid 'useMockSubscription' in globalSectionData."),null)}(),s=function(e,t,o,n=!1){if(!e||"object"!=typeof e)return null;for(const i of Object.keys(e)){const[r,s]=i.split(", ").map((e=>e.trim()));if(n?s===o:r===String(t))return e[i]}return null}(i,o.id,o.title,r);return s}function he(e,t){const o={};return new Set([...Object.keys(t||{}),...Object.keys(e||{})]).forEach((n=>{const i=e?.[n],r=t?.[n];null!=i?o[n]=i:null!=r&&(o[n]=r)})),o}function me(e,t,o=null){const n=o||window.WWAI_PRODUCT_GROUP_CONFIG;if(!n||"object"!=typeof n)return console.error("WWAI-ERROR ‚ùå window.WWAI_PRODUCT_GROUP_CONFIG is missing or invalid."),null;e.includes("__")?e=e.split("__")[1]:e.includes("--")&&(e=e.split("--")[1]);const i=n[e];if(!i)return console.warn(`‚ùå No config found for sectionId "${e}"`),null;const r=i[t];if(!r)return console.warn(`‚ùå No product group config found for "${t}" in section "${e}"`),null;const s=i.defaults||{};return{pricingConfig:he(r.pricingConfig,s.pricingConfig),uxConfig:he(r.uxConfig,s.uxConfig),flowConfig:he(r.flowConfig,s.flowConfig),variantDispatchConfig:r.variantDispatchConfig||{}}}function be(e,t,o,n){console.log(`üîÑ Resolving Product Data for: [${t}] - ${o}`);const i=me(e,t),r=function(e,t,o,n={}){if(o.startsWith("wwai_virtual_bundle"))return{};const i=window.WWAI_PRODUCT_VARIANT_OVERRIDES;if(!i)return console.error("WWAI-ERROR ‚ùå WWAI_PRODUCT_VARIANT_OVERRIDES not found on window."),null;let r=e;if(r.includes("__")?r=r.split("__")[1]:r.includes("--")&&(r=r.split("--")[1]),!i[r]||!i[r][t])return console.warn(`‚ùå Section "${r}" or product group "${t}" not found in overrides.`),null;const s=i[r][t][o];if(!s)return console.warn(`‚ùå Product label "${o}" not found in overrides under group "${t}".`),null;const a=[n.option1,n.option2,n.option3].filter(Boolean).map((e=>e.trim())).join(" | ");return s[a]||(console.warn(`‚ùå Variant key "${a}" not found under product "${o}".`),null)}(e,t,o,n),{product:s,variant:a}=function(e,t,o={}){console.group("[resolveVariantFromWindowProduct]"),console.log("Product Group:",e),console.log("Product Label:",t),console.log("Variant Options:",o),console.groupEnd();const n=o.option1||null,i=o.option2||null,r=o.option3||null,s=le(e,t);return s?{product:s,variant:pe(e,t,n,i,r)}:{product:null,variant:null}}(t,o,n);return s&&a?{config:i,variant_config:r,product_object:s,variant_object:a}:(console.error(`WWAI-ERROR ‚ùå Failed to resolve product or variant data for ${o}`),{config:i,variant_config:r,product_object:null,variant_object:null})}const{PRICE:ye,VARIANT_CUSTOM_LABEL:_e,CAROUSEL:we,PURCHASE_TYPE:Ee,SUBSCRIPTION_FREQUENCY:ve,ADD_TO_CART:Ie,GRID_SMART_INTERACTION:Re}=o.PRODUCT_GROUP;function Ae({productObject:e,variantObject:t,variantConfig:o,productGroup:n,productLabel:i,config:r}){const s=function(e,t={}){if(!e||"number"!=typeof e.price)return console.error("WWAI-ERROR ‚ùå Invalid variant provided."),{price:"$0.00",compareAtPrice:"$0.00",discount_percent:"0.00"};const o=t?.discountPercent??0;let n=e.price,i=e.compare_at_price||null;o>0&&(i=Math.max(e.price,e.compare_at_price||0),n=e.price-e.price*o/100),i||(i=e.price);const r=i>0?(i-n)/i*100:0,s=parseInt(r,10),a=s===r?s:r.toFixed(2);return{price:se(n),compareAtPrice:se(i),discount_percent:a}}(t,r.pricingConfig),a=function(e,t){if(!e||!Array.isArray(e.media))return console.warn("‚ö†Ô∏è Invalid product or media array."),[];if(!t||!t.customMediaLabel)return e.media;const o=t.customMediaLabel,n=window.WWAI_LABELED_IMAGES?.[o];return Array.isArray(n)&&0!==n.length?n:(console.warn(`‚ö†Ô∏è No labeled media found for label "${o}". Falling back to product media.`),e.media)}(e,o),l=function(e){const t=e?.redirectToMediaIndex;return"number"==typeof t&&t>=0?t:0}(o),c=function(e,t,o,n){const i=fe(e,t,o,n);if(!i)return console.warn("Selling plan info not found. Returning."),[];const r=n?.variant_option_remove_prefix||"",s=n?.pricingConfig?.subscriptionDiscountPercent??0;return i.selling_plans.map((e=>{const t=e.base_price;let o=e.first_order_price;s>0&&(o=Math.round(o*(1-s/100)));const n=t>0?(t-o)/t*100:0;let i=e.delivery_option||"";return r&&i.startsWith(r)&&(i=i.substring(r.length).trim()),{option_name:i,selling_plan_id:String(e.selling_plan_id),before_price:se(t),after_price:se(o),discount_percent:n.toFixed(2)}}))}(n,i,t,r),u=function(e,t,o){const n=t?.pricingConfig?.defaultSubscriptionOption??null;if(!Array.isArray(e)||0===e.length)return console.warn("‚ö†Ô∏è No valid selling plan info provided."),{sellingPlanName:null,sellingPlanId:null,sellingPlanPriceObject:null};const i=n&&e.find((e=>e.option_name===n))||e[0],r=i.option_name,s=i.selling_plan_id,a=i.after_price;let l=i.before_price;return o.compare_at_price&&(l=se(o.compare_at_price)),{sellingPlanName:r,sellingPlanId:s,sellingPlanPriceObject:{price:a,compareAtPrice:l,discount_percent:i.discount_percent}}}(c,r,t),d=function({variantObject:e,sellingPlanId:t,sellingPlanName:o,productObject:n,defaultPurchaseType:i}){if(!e||!n)return console.warn("‚ùå Invalid variant object or product object."),null;const r=i===O.SUBSCRIPTION,s=!1!==e.available;return{variantId:e.id,variantName:`${n.title} - ${e.title}`,productHandle:n.handle,available:s,sellingPlanId:r?t:null,sellingPlanName:r?o:null}}({variantObject:t,sellingPlanId:u.sellingPlanId,sellingPlanName:u.sellingPlanName,productObject:e,defaultPurchaseType:r.uxConfig.defaultPurchaseType});return{oneTimePrice:s,media:a,mediaIndex:l,sellingPlans:c,sellingPlanDetails:u,addToCartPayload:d}}function Oe({sectionId:e,productGroup:t,productLabel:n,variantOptions:i,productObject:r,variantObject:s,variantConfig:a,config:l}){const c=Ae({productObject:r,variantObject:s,variantConfig:a,productGroup:t,productLabel:n,config:l}),u=function(e,t){const o=$[`${e}__${t}`];return o&&o.elements?Object.keys(o.elements):[]}(e,t),d=e=>u.includes(e);!function({sectionId:e,productGroup:t,productLabel:n,variantOptions:i}){const r=N(e,t,o.PRODUCT_GROUP.VARIANT);if(!r)return;if("function"!=typeof r.setSelectedProductAndOptions)return void console.error("WWAI-ERROR ‚ùå <product-variant-selector> is missing setSelectedProductAndOptions()");r.setSelectedProductAndOptions(n,i)?console.log(`‚úÖ Default variant set for [${e} / ${t}] ‚Üí ${n}`,i):console.warn(`‚ö†Ô∏è Failed to set default product/options for section="${e}", group="${t}"`)}({sectionId:e,productGroup:t,productLabel:n,variantOptions:i}),d(_e)&&function({sectionId:e,productGroup:t,labelData:n={}}){const i=N(e,t,o.PRODUCT_GROUP.VARIANT_CUSTOM_LABEL);i&&("function"==typeof i.updateCustomLabels?(i.updateCustomLabels(n),console.log(`‚úÖ Custom labels updated for [${e} / ${t}] ‚Üí`,n)):console.error("WWAI-ERROR ‚ùå <product-variant-custom-labeled-text-selector> is missing .updateCustomLabels()"))}({sectionId:e,productGroup:t,labelData:a?.customLabelText||{}}),d(ye)&&B({sectionId:e,productGroup:t,oneTimePrice:c.oneTimePrice,subscriptionPrice:c.sellingPlanDetails.sellingPlanPriceObject,purchaseType:l.uxConfig.defaultPurchaseType}),d(we)&&function({sectionId:e,productGroup:t,media:n=[],moveToIndex:i=0}){const r=N(e,t,o.PRODUCT_GROUP.CAROUSEL);r&&("function"==typeof r.updateCarouselMedia?(r.updateCarouselMedia(n,i),console.log(`‚úÖ Media updated for [${e} / ${t}] ‚Üí Images:`,n)):console.error("WWAI-ERROR ‚ùå <product-custom-carousel-media-selector> is missing .updateCarouselMedia()"))}({sectionId:e,productGroup:t,media:c.media,moveToIndex:c.mediaIndex}),d(Ee)&&H({sectionId:e,productGroup:t,oneTimePrice:c.oneTimePrice,subscriptionPrice:c.sellingPlanDetails.sellingPlanPriceObject,purchaseType:l.uxConfig.defaultPurchaseType,onlySetPurchaseType:!1}),d(ve)&&function({sectionId:e,productGroup:t,subscriptionOptions:n}){const i=N(e,t,o.PRODUCT_GROUP.SUBSCRIPTION_FREQUENCY);i&&("function"==typeof i.updateSubscriptionOptions?(console.log("subscriptionOptions:",n),i.updateSubscriptionOptions(n),console.log(`‚úÖ Default subscription frequency set for [${e} / ${t}] ‚Üí Selling Plan Length: ${n.length}`)):console.error("WWAI-ERROR ‚ùå <product-subscription-frequency-selector> is missing .updateSubscriptionOptions()"))}({sectionId:e,productGroup:t,subscriptionOptions:c.sellingPlans}),d(Ie)&&function({sectionId:e,productGroup:t,addToCartPayload:n}){const i=N(e,t,o.PRODUCT_GROUP.ADD_TO_CART);i&&(i&&"function"==typeof i.updateAddToCartForm?(i.updateAddToCartForm(n),console.log(`‚úÖ AddToCart form updated for [${e} / ${t}]`)):console.error("WWAI-ERROR ‚ùå Could not find <product-custom-add-to-cart-button-selector> or missing .updateAddToCartForm()"))}({sectionId:e,productGroup:t,addToCartPayload:c.addToCartPayload}),d(Re)&&(console.log("üîÑ Updating Grid Smart Interaction Availability:",e,t,c.addToCartPayload),function(e,t,n){const i=x(e,t,o.PRODUCT_GROUP.GRID_SMART_INTERACTION),r=!0===n?.available;i.forEach(((e,t)=>{"function"==typeof e.updateAvailability?(e.updateAvailability(r,"Out of stock"),console.log(`üîÑ Grid Smart Interaction Button [${t}] availability set to: ${r}`)):console.warn(`‚ö†Ô∏è Grid Smart Interaction Button [${t}] is missing .updateAvailability()`)}))}(e,t,c.addToCartPayload))}class Ce extends t{constructor(){super(),this.scope=this.getAttribute("wwai-scope")||null,this.product_helper_handle=this.getAttribute("product-helper-handle")||null,this.handlers={},this.uxConfig=null,this.inputs=null}connectedCallback(){this.initInputs(),this.bindEvents(),this.ensureAutocompleteOff()}getProductRadios(){return this.querySelectorAll(`input[type="radio"][${X}="${ee}"]`)}getVariantRadios(){return this.querySelectorAll(`input[type="radio"][${X}="${te}"]`)}initInputs(){this.inputs=this.querySelectorAll('input[type="radio"]')}ensureAutocompleteOff(){var e;(e=this.inputs)&&0!==e.length&&e.forEach((e=>{e.hasAttribute("autocomplete")||e.setAttribute("autocomplete","off")}))}applyVariantUXConfig(){this.uxConfig&&this.uxConfig.variantUXConfig&&re({rootElement:this,variantRadios:this.getVariantRadios(),inputs:this.inputs,sectionId:this.sectionId,productGroup:this.productGroup,uxConfig:this.uxConfig.variantUXConfig})}initUXConfig(e){super.initUXConfig(e),this.applyVariantUXConfig()}bindEvents(){let e=null;const t=()=>{clearTimeout(e),e=setTimeout((()=>{const{productLabel:e,variantOptions:t}=this.getSelectedVariant();if(!e||!t)return;const o={productLabel:e,variantOptions:t};console.group("[WWAI] üîÑ Variant Change Detected"),console.log("üõí Product Label:",e),console.log("üéØ Variant Options:",t),console.groupEnd(),console.log("üîÅ Trigger handler on change or re-click"),this.triggerHandler("variantChange",o),this.uxConfig&&this.uxConfig.variantUXConfig&&0==this.uxConfig.variantUXConfig.refreshUxOnVariantChange?console.log("üîÑ Refresh UX on variant change is disabled. Skipping reinitialization."):function(e,t,o,n){console.log(`üîÑ Reinitializing Product Group on Variant Change: [${t}] - ${o}`);const{config:i,variant_config:r,product_object:s,variant_object:a}=be(e,t,o,n);s&&a?(Oe({sectionId:e,productGroup:t,productLabel:o,variantOptions:n,productObject:s,variantObject:a,variantConfig:r,config:i}),console.log(`‚úÖ Reinitialized Product Group: ${t} for Variant ${o}`)):console.error(`WWAI-ERROR ‚ùå Unable to reinitialize product group for ${t}`)}(this.sectionId,this.productGroup,e,t)}),0)};this.inputs.forEach((e=>{e.addEventListener("change",t),e.addEventListener("click",t)}))}registerHandler(e,t){e&&"function"==typeof t?(this.handlers[e]=this.handlers[e]||[],this.handlers[e].push(t),console.log(`‚úÖ Handler registered for type: ${e}`,t)):console.warn("‚ö†Ô∏è Invalid handler registration:",{type:e,callback:t})}triggerHandler(e,t){const o=this.handlers?.[e]||[];o.length&&(console.log(`‚ñ∂Ô∏è Running ${o.length} handler(s) for type: ${e}`,o),o.forEach((o=>{try{o(t)}catch(t){console.error(`WWAI-ERROR ‚ùå Error in handler for type "${e}":`,t)}})))}getSelectedVariant(){const e=oe(this.inputs),t=ne(e);if(!t)return console.warn(`‚ö†Ô∏è No selected product found in <product-variant-selector> [${this.sectionId}].`),null;const o=function(e,t){const o={},n={};return e.forEach((e=>{if(e.getAttribute(X)===te&&e.getAttribute(Q)===t){const i=e.getAttribute(K)||"option1",r=e.getAttribute(Z);n[i]?console.warn(`‚ùå Multiple variant options selected for "${i}" in product "${t}"`):(o[i]=r,n[i]=!0)}})),0===Object.keys(o).length?(console.warn(`‚ùå No variant options found for product "${t}", Returning default option "__wwai_first__"`),{option1:"__wwai_first__"}):o}(e,t);return{productLabel:t,variantOptions:o}}setSelectedProductAndOptions(e,t={}){const o=this.getProductRadios();if(!o.length)return console.warn(`‚ö†Ô∏è No product radio inputs found in <product-variant-selector> [${this.sectionId}].`),!1;const n=function(e,t,o){let n=!1;return e.forEach((e=>{const o=e.getAttribute(Q)?.trim(),i=o===t.trim();e.checked=i,i&&(n=!0)})),n||console.warn(`‚ùå No radio input matched product label: "${t}" in <product-variant-selector> [${o}].`),n}(o,e,this.sectionId);if(!n)return!1;const i=this.getVariantRadios(),r=function(e,t){const o={};return e.forEach((e=>{const n=e.getAttribute(Q)?.trim(),i=e.getAttribute(K)||"option1",r=e.getAttribute(Z)?.trim();n===t.trim()&&(o[i]||(o[i]=new Set),o[i].add(r))})),o}(i,e),s=function(e,t,o){let n=!0;return Object.entries(t).forEach((([t,i])=>{i.size>1&&!(t in o)&&(console.warn(`‚ùå Missing required variant option for "${t}" (multiple options exist) in product "${e}"`),n=!1)})),n}(e,r,t);this.applyVariantUXConfig();const a=function(e,t,o){let n=!0;return Object.entries(o).forEach((([o,i])=>{let r=!1;const s=i.trim();e.forEach((e=>{const n=e.getAttribute(Q)?.trim(),i=e.getAttribute(K)||"option1",a=e.getAttribute(Z)?.trim();n===t.trim()&&i===o&&(e.checked=a===s,a===s&&(r=!0))})),r||(console.warn(`‚ö†Ô∏è No match for [${o} = "${s}"] in product "${t.trim()}"`),n=!1)})),n}(i,e,t);return window.customProductEventLoggingEnabled&&console.log(`‚úÖ Set product: "${e}", selected options:`,t),s&&a}}customElements.define(o.PRODUCT_GROUP.VARIANT,Ce);class Te extends t{constructor(){super(),this.hydrationDone=!1}connectedCallback(){this.validateAttributes()&&(this.initializeContainer(),this.initializeFirstSlide())}validateAttributes(){return!(!this.sectionId||!this.productGroup)||(console.warn(`‚ö†Ô∏è Missing required attributes: section_id="${this.sectionId}", product_group="${this.productGroup}".`),!1)}initializeContainer(){const e=this.querySelector("[data-wwai-media-container]");return e?(this.container=e,!0):(console.error(`WWAI-ERROR ["${this.sectionId}"]["${this.productGroup}"]: Missing media container`),!1)}initializeFirstSlide(){const e=this.container.querySelector(".product-section-media");return e?(this.firstSlide=e,!0):(console.error(`WWAI-ERROR ["${this.sectionId}"]["${this.productGroup}"]: At least one slide should be present`),!1)}hydrateRemainingMedia(e=[]){if(!this.isValidMediaArray(e))return;const t=this.filterImageMedia(e),o=this.firstSlide.querySelector("img");if(!o)return void console.warn(`[${this.sectionId}] ‚ö†Ô∏è No <img> found inside the first slide.`);const n=this.matchFirstSlideMedia(o,t);this.attachMediaIdToFirstSlide(n);const i=n?t.filter((e=>e.id!==n.id)):t;this.appendNewSlides(i),this.hydrationDone=!0}isValidMediaArray(e){return!(!Array.isArray(e)||0===e.length)||(console.warn(`[${this.sectionId}] ‚ö†Ô∏è Invalid or empty media array passed to hydrateRemainingMedia()`),!1)}filterImageMedia(e){return e.filter((e=>"image"===e.media_type))}matchFirstSlideMedia(e,t){const o=normalizeUrl(e.getAttribute("src")||"");return t.find((e=>{const t=normalizeUrl(e.preview_image?.src);return o.includes(t)}))}attachMediaIdToFirstSlide(e){e&&!this.firstSlide.hasAttribute("data-wwai-carousel-media-id")?(this.firstSlide.setAttribute("data-wwai-carousel-media-id",e.id),console.log(`[${this.sectionId}] üü¢ Attached data-wwai-carousel-media-id="${e.id}" to first slide.`)):console.warn(`[${this.sectionId}] ‚ùå No matching media found for first slide`)}appendNewSlides(e){e.forEach((e=>{const t=this.createSlide(e);this.firstSlide.parentElement.appendChild(t)}))}createSlide(e){const t=this.firstSlide.cloneNode(!0);return t.removeAttribute("id"),this.cleanAttributes(t),this.updateImageAttributes(t,e),t}cleanAttributes(e){Array.from(e.attributes).forEach((t=>{t.name.startsWith("data-")&&"data-wwai-carousel-media-id"!==t.name&&e.removeAttribute(t.name)}))}updateImageAttributes(e,t){const o=e.querySelector("img");if(!o)return;this.cleanAttributes(o),o.src=t.preview_image?.src||"",o.setAttribute("loading","lazy");const n=o.getAttribute("srcset")||"",i=Array.from(n.matchAll(/(\d+)w/g)).map((e=>parseInt(e[1]))),r=t.preview_image?.src?.split("?")[0];if(r&&i.length>0){const e=i.map((e=>`${r}?width=${e} ${e}w`)).join(", ");o.setAttribute("srcset",e)}}scrollToMediaById(e){if(!this.container)return void console.warn(`[${this.sectionId}] ‚ö†Ô∏è Media container not found`);const t=this.container.querySelector(`[data-wwai-carousel-media-id="${e}"]`);if(!t)return void console.warn(`[${this.sectionId}] ‚ö†Ô∏è Slide with mediaId=${e} not found`);const o=t.getBoundingClientRect().left-this.container.getBoundingClientRect().left+this.container.scrollLeft;this.container.scrollTo({left:o,behavior:"smooth"})}maybeHydrateOrScroll(e=[],t){if(!this.hydrationDone)return console.log(`[${this.sectionId}] üíß Hydrating (scroll will be skipped)...`),void this.hydrateRemainingMedia(e);t?this.scrollToMediaById(t):console.log(`[${this.sectionId}] ‚ö†Ô∏è No media ID provided for scroll`)}}function Se(e,t){const o=document.querySelector(`product-variant-selector[section_id="${e}"][product_group="${t}"]`);return o||(console.error(`WWAI-ERROR ‚ùå No <product-variant-selector> found for section: ${e}, group: ${t}`),null)}function Pe(e,t,o){const{config:n,variant_config:i,product_object:r,variant_object:s}=be(t,o,e.productLabel,e.variantOptions);if(!s||!r)return console.error("WWAI-ERROR ‚ùå Variant or Product Object not found during resolution."),null;const a=r.title||"Unknown Product",l=s.title||"One-time purchase";return[{id:s.id,quantity:1,_debug:{source:"manual",variantId:s.id,quantity:1,sellingPlan:null,bundlePayload:!1,readableString:`${a} - ${l} (Qty: 1)`}}]}function $e(e,t,o,n,i=!1){if(!e||"string"!=typeof e)return void console.error("WWAI-ERROR ‚ùå Invalid path specified for redirect.");const{isValid:r,errors:s,config:a}=E(t);r?(m(o,n,a.loader),v(o,n),function(e,t=!1,o=!1){e&&"string"==typeof e?!0!==o?t?window.open(e,"_blank"):window.location.href=e:_(`You'll be redirected to: ${e}`,3e3):console.error("WWAI-ERROR ‚ùå Invalid path specified for redirect.")}(e,!1,i),i&&(console.log("üîÑ Removing loading overlay:",o,n,a.loader),setTimeout((()=>{b(o,n,a.loader)}),1e3))):console.error("WWAI-ERROR ‚ùå Invalid flowConfig:",s)}function De(e,t,o,n){const{config:i,variant_config:r,product_object:s,variant_object:a}=be(t,o,e.productLabel,e.variantOptions),{optionMapping:l,reversedMapping:c}=function(e,t){if(!e||!t)return console.error("WWAI-ERROR ‚ùå Product or Variant object is missing."),null;const o=e.options,n={option1:t.option1,option2:t.option2,option3:t.option3},i={},r={};return o.forEach(((e,t)=>{const o=n[`option${t+1}`];o&&(i[e]=o,r[o]=e)})),{optionMapping:i,reversedMapping:r}}(s,a);return a&&s?function(e,t,o,n){if(!e||!t||!o)return console.error("WWAI-ERROR ‚ùå One or more required objects are missing."),null;if(1!=n.length)return console.error("WWAI-ERROR ‚ùå Expected labelKeyToKeepList to have length 1."),null;const i=e.handle,r=t.id,s=n[0];if(!i||!r)return console.error("WWAI-ERROR ‚ùå Product handle or variant ID is missing."),null;let a=`/products/${i}?variant=${r}`;return Object.entries(o).forEach((([e,t])=>{if(t.replace(/\s+/g,"-").toLowerCase().includes(s.toLowerCase())){const t=e;a+=`&${s.toLowerCase()}=${t}`}})),a}(s,a,c,n):(console.error("WWAI-ERROR ‚ùå Variant or Product Object not found during resolution."),null)}function Ue(e,t,o){console.log("üü© [Direct Add Handler]"),console.log("Section ID:",e),console.log("Product Group:",t),function(e,t,o){const n=Pe(Se(e,t).getSelectedVariant(),e,t);console.log(`üåê Triggering add to cart for Section ID: ${e} and Product Group: ${t}`);const i=window.SECTION_DATA?.all_sections?.storeData?.deployMode;I(n,o,e,t,"local"===i,null)}(e,t,o)}function xe(e,t,o){console.log("üîÅ [Redirect Handler]"),console.log("Section ID:",e),console.log("Product Group:",t),function(e,t,o){const n=`/products/${Se(e,t).getSelectedVariant().productLabel}`;console.log("üõ†Ô∏è Redirecting to url:",n);const i=window.SECTION_DATA?.all_sections?.storeData?.deployMode;$e(n,o,e,t,"local"===i)}(e,t,o)}function Ne(e,t,o,n,i){console.log("üü¶ [Overlay Handler]"),console.log("Section ID:",e),console.log("Product Group:",t),console.log("Post-Selection Action:",n,i);const r=function(e,t){const o=document.querySelector(`product-custom-collection-options-overlay-selector[section_id="${e}"][product_group="${t}"]`);return o||(console.error(`WWAI-ERROR ‚ùå No <product-custom-collection-options-overlay-selector> found for section: ${e}, group: ${t}`),null)}(e,t);if(!r)throw console.error(`WWAI-ERROR ‚ùå Cannot open overlay ‚Äî no matching element found for sectionId=${e}, productGroup=${t}`),new Error("Overlay not found. Cannot proceed with interaction.");console.log("‚úÖ Found overlay, opening now..."),r.openOverlay();let s=null;if("redirect"===n){console.log("‚è≠ Will redirect after selection.");s=function(e,t,o,n){if(e&&t)return console.log(`üåê Triggering redirect for Section ID: ${e} and Product Group: ${t}`),i=>{if(!i)return console.error("WWAI-ERROR ‚ùå Selected variant is not provided."),null;const r=De(i,e,t,n);console.log("üõ†Ô∏è Redirecting to url:",r);const s=window.SECTION_DATA?.all_sections?.storeData?.deployMode;$e(r,o,e,t,"local"===s)};console.error("WWAI-ERROR ‚ùå Missing sectionId or productGroup.")}(e,t,o,i.redirect_variant_options)}else"add-to-cart"===n?(console.log("‚úÖ Add to cart after selection."),s=function(e,t,o){if(e&&t)return n=>{if(!n)return console.error("WWAI-ERROR ‚ùå Selected variant is not provided."),null;const i=Pe(n,e,t);console.log(`üåê Triggering add to cart for Section ID: ${e} and Product Group: ${t}`);const r=window.SECTION_DATA?.all_sections?.storeData?.deployMode;I(i,o,e,t,"local"===r,null)};console.error("WWAI-ERROR ‚ùå Missing sectionId or productGroup.")}(e,t,o)):"na"===n?console.log("‚úÖ No post-selection action required."):console.warn("‚ö†Ô∏è Unknown postSelectionAction:",n);if(s){window.__WWAI_HANDLER_REGISTRY=window.__WWAI_HANDLER_REGISTRY||{};const o=`${e}_${t}_variantChange`;if(!window.__WWAI_HANDLER_REGISTRY[o]){const n=Se(e,t);n?(n.registerHandler("variantChange",s),window.__WWAI_HANDLER_REGISTRY[o]=!0,console.log(`üîÅ Registered variantChange handler for key: ${o}`)):console.warn(`‚ö†Ô∏è Cannot register handler ‚Äî variant selector not found for sectionId=${e}, productGroup=${t}`)}}}function Le(e,t,o,n){if(!e)return;if(t)return e.disabled=!1,e.removeAttribute("data-tooltip"),void e.classList.remove("wwai-out-of-stock");const i=n?.preAddToCartFlowConfig?.journeyType;"direct-add"===i&&(!function(e,t="Out of stock"){const o=e.parentElement;if(o&&o.classList.contains("tooltip-wrapper"))return void o.setAttribute("data-tooltip",t);const n=document.createElement("div");n.classList.add("tooltip-wrapper"),n.setAttribute("data-tooltip",t),o.replaceChild(n,e),n.appendChild(e)}(e,o),e.disabled=!0,e.classList.add("wwai-out-of-stock"))}customElements.define(o.PRODUCT_GROUP.PRODUCT_MEDIA_GALLERY_FOR_GRIDS,Te);class Ge extends t{constructor(){super(),this.button=null,this.flowConfig=null,this.uxConfig=null,this.isAvailable=!0}handleSmartIntentClick(){if(!this.uxConfig||!this.uxConfig.preAddToCartFlowConfig)return void console.warn("‚ùå Missing preAddToCartFlowConfig in uxConfig inside ProductGridSmartInteractionButtonSelector");if(!this.flowConfig)return void console.warn("‚ùå Missing flowConfig inside ProductGridSmartInteractionButtonSelector");const e=this.uxConfig.preAddToCartFlowConfig,t=e.journeyType,o=e.postSelectionAction,n=e?.postSelectionActionParams||{};switch(t){case"direct-add":Ue(this.sectionId,this.productGroup,this.flowConfig);break;case"redirect":xe(this.sectionId,this.productGroup,this.flowConfig);break;case"overlay":Ne(this.sectionId,this.productGroup,this.flowConfig,o,n);break;default:console.warn(`‚ùå Unknown journeyType "${t}" for product ${productId}`)}}connectedCallback(){!function(){if(document.getElementById("wwai-smart-button-styles"))return;const e=document.createElement("style");e.id="wwai-smart-button-styles",e.textContent="\n        product-grid-smart-interaction-button-selector button.wwai-out-of-stock {\n        opacity: 0.5;\n        cursor: not-allowed;\n        pointer-events: none;\n        }\n\n        product-grid-smart-interaction-button-selector .tooltip-wrapper {\n        position: relative;\n        display: inline-block;\n        }\n\n        product-grid-smart-interaction-button-selector .tooltip-wrapper::after {\n        content: attr(data-tooltip);\n        position: absolute;\n        top: -30px;\n        left: 0;\n        background-color: #333;\n        color: #fff;\n        font-size: 12px;\n        padding: 4px 8px;\n        border-radius: 4px;\n        white-space: nowrap;\n        display: none;\n        z-index: 1000;\n        }\n\n        product-grid-smart-interaction-button-selector .tooltip-wrapper:hover::after {\n        display: block;\n        }\n    ",document.head.appendChild(e)}(),this.button=this.querySelector("button"),this.button?this.button.addEventListener("click",(e=>{console.log("product-grid-smart-interaction-button-selector clicked."),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.handleSmartIntentClick()})):console.error("WWAI-ERROR ‚ùå No button found inside <product-grid-icon-smart-add-to-cart-button-selector>")}initUXConfig(e){super.initUXConfig(e),this.updateAvailabilityView()}updateAvailability(e,t="Out of stock"){this.isAvailable=e,this.tooltipText=t,this.updateAvailabilityView()}updateAvailabilityView(){Le(this.button,this.isAvailable,this.tooltipText,this.uxConfig)}}customElements.define(o.PRODUCT_GROUP.GRID_SMART_INTERACTION,Ge);class Me extends t{constructor(){super(),this.overlayBody=null,this.closeButton=null}connectedCallback(){this.overlayBody=this.querySelector("[data-wwai-collection-options-overlay-visible]"),this.overlayBody?(this.closeButton=this.querySelector("[data-wwai-collection-options-overlay-close-btn]"),this.closeButton&&this.closeButton.addEventListener("click",(()=>{this.closeOverlay()}))):console.error("WWAI-ERROR ‚ùå No overlay body found with [data-wwai-collection-options-overlay-visible]")}openOverlay(){this.setContainerVisibility(!0)}closeOverlay(){this.setContainerVisibility(!1)}setContainerVisibility(e=!0){if(!this.overlayBody)return;e?this.overlayBody.classList.add("active"):this.overlayBody.classList.remove("active");document.querySelectorAll("product-custom-collection-options-overlay-selector").forEach((e=>{if(e!==this){const t=e.querySelector("[data-wwai-collection-options-overlay-visible]");t&&t.classList.remove("active")}}))}}customElements.define(o.PRODUCT_GROUP.COLLECTION_OPTIONS_OVERLAY,Me);class We extends HTMLElement{constructor(){super(),this.sectionId=this.getAttribute("section_id"),this.expectedCards=parseInt(this.getAttribute("data-expected-cards"))||0,this.equalizationReady=!1,this.expectedRoles=this.discoverRoles()}connectedCallback(){console.log(`HEIGHT_EQUALIZER: [${this.sectionId}] ‚úÖ connectedCallback triggered`),this.checkIfCardsAreReady("init"),this.initMutationObserver(),this.initIntersectionObserver(),this.initResizeListeners(),this.initResizeObserver(),this.initCleanupHandler()}checkIfCardsAreReady(e="manual"){const t=this.querySelectorAll("[data-wwai-container-card]"),o=Array.from(t).filter((e=>{const t=e.querySelectorAll("[data-wwai-container-card-role]");return!(t.length<this.expectedRoles.length)&&Array.from(t).some((e=>""!==e.innerHTML.trim()))}));console.log(`HEIGHT_EQUALIZER: [${this.sectionId}] üïµÔ∏è ${e} check: found ${t.length} cards, ${o.length} with roles, expecting ${this.expectedCards}`),t.length>=this.expectedCards&&o.length>=this.expectedCards&&this.expectedCards>0?(console.log(`HEIGHT_EQUALIZER: [${this.sectionId}] üü¢ Cards ready, triggering equalize via: ${e}`),this.equalizationReady=!0,this.equalize(e),this.mutationObserver&&this.mutationObserver.disconnect()):console.log(`HEIGHT_EQUALIZER: [${this.sectionId}] ‚è≥ Waiting for cards... (${e})`)}initMutationObserver(){console.log(`HEIGHT_EQUALIZER: [${this.sectionId}] üß¨ initMutationObserver set up`),this.mutationObserver=new MutationObserver((()=>{console.log(`HEIGHT_EQUALIZER: [${this.sectionId}] ‚úÖ mutationObserver triggered`),this.checkIfCardsAreReady("mutation-observer")})),this.mutationObserver.observe(this,{childList:!0,subtree:!0})}initIntersectionObserver(){this.intersectionObserver=new IntersectionObserver((e=>{console.log(`HEIGHT_EQUALIZER: [${this.sectionId}] ‚úÖ intersectionObserver triggered`),e.some((e=>e.isIntersecting))&&this.equalizationReady&&(console.info(`[${this.sectionId}] üì° Section entered viewport, re-running equalize`),this.equalize("intersection"))}),{threshold:.1}),this.intersectionObserver.observe(this)}initResizeListeners(){window.addEventListener("resize",(()=>{console.log(`HEIGHT_EQUALIZER: [${this.sectionId}] ‚úÖ resizeListener triggered`),this.equalizationReady&&this.debouncedEqualize("resize")})),window.addEventListener("orientationchange",(()=>{console.log(`HEIGHT_EQUALIZER: [${this.sectionId}] ‚úÖ orientationchangeListener triggered`),this.equalizationReady&&this.equalize("orientationchange")}))}initResizeObserver(){this.resizeObserver=new ResizeObserver((()=>{console.log(`HEIGHT_EQUALIZER: [${this.sectionId}] ‚úÖ resizeObserver triggered`),this.equalizationReady&&this.equalize("resize-observer")})),this.resizeObserver.observe(this)}initCleanupHandler(){this.disconnectedCallback=()=>{console.log(`HEIGHT_EQUALIZER: [${this.sectionId}] ‚úÖ disconnectedCallback triggered`),window.removeEventListener("resize",this.debouncedEqualize),window.removeEventListener("orientationchange",this.equalize),this.resizeObserver.disconnect(),this.mutationObserver.disconnect()}}debouncedEqualize(e="resize"){clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout((()=>this.equalize(e)),300)}getCards(){return this.querySelectorAll("[data-wwai-container-card]")}discoverRoles(){const e=this.querySelector("[data-wwai-container-card]");return e?Array.from(e.querySelectorAll("[data-wwai-container-card-role]")).map((e=>e.getAttribute("data-wwai-container-card-role"))).filter((e=>!!e)):[]}validateCards(e){this.getCards().forEach((t=>{e.forEach((e=>{t.querySelector(`[data-wwai-container-card-role="${e}"]`)||(window.heightEqualizeLogging&&console.log(`"[${this.sectionId}]"‚ùå Missing role "${e}" in card with label:`,t.dataset.wwaiContainerCardLabel),window.heightEqualizeLogging&&console.log(t))}))}))}generateEqualizedHeightMap(){const e=this.getCards(),t=this.discoverRoles(),o={},n=new Map;e.forEach((e=>{t.forEach((t=>{const o=e.querySelector(`[data-wwai-container-card-role="${t}"]`);if(o){const e=o.offsetHeight;n.set(o,e),o.style.minHeight=""}}))})),e.forEach((e=>{const t=Math.round(e.getBoundingClientRect().top);o[t]||(o[t]=[]),o[t].push(e)}));const i=Object.keys(o).map(Number).sort(((e,t)=>e-t)),r=[];return i.forEach(((e,i)=>{const s=o[e],a={};t.forEach((e=>{let t=0;s.forEach((o=>{const i=o.querySelector(`[data-wwai-container-card-role="${e}"]`);if(i){let o=i.offsetHeight;o<5&&n.has(i)&&(o=n.get(i),window.heightEqualizeLogging&&console.log(`[${this.sectionId}] ‚ö†Ô∏è Using fallback height for role "${e}" due to suspect value: ${o}px`)),o>5&&(t=Math.max(t,o+1))}})),a[e]=t})),r.push({rowIndex:i,heights:a})})),{section_id:this.sectionId,roles:t,rowCount:r.length,rows:r}}fillMissingHeights(e){const t=e.roles;let o={};return e.rows.forEach((e=>{t.forEach((t=>{const n=e.heights[t];n&&0!==n?o[t]=e.heights[t]:e.heights[t]=o[t]||0}))})),e}applyHeightMap(e){const t=this.getCards(),o=e.roles;e=this.fillMissingHeights(e);const n={};t.forEach((e=>{const t=Math.round(e.getBoundingClientRect().top);n[t]||(n[t]=[]),n[t].push(e)}));const i=Object.keys(n).map(Number).sort(((e,t)=>e-t)).map((e=>n[e]));e.rows.forEach(((e,t)=>{const n=i[t];n&&o.forEach((t=>{const o=e.heights[t];n.forEach((e=>{const n=e.querySelector(`[data-wwai-container-card-role="${t}"]`);n&&(n.style.minHeight=`${o}px`)}))}))}))}equalize(e="unknown"){console.log(`HEIGHT_EQUALIZER: [${this.sectionId}] ‚úÖ equalize triggered with height map by: ${e}`),window.heightEqualizeLogging&&console.log(`[${this.sectionId}] ‚ö° Equalize triggered with height map by: ${e}`);const t=this.getCards(),o=this.discoverRoles();if(!t.length||!o.length)return;this.validateCards(o);const n=this.generateEqualizedHeightMap();this.applyHeightMap(n)}}function qe(){const e=document.querySelectorAll("product-variant-selector"),t={},o=[];return e.forEach((e=>{const n=e.getAttribute("section_id"),i=function(e){const t=e.getAttribute("product_group"),o=e.getAttribute("product-helper-handle");if(!t||!o)return console.warn("[getProductMappingJSON] Missing product_group or product-helper-handle."),null;const n=e.querySelectorAll(`input[type="radio"][${X}="${ee}"]`),i={};return n.forEach((e=>{const t=e.getAttribute(Q);t&&(i[t]=`${o}`)})),{product_group:t,products:i}}(e);if(!n||!i)return;t[n]||(t[n]={},o.includes(n)||o.push(n));const r=i.product_group;t[n][r]=i.products})),{mapping:t,sectionOrder:o}}function ke(e=!1){const{mapping:t,sectionOrder:o}=qe(),n={},i=new Map,r={},s={};let a=0;return o.forEach((o=>{const l=t[o];Object.entries(l).forEach((([t,l])=>{const c=function(e){return JSON.stringify(e,Object.keys(e).sort())}(l);if(function(e,t,o,n){if(e.has(t))return e.get(t)!==o&&console.warn(`‚ö†Ô∏è Conflict: Product group "${t}" has different mappings in section "${n}".`),!0;return!1}(i,t,c,o))return;i.set(t,c),n[t]=l;const{wasAddedToLiquid:u,newTotal:d}=function({productGroup:e,mapping:t,renderWithLiquid:o,totalHandles:n,liquid_loaded:i}){const r=Object.keys(t).length;return o&&n<20&&n+r<=20?(i[e]=t,{wasAddedToLiquid:!0,newTotal:n+r}):{wasAddedToLiquid:!1,newTotal:n}}({productGroup:t,mapping:l,renderWithLiquid:e,totalHandles:a,liquid_loaded:r});a=d,u||(s[t]=l)}))})),{merged:n,liquid_loaded:r,js_loaded:s}}function je(e){return e&&"object"==typeof e&&!Array.isArray(e)&&0===Object.keys(e).length}customElements.define(o.OTHER.PRODUCT_GRID_HEIGHT_EQUALIZER,We),window.generateAllEqualizedHeightMapsForDevice=function(){const e=document.querySelectorAll("product-grid-height-equalizer-selector"),t={};e.forEach((e=>{if("function"==typeof e.generateEqualizedHeightMap){const o=e.generateEqualizedHeightMap(),n=o.section_id||"",i=n.split("__")[1]||n;t[i]={...o,section_id:i}}}));const o=window.innerWidth<768,n=o?"CACHED_HEIGHTS_MOBILE":"CACHED_HEIGHTS_DESKTOP";window[n]=t;const i=`<script>\nwindow.${n} = ${JSON.stringify(t,null,2)};\n<\/script>`;return console.log(`‚úÖ Cached height mappings generated for ${o?"mobile":"desktop"}.\nCopy-paste this into your config:`),console.log(i),t},window.applyCachedHeightsOnLoad=function(){const e=window.innerWidth<768,t=e?window.CACHED_HEIGHTS_MOBILE:window.CACHED_HEIGHTS_DESKTOP;if(!t)return void console.warn(`[Equalizer] No cached heights found for ${e?"mobile":"desktop"}. Skipping initial height application.`);document.querySelectorAll("product-grid-height-equalizer-selector").forEach((e=>{const o=e.sectionId,n=o.includes("__")?o.split("__")[1]:o.split("--")[1]||o,i=t[n];i&&"function"==typeof e.applyHeightMap&&(e.applyHeightMap(i),window.heightEqualizeLogging&&console.log(`[${n}] üöÄ Applied cached height map from config.`))}))};const Be={mock:async e=>(console.log(`[MOCK] Simulated fetch for: /products/${e}.js`),{handle:e,title:`Mock Product for ${e}`,variants:[{id:`${e}-variant-1`,title:"Default Variant",available:!0}],selling_plan_groups:[],images:[],description:"Mock product.",vendor:"MockVendor",product_type:"MockType"}),shopify:async e=>{console.log(`[SHOPIFY API] /products/${e}.js`);try{const t=await fetch(`/products/${e}.js`);return t.ok?await t.json():(console.error(`WWAI-ERROR ‚ùå Fetch failed for /products/${e}.js ‚Äî HTTP ${t.status}`),null)}catch(t){return console.error(`WWAI-ERROR ‚ùå Error fetching ${e}:`,t),null}}};function He(e){let t=0,o=0;return Object.entries(e.productGroups||{}).forEach((([e,n])=>{t++,o+=Object.keys(n).length})),{groupCount:t,totalLabels:o}}function Fe(e,t){const o=function(e){return"object"==typeof window.JS_PRODUCT_MAPPING_OBJECT&&null!==window.JS_PRODUCT_MAPPING_OBJECT&&Object.keys(window.JS_PRODUCT_MAPPING_OBJECT).length>0?(console.log("Using preloaded window.JS_PRODUCT_MAPPING_OBJECT to hydrate via JS."),console.log(JSON.stringify(window.JS_PRODUCT_MAPPING_OBJECT,null,2)),window.JS_PRODUCT_MAPPING_OBJECT):"object"==typeof jsObj&&null!==jsObj&&0===Object.keys(jsObj).length?(e&&(console.warn("‚ö†Ô∏è window.JS_PRODUCT_MAPPING_OBJECT is defined but empty."),console.warn("üí° This likely means your JS assignment didn‚Äôt populate product mappings correctly.")),{}):(console.error("WWAI-ERROR [ERROR]: window.JS_PRODUCT_MAPPING_OBJECT is undefined"),{})}(t);if(0==Object.keys(o).length)return;const n=function({createIfMissing:e=!1}={}){if(!window.SECTION_DATA){if(!e)throw new Error("window.SECTION_DATA not found.");window.SECTION_DATA={}}if(!window.SECTION_DATA.all_sections){if(!e)throw new Error("window.SECTION_DATA['all_sections'] not found.");window.SECTION_DATA.all_sections={}}if(!window.SECTION_DATA.all_sections.storeData){if(!e)throw new Error("SECTION_DATA.storeData not initialized. Make sure Liquid block ran before this.");window.SECTION_DATA.all_sections.storeData={productGroups:{},variantSellingPlans:{},variantSubscriptionMapping:{}}}return window.SECTION_DATA.all_sections.storeData}({createIfMissing:"mock"==e}),i=He(n),{toFetch:r,grouped:s}=function(e,t){const o=new Set,n={};return Object.entries(e).forEach((([e,i])=>{t.productGroups[e]=t.productGroups[e]||{},n[e]=[],Object.entries(i).forEach((([i,r])=>{t.productGroups[e][i]?console.info(`Skipping already loaded: [${e}] ${i} (${r})`):(n[e].push({label:i,handle:r}),o.add(r))}))})),{toFetch:o,grouped:n}}(o,n);return function(e,t="mock"){const o=Be[t];if(!o)throw new Error(`‚ùå Unknown connector type: "${t}"`);return Promise.all(e.map((e=>o(e))))}([...r],e).then((e=>{const t=function(e){const t={};return e.forEach((e=>{e&&(t[e.handle]=e)})),t}(e);!function({grouped:e,handleToProduct:t,storeData:o}){window._WWAI_PRODUCT_AVAILABILITY=window._WWAI_PRODUCT_AVAILABILITY||{},Object.entries(e).forEach((([e,n])=>{n.forEach((({label:n,handle:i})=>{const r=t[i],s=`${e}__${n}`;r?(o.productGroups[e][n]=r,o.variantSellingPlans[s]={variants:r.variants||[],selling_plan_groups:r.selling_plan_groups||[]},o.variantSubscriptionMapping=o.variantSubscriptionMapping||{},o.variantSubscriptionMapping[s]={},window._WWAI_PRODUCT_AVAILABILITY[i]=!0,console.log(`‚úÖ Loaded: ${i}`)):(window._WWAI_PRODUCT_AVAILABILITY[i]=!1,console.warn(`‚ö†Ô∏è Failed to fetch: ${i}`))}))}))}({grouped:s,handleToProduct:t,storeData:n});const o=He(n),r=o.totalLabels-i.totalLabels;console.log(`Hydrated ${r} new product label(s) across ${o.groupCount} group(s).`)}))}function ze(e=!0){if(Array.isArray(window.LIQUID_PRODUCT_MAPPING_ARRAY)&&window.LIQUID_PRODUCT_MAPPING_ARRAY.length>0)return console.log("‚ö° Using preloaded window.LIQUID_PRODUCT_MAPPING_ARRAY to init product availability."),t=window.LIQUID_PRODUCT_MAPPING_ARRAY,window._WWAI_PRODUCT_AVAILABILITY=window._WWAI_PRODUCT_AVAILABILITY||{},void t.forEach((e=>{const t=e.split(":").map((e=>e.trim()))[2];t&&(window._WWAI_PRODUCT_AVAILABILITY[t]=!0)}));var t;Array.isArray(window.LIQUID_PRODUCT_MAPPING_ARRAY)&&0===window.LIQUID_PRODUCT_MAPPING_ARRAY.length?e&&(console.warn("‚ö†Ô∏è Detected has_static_loaded_products is set but window.LIQUID_PRODUCT_MAPPING_ARRAY is defined and empty."),console.warn("üí° This likely means your Liquid block did not assign `product_mapping_array` correctly.")):console.log("[ERROR]: window.LIQUID_PRODUCT_MAPPING_ARRAY undefined")}function Ve(e){return 1===e.length&&1===e[0].length&&"Default Title"===e[0][0]}function Ye(e,t){return Array.isArray(e)&&1===e.length&&t&&1===Object.keys(t).length&&Array.isArray(t.option1)&&1===t.option1.length&&"__wwai_first__"===t.option1[0]}function Je(e){const t=e.querySelectorAll('input[type="radio"]'),o=[];if(0===t.length)return{isValid:!1,messages:["‚ùå No variant input elements (radio buttons) found in selector."]};t.forEach((e=>{const t=function(e){const t=[],o=e.getAttribute(X),n=e.getAttribute(Q),i=e.getAttribute(Z);return"product"!==o&&"product_variant"!==o&&t.push(`Invalid type: "${o}". Expected "product" or "product_variant".`),n||t.push(`Missing required attribute: ${Q}.`),"product_variant"!==o||i||t.push(`Missing ${Z} for product_variant input.`),{valid:0===t.length,issues:t}}(e);t.valid||o.push({input:e,debug:Xe(e),issues:t.issues})}));const n=o.flatMap((({debug:e,issues:t})=>t.map((t=>`${e} : ${t}`))));return{isValid:0===o.length,messages:n}}function Xe(e){return`type="${e.getAttribute(X)||"(no type)"}", product="${e.getAttribute(Q)||"(no product)"}", variant="${e.getAttribute(Z)||"(no variant)"}"`}function Qe(e,t=!1){const o=Je(e),{inconsistencies:n,messages:i}=function(e){e.getAttribute("section_id");const t=e.querySelectorAll('input[type="radio"]'),o={};t.forEach((e=>{const t=e.getAttribute("name"),n=e.getAttribute(X);t&&n&&(o[t]=o[t]||new Set,o[t].add(n))}));const n=[],i=[];return Object.entries(o).forEach((([e,o])=>{if(o.size>1){const r=`Inconsistent option types in radio group: "${e}" (found types: ${Array.from(o).join(", ")}).`;i.push(r);const s=Array.from(t).filter((t=>t.getAttribute("name")===e));n.push({groupName:e,types:Array.from(o),inputs:s,message:r})}})),{inconsistencies:n,messages:i}}(e),{conflicts:r,messages:s}=function(e){const t=e.getAttribute("section_id")||"(unknown)",o=e.querySelectorAll('input[type="radio"]'),n=[],i=[];return o.forEach((o=>{const r=o.getAttribute("name");r&&document.querySelectorAll(`input[type="radio"][name="${r}"]`).forEach((s=>{if(!e.contains(s)){const e=`Conflict: radio group name "${r}" is used both inside (seciton id="${t}") and outside of this selector too.`;n.push({name:r,input:o,conflictingElement:s,message:e}),i.push(e)}}))})),{conflicts:n,messages:i}}(e),a=[...o.messages,...i];let l=!o.isValid,c=i.length>0;a.push(...s),r.length>0&&(l=!0);const u=l?"error":c?"warning":"valid";return t&&console.log("messages:",a),{status:u,messages:a}}function Ze(e){const t=ie(e);if(!e?.productGroup)return void console.warn("[WWAI] ‚ö†Ô∏è Product group not found for selector element.");const o=function(e,t){const o=[];for(const n of t.productLabels){const i=le(e,n);if(!i||!i.variants||0===i.variants.length){o.push(`Product "${n}" has no variants in product data.`);continue}const r=i.variants.map((e=>[e.option1,e.option2,e.option3].filter(Boolean).map((e=>e.trim()))));if(Ve(r)){console.warn(`Skipping exhaustive check for product "${n}" ‚Äî single default variant.`);continue}const s=t.variants[n];if(!s||0===Object.keys(s).length){o.push(`Product "${n}" has no variant options defined in html hierarchy.`);continue}const a=s.option1||[],l=s.option2||[null],c=s.option3||[null];for(const e of a)for(const t of l)for(const i of c){const a=[e,t,i].filter(Boolean).map((e=>e.trim()));r.some((e=>a.length===e.length&&a.every(((t,o)=>t===e[o]))))||(Ye(r,s)?console.warn("WWAI-WARN: Single variant option with special label __wwai_first__ detected. Skipping mismatch push."):o.push(`Variant [${a.join(", ")}] missing for product "${n}" in product data.`))}}return o}(e.productGroup,t);console.log("mismatches:",o);let n=[];try{const t=e.getAttribute("debug_message");n=t?JSON.parse(t):[]}catch(e){n=[]}const i=(o||[]).map((e=>`Product Connect Error: ${e}`)),r=[...n,...i];e.setAttribute("debug_message",JSON.stringify(r))}window._storeDataApiInitialized=window._storeDataApiInitialized||!1;const Ke={"product-purchase-type-selector":40,"product-subscription-frequency-selector":30,"product-variant-custom-labeled-text":20,"product-custom-price-selector":10,"product-custom-submit-interceptor":10};function et(e){const t=e.dataset.debugId;if(!t)return;const o=document.querySelector(`[data-debug-for="${t}"]`);o&&o.remove()}function tt(e,t="green"){const o=e.tagName.toLowerCase(),n=Ke[o]||0;if(document.querySelector(`[data-debug-for="${e.dataset.debugId}"]`))return;const i=function(e,t=32){const o=e.tagName.toLowerCase(),n=Ke[o]||t,i=Array.from(e.querySelectorAll("*")).filter((e=>null!==e.offsetParent));if(0===i.length)return null;let r=1/0,s=1/0,a=-1/0,l=-1/0;if(i.forEach((e=>{const t=e.getBoundingClientRect();0!==t.width&&0!==t.height&&(r=Math.min(r,t.top),s=Math.min(s,t.left),a=Math.max(a,t.bottom),l=Math.max(l,t.right))})),r===1/0)return null;const c=window.scrollY,u=window.scrollX,d=document.documentElement.clientWidth,p=Math.max(0,s+u-n);return{top:Math.max(0,r+c-n),left:p,width:Math.min(d,l+u+n)-p,height:a-r+2*n}}(e);if(!i)return;const r=e.dataset.debugId||`${o}-debug-${Date.now()}`;e.dataset.debugId=r;const s=document.createElement("div");s.setAttribute("data-debug-for",r),s.style.position="absolute",s.style.left=`${i.left}px`,s.style.top=`${i.top+n}px`,s.style.width=`${i.width}px`,s.style.height=`${i.height}px`,s.style.border="2px dashed "+t,s.style.zIndex=9998,s.style.pointerEvents="none";const a=document.createElement("div");a.style.position="absolute",a.style.top="4px",a.style.right="4px",a.style.width="12px",a.style.height="12px",a.style.borderRadius="50%",a.style.zIndex="10001",a.style.cursor="pointer",a.style.pointerEvents="auto";const l=e.getAttribute("debug_status")||"none";a.style.background={valid:"limegreen",warning:"orange",error:"red"}[l]||"gray";const c=document.createElement("div");c.style.position="absolute",c.style.padding="10px 14px",c.style.background="#2c2c2c",c.style.color="#fff",c.style.fontSize="13px",c.style.borderRadius="6px",c.style.zIndex="10002",c.style.display="none",c.style.width="360px",c.style.boxShadow="0 4px 12px rgba(0,0,0,0.25)",c.style.lineHeight="1.5",c.style.whiteSpace="normal",c.style.wordBreak="break-word",c.style.overflowWrap="break-word",c.style.border="1px solid #444";const u=document.createElement("div");u.textContent=`<${o}>`,u.style.fontWeight="bold",u.style.fontSize="14px",u.style.marginBottom="8px",c.appendChild(u);const d=document.createElement("ul");d.style.margin=0,d.style.paddingLeft="18px",d.style.listStyle="disc",c.appendChild(d),a.addEventListener("mouseenter",(()=>{const t=e.getAttribute("debug_message")||"[]";let o=[];try{o=JSON.parse(t)}catch(e){o=[t]}Array.isArray(o)&&0!==o.length||(o=["valid"]),d.innerHTML="",o.forEach((e=>{const t=document.createElement("li");t.textContent=e,t.style.marginBottom="8px",t.style.paddingLeft="2px",d.appendChild(t)}));const{right:n}=a.getBoundingClientRect(),i=n+320>window.innerWidth;c.style.left=i?"-320px":"20px",c.style.top="0px",c.style.display="block"})),a.addEventListener("mouseleave",(()=>{c.style.display="none"})),a.appendChild(c),s.appendChild(a),document.body.appendChild(s)}const ot="[data-wwai-media-container]",nt="[data-wwai-media-slide]",it="data-wwai-carousel-media-id";function rt(){}function st(){}function at(){}function lt(e,{beforeCount:t,afterCount:o,discountCount:n},i){const r=[];let s=!1,a=!1;(t>1||o>1)&&(s=!0,r.push(`Label "${e}" has multiple elements: ${[t>1?`beforePrice (${t})`:null,o>1?`afterPrice (${o})`:null].filter(Boolean).join(", ")}`)),0===t&&0===o?(s=!0,r.push(`Label "${e}" is missing both beforePrice and afterPrice`)):0!==t&&0!==o||(a=!0,r.push(`Label "${e}" is missing: ${[0===t?"beforePrice":null,0===o?"afterPrice":null].filter(Boolean).join(", ")}`)),n>1&&(s=!0,r.push(`Label "${e}" has multiple discountPercentage elements (${n})`));const l=function(e,t){const o=[];let n=!1;const i=[{type:"before",el:u.BEFORE,wrapper:d},{type:"after",el:u.AFTER,wrapper:p},{type:"discount",el:u.DISCOUNT,wrapper:g}];for(const{type:r,el:s,wrapper:a}of i){const i=t.querySelector(`[${s}][${c}="${e}"]`);i&&!i.closest(`[${a}]`)&&(n=!0,o.push(`Label "${e}" has ${r} element not inside [${a}]`))}return{hasWarning:n,messages:o}}(e,i);return r.push(...l.messages),l.hasWarning&&(a=!0),{hasError:s,hasWarning:a,messages:r}}function ct(e,t="<product-custom-price-selector>"){const o=e.querySelectorAll(`[${c}], [${u.BEFORE}], [${u.AFTER}], [${u.DISCOUNT}]`),n=e.querySelectorAll(`[${c}]`),i=[],r=function(e,t="<product-custom-price-selector>"){const o=[];return e.forEach(((e,n)=>{const i=e.getAttribute(c)?.trim();if(!i){const i=e.outerHTML.split("\n")[0].trim().slice(0,100);o.push(`Element ${n} inside ${t} is missing required ${c}: ${i}...`)}})),o}(o,t),s=r.length>0;if(i.push(...r),!n.length)return i.push(`No price-labeled elements found inside ${t}`),{status:"none",messages:i};const a=function(e){const t={};return e.forEach((e=>{const o=e.getAttribute(c)?.trim();o&&(t[o]||(t[o]={beforeCount:0,afterCount:0,discountCount:0}),e.hasAttribute(u.BEFORE)&&(t[o].beforeCount+=1),e.hasAttribute(u.AFTER)&&(t[o].afterCount+=1),e.hasAttribute(u.DISCOUNT)&&(t[o].discountCount+=1))})),t}(n),{messages:l,status:d}=function(e,t){const o=[];let n=!1,i=!1;for(const[r,s]of Object.entries(e)){const e=lt(r,s,t);o.push(...e.messages),e.hasError&&(n=!0),e.hasWarning&&(i=!0)}return{status:n?"error":i?"warning":"valid",messages:o}}(a,e);i.push(...l);return{status:s?"error":d,messages:i}}function ut(e,t,o,n,i,r=!1){var s;!function(e,t){if(!document.getElementById("variantDevPopup")){const t=document.createElement("style");t.textContent="\n      #variantDevButton {\n        position: fixed;\n        top: 12px;\n        right: 12px;\n        z-index: 10000;\n        background: #111;\n        color: white;\n        padding: 8px 12px;\n        font-size: 13px;\n        border: 1px solid #666;\n        cursor: pointer;\n        border-radius: 4px;\n      }\n      #variantDevPopup {\n        position: fixed;\n        top: 60px;\n        right: 12px;\n        width: 600px;\n        max-height: 80vh;\n        overflow: auto;\n        background: #1e1e1e;\n        color: #eee;\n        padding: 16px;\n        z-index: 9999;\n        border: 1px solid #555;\n        font-family: monospace;\n        display: none;\n      }\n      #variantDevPopup pre {\n        white-space: pre-wrap;\n        background: #222;\n        padding: 12px;\n        overflow-x: auto;\n        margin: 12px 0 0;\n      }\n      #variantDevPopup .control-buttons {\n        display: flex;\n        gap: 8px;\n        margin-bottom: 12px;\n      }\n      #variantDevPopup button {\n        padding: 6px 12px;\n        background: #444;\n        color: white;\n        border: none;\n        cursor: pointer;\n      }\n      #variantDevPopup button.active {\n        background: #666;\n      }\n    ",document.head.appendChild(t);const o=document.createElement("button");o.id="variantDevButton",o.textContent="PDP Config",o.onclick=()=>{document.getElementById("variantDevPopup").style.display="block"},document.body.appendChild(o);const n=document.createElement("div");n.id="variantDevPopup";const i=document.createElement("div");i.className="control-buttons";const r=document.createElement("pre");r.id="variantDevOutputBlock";const s=document.createElement("button");s.textContent="Copy",s.onclick=()=>{navigator.clipboard.writeText(r.textContent),s.textContent="Copied!",setTimeout((()=>s.textContent="Copy"),1500)};const a=document.createElement("button");a.textContent="Close",a.onclick=()=>n.style.display="none";const l={};["Data Connection","Product Group Config","Variant Overrides","Image Object"].forEach((t=>{const o=document.createElement("button");o.textContent=t,o.onclick=()=>{Object.values(l).forEach((e=>e.classList.remove("active"))),o.classList.add("active"),r.textContent=e[t]},i.appendChild(o),l[t]=o})),n.appendChild(i),n.appendChild(s),n.appendChild(a),n.appendChild(r),document.body.appendChild(n)}setTimeout((()=>{document.getElementById("variantDevOutputBlock");const e=document.querySelector("#variantDevPopup .control-buttons button");e&&e.click(),t&&(document.getElementById("variantDevPopup").style.display="block")}),0)}({"Data Connection":`${s=e,`{%- assign product_mapping_str = "\n${Object.entries(s).flatMap((([e,t])=>Object.entries(t).map((([t,o])=>`  ${e}:${t}:${o}`)))).join(",\n")}\n" -%}`}\n\n${`\n<script>\nwindow.JS_PRODUCT_MAPPING_OBJECT = ${JSON.stringify(t,null,2)};\n<\/script>`}`,"Product Group Config":`\n<script>\nwindow.WWAI_PRODUCT_GROUP_CONFIG = ${JSON.stringify(o,null,2)};\n<\/script>`,"Variant Overrides":`\n<script>\nwindow.WWAI_PRODUCT_VARIANT_OVERRIDES = ${JSON.stringify(n,null,2)};\n<\/script>`,"Image Object":`\n<script>\nwindow.WWAI_LABELED_IMAGES = ${JSON.stringify(i,null,2)};\n<\/script>\n`},r)}function dt(e){const{merged:t,liquid_loaded:o,js_loaded:n}=ke(e);ut(o,n,function(){const e=document.querySelectorAll("product-variant-selector"),t={},o={pricingConfig:{discountPercent:0,subscriptionDiscountPercent:0,defaultSubscriptionOption:null,discountCodeToApply:[],roundDiscount:!0,addOffSuffixToDiscount:!1},uxConfig:{variantOptionRemovePrefix:"Every",defaultPurchaseType:"subscription",variantUXConfig:{hideSingleLengthVariants:!1,onlyShowVariantsWithLabelContains:null,refreshUxOnVariantChange:!0},preAddToCartFlowConfig:{journeyType:"direct-add",overlayContents:[],postSelectionAction:"add-to-cart",postSelectionActionParams:{}}},flowConfig:{destination:"cart",loader:"add-to-cart-submit-button",showSuccessNotification:!1,showErrorNotification:!1,sideCartLabel:"",successNotificationMessage:"‚úÖ Added to cart!",errorNotificationMessage:"Oops, couldn't add item.",notificationOptions:{backgroundColor:"#E8DDFA",textColor:"#000000",borderColor:"transparent",fontFamily:"sans-serif"}}};return e.forEach((e=>{const n=e.productGroup,i=e.sectionId;let r=i;i.includes("__")?r=i.split("__")[1]:i.includes("--")&&(r=i.split("--")[1]);const s=ie(e),a=s.productLabels?.[0]?.trim()||null,l=s.variants?.[a]||{},c={option1:new Set,option2:new Set,option3:new Set};for(const e of s.productLabels||[]){const t=s.variants?.[e]||{};["option1","option2","option3"].forEach((e=>{(t[e]||[]).forEach((t=>c[e].add(t.trim())))}))}const u=e=>[...e].join(" | ")||"",d={defaultProduct:a,defaultVariantOption1:l.option1?.[0]?.trim()||null,defaultVariantOption2:l.option2?.[0]?.trim()||null,defaultVariantOption3:l.option3?.[0]?.trim()||null,allProducts:(s.productLabels||[]).map((e=>e.trim())).join(" | "),allOptions:{option1:u(c.option1),option2:u(c.option2),option3:u(c.option3)}};t[r]=t[r]||{defaults:JSON.parse(JSON.stringify(o))},t[r][n]={pricingConfig:null,uxConfig:null,flowConfig:null,variantDispatchConfig:d}})),t}(),function(){const e=document.querySelectorAll("product-variant-selector"),t=document.querySelectorAll("product-variant-custom-labeled-text-selector"),o={};return e.forEach((e=>{const n=e.getAttribute("product_group"),i=e.sectionId;let r=i;i.includes("__")?r=i.split("__")[1]:i.includes("--")&&(r=i.split("--")[1]);const s=ie(e);o[r]||(o[r]={}),o[r][n]||(o[r][n]={}),s.productLabels.forEach((e=>{const i=s.variants[e]||{};o[r][n][e]||(o[r][n][e]={});const a=[];(i.option1||[]).forEach((e=>{const t=i.option2?.length?i.option2:[""],o=i.option3?.length?i.option3:[""];t.forEach((t=>{o.forEach((o=>{const n=[e,t,o].filter(Boolean).map((e=>e.trim())).join(" | ");a.push(n)}))}))}));const l={},c=Array.from(t).find((e=>{let t=e.getAttribute("section_id")||"";return t.includes("__")?t=t.split("__")[1]:t.includes("--")&&(t=t.split("--")[1]),t===r&&e.getAttribute("product_group")===n}));c&&c.querySelectorAll(Y).forEach((e=>{const t=e.getAttribute(V),o=e.textContent.trim();t&&(l[t]=o)})),a.forEach((t=>{o[r][n][e][t]={customMediaLabel:null,redirectToMediaIndex:null,customLabelText:{...l}}}))}))})),o}(),function(){const e=document.querySelectorAll("product-custom-carousel-media-selector"),t={};return e.forEach((e=>{const o=e.getAttribute("section_id")||"",n=e.getAttribute("product_group")||"",i=`${o}__${n}`,r=e.querySelectorAll("main-slider-slide"),s=[];r.forEach(((e,t)=>{const i=e.querySelector("img"),r=e.id||e.getAttribute("id");if(i&&i.src){let e;try{const t=new URL(i.src,window.location.origin);t.searchParams.delete("v"),e=t.toString()}catch{e=i.src}const a=i.src.match(/[?&]width=(\d+)/),l=a?parseInt(a[1],10):i.width||0,c=i.width,u=i.height,d=c&&u?+(c/u).toFixed(3):1,p=l&&d?Math.round(l/d):0,g=`${o}__${n}__${t+1}`,f=parseInt(r?.split("_").pop(),10),h=isNaN(f)?g:f;s.push({alt:i.getAttribute("alt")||null,id:h,position:t+1,preview_image:{aspect_ratio:d,height:p,width:l,src:e},aspect_ratio:d,height:p,media_type:"image",src:e,width:l})}})),t[i]=s})),t}())}const pt=[];function gt(e){if(pt.push(e),!window._hasFunctionalityDebugToggleSetup){let e=!0;Object.defineProperty(window,"FUNCTIONALITY_DEBUG_MODE",{set(t){this._FUNCTIONALITY_DEBUG_MODE=t,console.log(`FUNCTIONALITY_DEBUG_MODE set to: ${t}`),pt.forEach((o=>o(t,{isFirstSet:e}))),e=!1},get(){return this._FUNCTIONALITY_DEBUG_MODE},configurable:!0}),window._hasFunctionalityDebugToggleSetup=!0}}function ft(e=!1){gt(((t,{isFirstSet:o})=>{!0===t?dt(e):!1!==t||o||function(){const e=document.getElementById("variantDevPopup"),t=document.getElementById("variantDevButton");e&&(e.remove(),console.log("üßπ Removed #variantDevPopup")),t&&(t.remove(),console.log("üßπ Removed #variantDevButton"))}()}))}function ht({HighlighterClass:e,validateFn:t,extraOnEnable:o=null,extraOnDisable:n=null}){return function(i){if(!i)return void console.warn("‚ö†Ô∏è makeDebugHandler was called with an empty or invalid selector.",i);const r=new e(i);t(i),gt(((e,{isFirstSet:t})=>{!0===e?(r.enableDebugging(),o&&o()):!1!==e||t?console.log("FUNCTIONALITY_DEBUG_MODE is null. Skipping debug action."):(r.disableDebugging(),n&&n())}))}}const mt=ht({HighlighterClass:class{constructor(e){if(!e)throw new Error("Selector element is required");this.selector=e}enableDebugging(){window.FUNCTIONALITY_DEBUG_MODE&&(!function(e){const t=e.querySelectorAll('input[type="radio"]');let o=document.querySelector("#wwai-debug-tooltip");o||(o=document.createElement("div"),o.id="wwai-debug-tooltip",Object.assign(o.style,{position:"absolute",zIndex:"9999",background:"#333",color:"#fff",padding:"6px 8px",borderRadius:"4px",fontSize:"12px",whiteSpace:"pre-line",display:"none"}),document.body.appendChild(o)),t.forEach((t=>{const n=t.getAttribute(X),i=t.getAttribute(Q)||"",r=t.getAttribute(Z)||"",s=t.getAttribute(K)||"",a="product"===n,l="product_variant"===n,c=Boolean(i);let u="";a?u=`Product Selector for "${i}"`:l&&(u=`Variant Selector for "${i}"\n${s}: ${r}`);const d=c&&(a||l&&r)?"2px solid limegreen":"2px solid red";t.style.outline=d;const p=e.querySelector(`label[for="${t.id}"]`);p&&(p.style.outline=d,p.addEventListener("mouseover",(e=>{o.textContent=u,o.style.display="block",o.style.left=`${e.pageX+10}px`,o.style.top=`${e.pageY+10}px`})),p.addEventListener("mousemove",(e=>{o.style.left=`${e.pageX+10}px`,o.style.top=`${e.pageY+10}px`})),p.addEventListener("mouseout",(()=>{o.style.display="none"}))),t.addEventListener("mouseover",(e=>{o.textContent=u,o.style.display="block",o.style.left=`${e.pageX+10}px`,o.style.top=`${e.pageY+10}px`})),t.addEventListener("mousemove",(e=>{o.style.left=`${e.pageX+10}px`,o.style.top=`${e.pageY+10}px`})),t.addEventListener("mouseout",(()=>{o.style.display="none"}))}))}(this.selector),tt(this.selector))}disableDebugging(){!function(e){console.log("clearHighlighting called"),e.querySelectorAll('input[type="radio"]').forEach((t=>{t.style.outline="";const o=t.cloneNode(!0);t.replaceWith(o);const n=e.querySelector(`label[for="${t.id}"]`);if(n){n.style.outline="";const e=n.cloneNode(!0);n.replaceWith(e)}}));const t=document.getElementById("wwai-debug-tooltip");t&&(t.style.display="none"),e.initInputs(),e.bindEvents()}(this.selector),et(this.selector)}},validateFn:function(e){const{status:t,messages:o}=Qe(e);e.setAttribute("debug_status",t),e.setAttribute("debug_message",JSON.stringify(o))}}),bt=ht({HighlighterClass:class{constructor(e){if(!e)throw new Error("Selector element is required");this.selector=e}enableDebugging(){window.FUNCTIONALITY_DEBUG_MODE&&(tt(this.selector),function(e){const t=Object.values(u).map((e=>`[${e}]`)).join(", "),o=e.querySelectorAll(t);let n=document.querySelector("#wwai-debug-tooltip-price");n||(n=document.createElement("div"),n.id="wwai-debug-tooltip-price",Object.assign(n.style,{position:"absolute",zIndex:"9999",background:"#333",color:"#fff",padding:"6px 8px",borderRadius:"4px",fontSize:"12px",whiteSpace:"pre-line",display:"none"}),document.body.appendChild(n)),o.forEach((e=>{const t=e.getAttribute(c)||"(missing)";let o="";e.hasAttribute(u.BEFORE)?o="beforePrice":e.hasAttribute(u.AFTER)?o="afterPrice":e.hasAttribute(u.DISCOUNT)&&(o="discountPercentage");const i="(missing)"!==t?"2px solid limegreen":"2px solid red";e.style.outline=i;const r=`Label: ${t}\nType: ${o}`;e.addEventListener("mouseover",(e=>{n.textContent=r,n.style.display="block",n.style.left=`${e.pageX+10}px`,n.style.top=`${e.pageY+10}px`})),e.addEventListener("mousemove",(e=>{n.style.left=`${e.pageX+10}px`,n.style.top=`${e.pageY+10}px`})),e.addEventListener("mouseout",(()=>{n.style.display="none"}))}))}(this.selector))}disableDebugging(){et(this.selector),function(e){console.log("clearPriceHighlighting called");const t=Object.values(u).map((e=>`[${e}]`)).join(", ");e.querySelectorAll(t).forEach((e=>{e.style.outline="";const t=e.cloneNode(!0);e.replaceWith(t)}));const o=document.getElementById("wwai-debug-tooltip-price");o&&(o.style.display="none")}(this.selector)}},validateFn:function(e,t=!1){const{status:o,messages:n}=ct(e,"<product-custom-price-selector>");t&&(console.log("Status:",o),console.log("Messages:",n),console.groupEnd()),e.setAttribute("debug_status",o),e.setAttribute("debug_message",JSON.stringify(n))}}),yt=ht({HighlighterClass:class{constructor(e){if(!e)throw new Error("Selector element is required");this.selector=e}enableDebugging(){window.FUNCTIONALITY_DEBUG_MODE&&(tt(this.selector),function(e){const t=e.querySelectorAll(C);let o=document.querySelector("#wwai-debug-tooltip-purchase-type");o||(o=document.createElement("div"),o.id="wwai-debug-tooltip-purchase-type",Object.assign(o.style,{position:"absolute",zIndex:"9999",background:"#333",color:"#fff",padding:"6px 8px",borderRadius:"4px",fontSize:"12px",whiteSpace:"pre-line",display:"none"}),document.body.appendChild(o)),t.forEach((t=>{const n=t.getAttribute(A),i=`Type: ${n}\nName: ${t.getAttribute("name")||"(none)"}`,r=[O.ONETIME,O.SUBSCRIPTION].includes(n)?"2px solid limegreen":"2px solid red";t.style.outline=r,t.addEventListener("mouseover",(e=>{o.textContent=i,o.style.display="block",o.style.left=`${e.pageX+10}px`,o.style.top=`${e.pageY+10}px`})),t.addEventListener("mousemove",(e=>{o.style.left=`${e.pageX+10}px`,o.style.top=`${e.pageY+10}px`})),t.addEventListener("mouseout",(()=>{o.style.display="none"}));const s=t.id;if(s){const t=e.querySelector(`label[for="${s}"]`);t&&(t.style.outline=r,t.addEventListener("mouseover",(e=>{o.textContent=i,o.style.display="block",o.style.left=`${e.pageX+10}px`,o.style.top=`${e.pageY+10}px`})),t.addEventListener("mousemove",(e=>{o.style.left=`${e.pageX+10}px`,o.style.top=`${e.pageY+10}px`})),t.addEventListener("mouseout",(()=>{o.style.display="none"})))}}))}(this.selector))}disableDebugging(){et(this.selector),function(e){e.querySelectorAll(C).forEach((t=>{t.style.outline="";const o=t.cloneNode(!0);t.replaceWith(o);const n=t.id;if(n){const t=e.querySelector(`label[for="${n}"]`);if(t){t.style.outline="";const e=t.cloneNode(!0);t.replaceWith(e)}}}));const t=document.querySelector("#wwai-debug-tooltip-purchase-type");t&&(t.style.display="none")}(this.selector)}},validateFn:function(e,t=!1){const o=[];let n=!1,i=!1;const r=e.querySelectorAll(C),s=new Set,a={[O.ONETIME]:0,[O.SUBSCRIPTION]:0};r.forEach((e=>{const t=e.getAttribute(A)?.trim(),o=e.getAttribute("name");o&&s.add(o),t===O.ONETIME?a.onetime+=1:t===O.SUBSCRIPTION&&(a.subscription+=1)})),0!==a.onetime&&0!==a.subscription||(n=!0,o.push(`Missing purchase types: ${[0===a.onetime?O.ONETIME:null,0===a.subscription?O.SUBSCRIPTION:null].filter(Boolean).join(", ")}`)),(a.onetime>1||a.subscription>1)&&(n=!0,o.push(`Multiple radios found for: ${[a.onetime>1?`onetime (${a.onetime})`:null,a.subscription>1?`subscription (${a.subscription})`:null].filter(Boolean).join(", ")}`)),s.size>1&&(i=!0,o.push(`Radios inside use multiple "name" attributes: [${[...s].join(", ")}]`));const l=[...s][0];if(l){const t=document.querySelectorAll(`input[type="radio"][name="${l}"]`);Array.from(t).filter((t=>!e.contains(t))).length>0&&(n=!0,o.push(`Radio "name" conflict: "${l}" is reused elsewhere in the document`))}const c=n?"error":i?"warning":"valid";return e.setAttribute("debug_status",c),e.setAttribute("debug_message",JSON.stringify(o)),t&&(console.group("[ProductPurchaseTypeSelector] Validation Output"),console.log("Status:",c),console.log("Messages:",o),console.groupEnd()),{status:c,messages:o}}}),_t=ht({HighlighterClass:class{constructor(e){if(!e)throw new Error("Selector element is required");this.selector=e}enableDebugging(){window.FUNCTIONALITY_DEBUG_MODE&&(tt(this.selector),function(e){const t=e.querySelector(j);if(!t)return;let o=document.getElementById("wwai-subscription-tooltip");o||(o=document.createElement("div"),o.id="wwai-subscription-tooltip",Object.assign(o.style,{position:"absolute",zIndex:"9999",background:"#333",color:"#fff",padding:"6px 8px",borderRadius:"4px",fontSize:"12px",whiteSpace:"pre-line",display:"none",pointerEvents:"none"}),document.body.appendChild(o));const n=`Subscription Frequency Select\nname: ${t.getAttribute("name")||"[no name]"}\noptions: ${t.querySelectorAll("option").length}`;t.style.outline="2px solid limegreen";const i=()=>{const e=t.getBoundingClientRect();o.textContent=n,o.style.left=`${e.left+window.scrollX}px`,o.style.top=`${e.bottom+window.scrollY+6}px`,o.style.display="block"},r=()=>{o.style.display="none"};t._tooltipHandlers={mouseOverHandler:i,mouseOutHandler:r},t.addEventListener("mouseover",i),t.addEventListener("mouseout",r)}(this.selector))}disableDebugging(){et(this.selector),function(e){const t=e.querySelector(j);if(!t)return;t.style.outline="";const o=t._tooltipHandlers;o&&(t.removeEventListener("mouseover",o.mouseOverHandler),t.removeEventListener("mouseout",o.mouseOutHandler),delete t._tooltipHandlers);const n=document.getElementById("wwai-subscription-tooltip");n&&(n.style.display="none")}(this.selector)}},validateFn:function(e,t=!1){const o=[];let n=!1;const i=e.querySelectorAll(j);0===i.length?(n=!0,o.push(`Missing <select> with [${k}]`)):i.length>1&&(n=!0,o.push(`Multiple <select> elements with [${k}] found (${i.length}) ‚Äî only one allowed.`));const r=i[0];if(r){"select"!==r.tagName.toLowerCase()&&(n=!0,o.push(`Element with [${k}] must be a <select>, found <${r.tagName.toLowerCase()}>`));const e=r.getAttribute("name");if(e){const t=document.querySelectorAll(`input[name="${e}"], select[name="${e}"]`),i=Array.from(t).filter((e=>e!==r));i.length>0&&(n=!0,o.push(`Name "${e}" is not unique ‚Äî found ${i.length} other input/select(s) using this name`))}else n=!0,o.push('Select element must have a "name" attribute')}const s=n?"error":"valid";return e.setAttribute("debug_status",s),e.setAttribute("debug_message",JSON.stringify(o)),t&&(console.group("[ProductSubscriptionFrequencySelector] Validation Output"),console.log("Status:",s),console.log("Messages:",o),console.groupEnd()),{status:s,messages:o}}}),wt=ht({HighlighterClass:class{constructor(e){if(!e)throw new Error("Selector element is required");this.selector=e}enableDebugging(){window.FUNCTIONALITY_DEBUG_MODE&&(!function(e){const t=e.querySelectorAll(Y);if(!t.length)return;let o=document.getElementById("wwai-variant-custom-label-tooltip");o||(o=document.createElement("div"),o.id="wwai-variant-custom-label-tooltip",Object.assign(o.style,{position:"fixed",zIndex:"9999",background:"#333",color:"#fff",padding:"6px 8px",borderRadius:"4px",fontSize:"12px",whiteSpace:"pre-line",display:"none",pointerEvents:"none"}),document.body.appendChild(o)),t.forEach((e=>{const t=`Custom Variant Label Text\nLabel: ${e.getAttribute(V)||"[missing label]"}\nText: ${e.textContent?.trim()||"[empty text]"}`;e.style.outline="2px solid limegreen";const n=e=>{o.textContent=t,o.style.display="block",o.style.left=`${e.clientX+10}px`,o.style.top=`${e.clientY+10}px`},i=e=>{o.style.left=`${e.clientX+10}px`,o.style.top=`${e.clientY+10}px`},r=()=>{o.style.display="none"};e._tooltipHandlers={onMouseOver:n,onMouseMove:i,onMouseOut:r},e.addEventListener("mouseover",n),e.addEventListener("mousemove",i),e.addEventListener("mouseout",r)}))}(this.selector),tt(this.selector))}disableDebugging(){!function(e){const t=e.querySelectorAll(Y);if(!t.length)return;t.forEach((e=>{e.style.outline="";const t=e._tooltipHandlers;t&&(e.removeEventListener("mouseover",t.onMouseOver),e.removeEventListener("mousemove",t.onMouseMove),e.removeEventListener("mouseout",t.onMouseOut),delete e._tooltipHandlers)}));const o=document.getElementById("wwai-variant-custom-label-tooltip");o&&(o.style.display="none")}(this.selector),et(this.selector)}},validateFn:function(e,t=!1){const o=[];let n=!1,i=!1;const r=e.querySelectorAll(Y);0===r.length&&(i=!0,o.push(`No element found with [${Y}]`));const s=new Set;r.forEach(((e,t)=>{const r=e.getAttribute(V)?.trim(),a=(e.textContent||"").trim();r?s.has(r)?(n=!0,o.push(`Duplicate label value "${r}" found`)):s.add(r):(n=!0,o.push(`Element #${t+1} is missing [${V}]`)),a||(i=!0,o.push(`Element #${t+1} has no visible text content`))}));const a=n?"error":i?"warning":"valid";return e.setAttribute("debug_status",a),e.setAttribute("debug_message",JSON.stringify(o)),t&&(console.group("[VariantCustomLabelText] Validation Output"),console.log("Status:",a),console.log("Messages:",o),console.groupEnd()),{status:a,messages:o}}}),Et=ht({HighlighterClass:class{constructor(e){if(!e)throw new Error("Selector element is required");this.selector=e}enableDebugging(){window.FUNCTIONALITY_DEBUG_MODE&&(tt(this.selector),function(e){const t=e.querySelector(s);if(!t)return;let o=document.getElementById("wwai-carousel-tooltip");o||(o=document.createElement("div"),o.id="wwai-carousel-tooltip",Object.assign(o.style,{position:"fixed",zIndex:"9999",background:"#333",color:"#fff",padding:"6px 8px",borderRadius:"4px",fontSize:"12px",whiteSpace:"pre-line",display:"none",pointerEvents:"none"}),document.body.appendChild(o)),t.style.outline="2px solid limegreen";const n=a.map((e=>`${e}: ${"function"==typeof t[e]?"yes":"no"}`)).join("\n"),i=`<${s}> found\nMethods:\n${n}`,r=e=>{o.textContent=i,o.style.display="block",o.style.transform=`translate(${e.clientX+10}px, ${e.clientY+10}px)`},l=e=>{o.style.transform=`translate(${e.clientX+10}px, ${e.clientY+10}px)`},c=()=>{o.style.display="none"};t._tooltipHandlers={onMouseOver:r,onMouseMove:l,onMouseOut:c},t.addEventListener("mouseover",r),t.addEventListener("mousemove",l),t.addEventListener("mouseout",c)}(this.selector))}disableDebugging(){et(this.selector),function(e){const t=e.querySelector(s);if(!t)return;t.style.outline="";const o=t._tooltipHandlers;o&&(t.removeEventListener("mouseover",o.onMouseOver),t.removeEventListener("mousemove",o.onMouseMove),t.removeEventListener("mouseout",o.onMouseOut),delete t._tooltipHandlers);const n=document.getElementById("wwai-carousel-tooltip");n&&(n.style.display="none")}(this.selector)}},validateFn:function(e,t=!1){const o=[];let n=!1;const i=e.querySelectorAll(s);if(0===i.length?(n=!0,o.push(`Missing <${s}> inside <product-custom-carousel-media-selector>.`)):i.length>1&&(n=!0,o.push(`Multiple <${s}> elements found (${i.length}). Only one is allowed.`)),1===i.length){const e=i[0];a.forEach((t=>{"function"!=typeof e[t]&&(n=!0,o.push(`Missing required method: "${t}" on <${s}>.`))}))}const r=n?"error":"valid";return e.setAttribute("debug_status",r),e.setAttribute("debug_message",JSON.stringify(o)),t&&(console.group("[CustomCarouselMediaSelector] Validation Output"),console.log("Status:",r),console.log("Messages:",o),console.groupEnd()),{status:r,messages:o}}}),vt=ht({HighlighterClass:class{constructor(e){if(!e)throw new Error("Selector element is required");this.selector=e}enableDebugging(){window.FUNCTIONALITY_DEBUG_MODE&&(tt(this.selector),function(e){const t=e.querySelector("form");if(!t)return;let o=document.getElementById("wwai-addtocart-tooltip");o||(o=document.createElement("div"),o.id="wwai-addtocart-tooltip",Object.assign(o.style,{position:"fixed",zIndex:"9999",background:"#333",color:"#fff",padding:"6px 8px",borderRadius:"4px",fontSize:"12px",whiteSpace:"pre-line",display:"none",pointerEvents:"none"}),document.body.appendChild(o)),e.style.outline="2px solid limegreen";const n=t.querySelectorAll('input[type="hidden"]'),r=`Custom Add to Cart\nHidden Inputs: ${Array.from(n).map((e=>e.name)).join(", ")||"[none]"}\nSubmit Button: ${t.querySelector('button[type="submit"]')?"yes":"no"}\n[+Text]: ${t.querySelector(`[${i.ADD_TO_CART_TEXT_ATTR}]`)?"yes":"no"} | [Sold]: ${t.querySelector(`[${i.SOLD_OUT_TEXT_ATTR}]`)?"yes":"no"}`,s=e=>{o.textContent=r,o.style.display="block",o.style.transform=`translate(${e.clientX+12}px, ${e.clientY+12}px)`},a=e=>{o.style.transform=`translate(${e.clientX+12}px, ${e.clientY+12}px)`},l=()=>{o.style.display="none"};e._tooltipHandlers={onMouseOver:s,onMouseMove:a,onMouseOut:l},e.addEventListener("mouseover",s),e.addEventListener("mousemove",a),e.addEventListener("mouseout",l)}(this.selector))}disableDebugging(){et(this.selector),function(e){e.style.outline="";const t=e._tooltipHandlers;t&&(e.removeEventListener("mouseover",t.onMouseOver),e.removeEventListener("mousemove",t.onMouseMove),e.removeEventListener("mouseout",t.onMouseOut),delete e._tooltipHandlers);const o=document.getElementById("wwai-addtocart-tooltip");o&&(o.style.display="none")}(this.selector)}},validateFn:function(e,t=!1){const o=[];let r=!1,s=!1;const a=e.querySelector("form");if(a){const e=new Set;Array.from(a.querySelectorAll("input")).forEach((t=>{const n=t.getAttribute("name");n&&(e.has(n)&&(r=!0,o.push(`‚ùå Duplicate hidden input name: "${n}"`)),e.add(n))})),n.forEach((({name:e,label:t})=>{a.querySelector(`input[name="${e}"]`)||(r=!0,o.push(`‚ùå Missing hidden input for: ${t} (name="${e}")`))}));const t=a.querySelector('button[type="submit"]');if(t){const e=t.querySelector(`[${i.ADD_TO_CART_TEXT}]`),n=t.querySelector(`[${i.SOLD_OUT_TEXT}]`);e&&n||(s=!0,o.push("‚ö†Ô∏è Missing span(s) inside button: "+(e?"":`[${i.ADD_TO_CART_TEXT}] `)+(n?"":`[${i.SOLD_OUT_TEXT}]`)))}else r=!0,o.push("‚ùå No <button type='submit'> found inside form.")}else r=!0,o.push("‚ùå No <form> found inside <product-custom-add-to-cart-button>.");const l=r?"error":s?"warning":"valid";return e.setAttribute("debug_status",l),e.setAttribute("debug_message",JSON.stringify(o)),t&&(console.group("[AddToCartButton Validation]"),console.log("Status:",l),console.log("Messages:",o),console.groupEnd()),{status:l,messages:o}}}),It=ht({HighlighterClass:class{constructor(e){if(!e)throw new Error("Selector element is required");this.selector=e}enableDebugging(){window.FUNCTIONALITY_DEBUG_MODE&&(tt(this.selector),function(e){if(!e)return;let t=document.getElementById("wwai-submit-interceptor-tooltip");t||(t=document.createElement("div"),t.id="wwai-submit-interceptor-tooltip",Object.assign(t.style,{position:"fixed",zIndex:"9999",background:"#333",color:"#fff",padding:"6px 8px",borderRadius:"4px",fontSize:"12px",whiteSpace:"pre-line",display:"none",pointerEvents:"none",maxWidth:"300px"}),document.body.appendChild(t));const n="Submit Interceptor\nATC Exists: "+(e.querySelector(o.PRODUCT_GROUP.ADD_TO_CART)?"‚úÖ Yes":"‚ùå No");e.style.outline="2px solid orange";const i=e=>{t.textContent=n,t.style.display="block",t.style.transform=`translate(${e.clientX+10}px, ${e.clientY+10}px)`},r=e=>{t.style.transform=`translate(${e.clientX+10}px, ${e.clientY+10}px)`},s=()=>{t.style.display="none"};e._tooltipHandlers={mouseOver:i,mouseMove:r,mouseOut:s},e.addEventListener("mouseover",i),e.addEventListener("mousemove",r),e.addEventListener("mouseout",s)}(this.selector))}disableDebugging(){et(this.selector),function(e){if(!e)return;e.style.outline="";const t=e._tooltipHandlers;t&&(e.removeEventListener("mouseover",t.mouseOver),e.removeEventListener("mousemove",t.mouseMove),e.removeEventListener("mouseout",t.mouseOut),delete e._tooltipHandlers);const o=document.getElementById("wwai-submit-interceptor-tooltip");o&&(o.style.display="none")}(this.selector)}},validateFn:function(e,t=!1){const n=[];let i=!1;e.querySelector(o.PRODUCT_GROUP.ADD_TO_CART)||(i=!0,n.push("‚ùå Missing <${ADD_TO_CART_SELECTOR}> inside submit interceptor."));const r=i?"error":"valid";return e.setAttribute("debug_status",r),e.setAttribute("debug_message",JSON.stringify(n)),t&&(console.group("[ProductCustomSubmitInterceptor] Validation Output"),console.log("Status:",r),console.log("Messages:",n),console.groupEnd()),{status:r,messages:n}}}),Rt=ht({HighlighterClass:class{constructor(e){if(!e)throw new Error("Selector element is required");this.selector=e}enableDebugging(){window.FUNCTIONALITY_DEBUG_MODE&&(tt(this.selector),function(e){const t=e.querySelectorAll(nt);let o=document.querySelector("#wwai-debug-tooltip-media");o||(o=document.createElement("div"),o.id="wwai-debug-tooltip-media",Object.assign(o.style,{position:"absolute",zIndex:"9999",background:"#333",color:"#fff",padding:"6px 8px",borderRadius:"4px",fontSize:"12px",whiteSpace:"pre-line",display:"none"}),document.body.appendChild(o)),t.forEach((e=>{const t=e.getAttribute(it)||"(missing)",n="(missing)"!==t?"2px solid limegreen":"2px solid red",i=e.querySelector("img");i?i.style.outline=n:e.style.outline=n;const r=`Media ID: ${t}`;e.addEventListener("mouseover",(e=>{o.textContent=r,o.style.display="block",o.style.left=`${e.pageX+10}px`,o.style.top=`${e.pageY+10}px`})),e.addEventListener("mousemove",(e=>{o.style.left=`${e.pageX+10}px`,o.style.top=`${e.pageY+10}px`})),e.addEventListener("mouseout",(()=>{o.style.display="none"}))}))}(this.selector))}disableDebugging(){et(this.selector),function(e){console.log("clearMediaHighlighting called"),e.querySelectorAll(nt).forEach((e=>{e.style.outline="";const t=e.cloneNode(!0);e.replaceWith(t)}));const t=document.getElementById("wwai-debug-tooltip-media");t&&(t.style.display="none")}(this.selector)}},validateFn:function(e,t=!1){const o=[];let n=!1;const i=e.getAttribute("section_id"),r=e.getAttribute("product_group");i||(n=!0,o.push("‚ö†Ô∏è Missing attribute [section_id]")),r||(n=!0,o.push("‚ö†Ô∏è Missing attribute [product_group]"));const s=e.querySelector(ot);s||(n=!0,o.push(`‚ö†Ô∏è Missing main media container [${ot}]`));const a=s?s.querySelector(nt):null;if(a){a.querySelector("img")||(n=!0,o.push("‚ö†Ô∏è Missing <img> element inside the first slide")),a.hasAttribute(it)||(n=!0,o.push(`‚ö†Ô∏è First slide is missing required attribute [${it}]`))}else n=!0,o.push(`‚ö†Ô∏è Missing initial slide [${nt}] in container`);const l=n?"error":"valid";return e.setAttribute("debug_status",l),e.setAttribute("debug_message",JSON.stringify(o)),t&&(console.group("[ProductMediaGalleryForGrids] Validation Output"),console.log("Status:",l),console.log("Messages:",o),console.groupEnd()),{status:l,messages:o}}}),At=ht({HighlighterClass:class{constructor(e){if(!e)throw new Error("Selector element is required");this.selector=e}enableDebugging(){window.FUNCTIONALITY_DEBUG_MODE&&(tt(this.selector),function(e){if(!e)return void console.error("WWAI-ERROR ‚ùå Selector element not found for hover panel initialization.");let t=document.querySelector("#wwai-flow-config-panel");t||(t=document.createElement("div"),t.id="wwai-flow-config-panel",Object.assign(t.style,{position:"absolute",zIndex:"9999",background:"#333",color:"#fff",padding:"8px 10px",borderRadius:"4px",fontSize:"12px",whiteSpace:"pre-line",display:"none",maxWidth:"400px",overflowWrap:"break-word",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)"}),document.body.appendChild(t)),e.addEventListener("mouseover",(o=>{const n=e.uxConfig?.preAddToCartFlowConfig,i=`${n?.journeyType||"-"} - ${n?.postSelectionAction||"-"} | ${Array.isArray(n?.overlayContents)?n.overlayContents.join(", "):"-"}`;t.textContent=`${i}`,t.style.display="block"})),e.addEventListener("mousemove",(e=>{t.style.left=`${e.pageX+15}px`,t.style.top=`${e.pageY+15}px`})),e.addEventListener("mouseout",(()=>{t.style.display="none"}))}(this.selector))}disableDebugging(){et(this.selector),function(e){if(!e)return void console.warn("‚ö†Ô∏è No selector element provided for panel removal.");const t=document.getElementById("wwai-flow-config-panel");t&&(t.remove(),console.log("‚úÖ Hover panel successfully removed from the DOM.")),e.removeEventListener("mouseover",rt),e.removeEventListener("mousemove",st),e.removeEventListener("mouseout",at),console.log("‚úÖ Event listeners successfully removed.")}(this.selector)}},validateFn:function(e,t=!1){const o=[];let n=!1;const i=e.querySelector(":scope > button");if(i){i.textContent.trim().length>0&&(n=!0,o.push("‚ö†Ô∏è Button should not contain text, only an icon."))}else n=!0,o.push(`‚ö†Ô∏è Expected an immediate child <button> element inside <${e.tagName.toLowerCase()}>`);const r=n?"error":"valid";return e.setAttribute("debug_status",r),e.setAttribute("debug_message",JSON.stringify(o)),t&&(console.group("[validateProductGridIconSmartInteractionButton] Validation Output"),console.log("Status:",r),console.log("Messages:",o),console.groupEnd()),{status:r,messages:o}}}),Ot={[o.PRODUCT_GROUP.VARIANT]:e=>mt(e),[o.PRODUCT_GROUP.PRICE]:bt,[o.PRODUCT_GROUP.PURCHASE_TYPE]:yt,[o.PRODUCT_GROUP.SUBSCRIPTION_FREQUENCY]:_t,[o.PRODUCT_GROUP.VARIANT_CUSTOM_LABEL]:wt,[o.PRODUCT_GROUP.CAROUSEL]:Et,[o.PRODUCT_GROUP.ADD_TO_CART]:vt,[o.PRODUCT_GROUP.SUBMIT_INTERCEPTOR]:It,[o.PRODUCT_GROUP.PRODUCT_MEDIA_GALLERY_FOR_GRIDS]:Rt,[o.PRODUCT_GROUP.GRID_SMART_INTERACTION]:At};const Ct={[o.PRODUCT_GROUP.VARIANT]:Ce,[o.PRODUCT_GROUP.PRICE]:f,[o.PRODUCT_GROUP.PURCHASE_TYPE]:q,[o.PRODUCT_GROUP.SUBSCRIPTION_FREQUENCY]:F,[o.PRODUCT_GROUP.VARIANT_CUSTOM_LABEL]:J,[o.PRODUCT_GROUP.CAROUSEL]:l,[o.PRODUCT_GROUP.ADD_TO_CART]:r,[o.PRODUCT_GROUP.SUBMIT_INTERCEPTOR]:R,[o.PRODUCT_GROUP.PRODUCT_MEDIA_GALLERY_FOR_GRIDS]:Te,[o.PRODUCT_GROUP.GRID_SMART_INTERACTION]:Ge,[o.PRODUCT_GROUP.COLLECTION_OPTIONS_OVERLAY]:Me,[o.OTHER.PRODUCT_GRID_HEIGHT_EQUALIZER]:We};"prod"!==window.MODE&&function(){const e=[];for(const t in o)if(Object.prototype.hasOwnProperty.call(o,t)){const n=o[t];e.push(...Object.values(n))}let t=!0;const n=[];for(const o of e)o in Ct||(n.push(o),t=!1);t?console.log("ELEMENT_CLASS_REGISTRY Validation Passed: All defined selectors are registered."):console.error("WWAI-ERROR ELEMENT_CLASS_REGISTRY Validation Failed: The following selectors from `constants/selector-constants.js` are NOT registered:",n)}();const Tt=Object.values(o.PRODUCT_GROUP);function St(e){const t=[];for(const[o,n]of Object.entries(e)){const e=document.getElementById(o);if(!e)continue;const i=Array.from(n),r=`‚úÖ Product groups in this section: ${i.length} /  ${i.join(", ")}`,s=(()=>{try{return JSON.parse(e.getAttribute("debug_message"))||[]}catch{return[]}})(),a=Array.from(new Set([...s,r]));e.setAttribute("debug_status","valid"),e.setAttribute("debug_message",JSON.stringify(a)),t.push(e)}var o;(o=t)&&o.length&&gt(((e,{isFirstSet:t})=>{o.forEach((o=>{!0===e?tt(o):!1!==e||t||et(o)}))}))}function Pt(){const e=function(){const e={};return Tt.forEach((t=>{document.querySelectorAll(t).forEach((t=>{const o=t.getAttribute("section_id")?.trim(),n=t.getAttribute("product_group")?.trim(),i=o&&!!document.getElementById(o),r=[];let s=!1;o?i||(s=!0,r.push(`No element found in DOM with id="${o}".`)):(s=!0,r.push("Missing `section_id` attribute.")),n||(s=!0,r.push("Missing `product_group` attribute."));const a=(()=>{try{return JSON.parse(t.getAttribute("debug_message"))||[]}catch{return[]}})(),l=t.getAttribute("debug_status")||"valid",c=s||"error"===l?"error":l,u=Array.from(new Set([...a,...r]));t.setAttribute("debug_status",c),t.setAttribute("debug_message",JSON.stringify(u)),!s&&o&&n&&(e[o]=e[o]||new Set,e[o].add(n))}))})),e}();St(e);const t={};for(const[o,n]of Object.entries(e))t[o]=Array.from(n);return t}function $t({sectionId:e,productGroup:t,config:n={}}){console.log(`üîÑ Initializing Config for [${e} / ${t}]`),function({sectionId:e,productGroup:t,flowConfig:n={}}){Object.values(o.PRODUCT_GROUP).forEach((o=>{const i=x(e,t,o);i.length&&i.forEach(((e,t)=>{if("function"==typeof e.initFlowConfig)try{e.initFlowConfig(n)}catch(e){console.error(`WWAI-ERROR ‚ùå Error initializing flow config for [${o} - index ${t}]`,e)}}))}))}({sectionId:e,productGroup:t,flowConfig:n.flowConfig}),function({sectionId:e,productGroup:t,uxConfig:n={}}){Object.values(o.PRODUCT_GROUP).forEach((o=>{const i=x(e,t,o);i.length&&i.forEach(((e,t)=>{if("function"==typeof e.initUXConfig)try{e.initUXConfig(n)}catch(e){console.error(`WWAI-ERROR ‚ùå Error initializing UX config for [${o} - index ${t}]`,e)}}))}))}({sectionId:e,productGroup:t,uxConfig:n.uxConfig}),function({sectionId:e,productGroup:t,pricingConfig:n={}}){Object.values(o.PRODUCT_GROUP).forEach((o=>{const i=x(e,t,o);i.length&&i.forEach(((e,t)=>{if("function"==typeof e.initPricingConfig)try{e.initPricingConfig(n)}catch(e){console.error(`WWAI-ERROR ‚ùå Error initializing Pricing config for [${o} - index ${t}]`,e)}}))}))}({sectionId:e,productGroup:t,pricingConfig:n.pricingConfig})}async function Dt(e,t=!0){try{if(t){const t=await async function(e){try{const t=document.querySelector("script[id='shopify-features']"),o=JSON.parse(t.innerHTML),n=await fetch(`${Shopify.routes.root}cart.js`).then((e=>e.json())),i={Authorization:"Basic "+btoa(o.accessToken),Accept:"*/*","Content-Type":"application/json"},r={checkout:{line_items:n.items,discount_code:e,country:Shopify.country,presentment_currency:n.currency}},s=await fetch("/wallets/checkouts/",{method:"POST",headers:i,body:JSON.stringify(r),referrerPolicy:"no-referrer"}),a=await s.json();return a.errors&&a.errors.discount_code?{isValid:!1,error:a.errors.discount_code[0].message}:{isValid:!0}}catch(e){return console.error("WWAI-ERROR Error in validateDiscountCode:",e),{isValid:!1,error:"Unable to validate discount code"}}}(e);if(!t.isValid)return void console.error(`WWAI-ERROR Failed to activate discount code "${e}" because: ${t.error}`)}const o=await async function(e){try{const t=await fetch(`/discount/${e}`);return{success:!0,html:await t.text()}}catch(e){return console.error("WWAI-ERROR Discount activation failed (/discount):",e),{success:!1,error:"Unable to activate discount"}}}(e);o.success?console.log(`Discount code "${e}" activated successfully.`):console.error(`WWAI-ERROR Failed to activate discount code "${e}" because: ${o.error}`)}catch(t){console.error(`WWAI-ERROR Error activating discount code "${e}":`,t)}}function Ut(e,t,o={}){const{mock:n=!1}=o;if(!e?.variants||!Array.isArray(e.variants))return void console.warn("‚ö†Ô∏è Product object does not contain variants.");if(!t||!t.inputs)return void console.warn("‚ö†Ô∏è Invalid or missing variant selector element.");const i=function(e){const t={option1:new Set,option2:new Set,option3:new Set};return e.forEach((e=>{e.available&&(e.option1&&t.option1.add(e.option1.trim()),e.option2&&t.option2.add(e.option2.trim()),e.option3&&t.option3.add(e.option3.trim()))})),t}(e.variants);n&&function(e,t=!0){const o=e?.option3;if(!o||o.size<=1)return;const n=Array.from(o),i=n[Math.random()>.5?0:n.length-1];o.delete(i),t&&console.log(`üîÑ Removed "${i}" from option3`)}(i,!0),function(e,t){e.forEach((e=>{if(e.getAttribute(X)===te){const o=e.getAttribute(K)||"option1",n=e.getAttribute(Z),i=document.querySelector(`label[for="${e.id}"]`),r=t[o]?.has(n.trim());e.disabled=!r,e.style.opacity=r?"":"0.5",e.style.pointerEvents=r?"":"none",e.style.cursor=r?"":"not-allowed",i&&(i.style.color=r?"":"#aaa",i.style.cursor=r?"":"not-allowed")}}))}(t.inputs,i)}function xt(e){(e?.pricingConfig?.discountCodeToApply||[]).filter((e=>"string"==typeof e&&e.trim())).forEach((e=>async function(e,t=!0){const o=e.trim().toUpperCase();if(window.__wwai_discount_codes_applied.has(o))console.warn(`Discount code "${o}" has already been applied.`);else try{await Dt(o,t),window.__wwai_discount_codes_applied.add(o)}catch(e){console.error(`WWAI-ERROR ‚ùå Error applying discount code "${o}":`,e.message)}}(e.trim(),!1)))}function Nt({scope:e,sectionId:t,productGroup:n,productLabel:i,variantOptions:r,product_object:s,variant_object:a,variant_config:l,config:c}){switch(e){case"collection":case"pdp":Oe({sectionId:t,productGroup:n,productLabel:i,variantOptions:r,productObject:s,variantObject:a,variantConfig:l,config:c});break;case"virtual_bundle":!function({sectionId:e,productGroup:t,bundlePayload:n}){const i=N(e,t,o.PRODUCT_GROUP.ADD_TO_CART);i&&("function"==typeof i.updateAddToCartFormWithBundlePayload?(console.log("üõí Bundle AddToCart Payload to be set:",n),i.updateAddToCartFormWithBundlePayload(n)):console.error("WWAI-ERROR ‚ùå <product-custom-add-to-cart-button-selector> is missing .updateAddToCartFormWithBundlePayload()"))}({sectionId:t,productGroup:n,bundlePayload:a});break;default:console.error("WWAI-ERROR ‚ùå Unknown scope type:",e)}}function Lt({sectionId:e,productGroup:t},n){console.group(`‚úÖ [${n+1}] Init: section="${e}", product_group="${t}"`);const i=N(e,t,o.PRODUCT_GROUP.VARIANT),r=function(e,t,o){const n=N(e,t,o);if(!n)throw new Error(`‚ùå No unique element found for selector="${o}" in [${e} / ${t}]`);if(!n.scope)throw new Error(`‚ùå Unique element for selector="${o}" in [${e} / ${t}] does not have a .scope property`);return n.scope}(e,t,o.PRODUCT_GROUP.VARIANT),{config:s,variant_config:a,product_object:l,variant_object:c,productLabel:u,variantOptions:d}=function({sectionId:e,productGroup:t,variantSelector:o}){const n=me(e,t),i=n.variantDispatchConfig.defaultProduct,r=function(e){const t={};return e.defaultVariantOption1&&(t.option1=e.defaultVariantOption1),e.defaultVariantOption2&&(t.option2=e.defaultVariantOption2),e.defaultVariantOption3&&(t.option3=e.defaultVariantOption3),t}(n.variantDispatchConfig),{config:s,variant_config:a,product_object:l,variant_object:c}=be(e,t,i,r);return $t({sectionId:e,productGroup:t,config:s}),xt(s),Ut(l,o,{mock:!1}),{config:s,variant_config:a,product_object:l,variant_object:c,productLabel:i,variantOptions:r}}({sectionId:e,productGroup:t,variantSelector:i});Nt({scope:r,sectionId:e,productGroup:t,productLabel:u,variantOptions:d,product_object:l,variant_object:c,variant_config:a,config:s}),console.groupEnd()}function Gt(){window.addEventListener("pageshow",(e=>{e.persisted?(console.log("üîÅ Page restored from bfcache ‚Äî cleaning up loaders..."),y()):console.log("‚úÖ Page shown normally (not from bfcache).")})),window.addEventListener("load",(()=>{console.log("üì¶ Full page load ‚Äî running loader cleanup just in case..."),y()})),console.group("[WWAI] üîß Initializing Product Groups");Object.values($).map((({sectionId:e,productGroup:t})=>({sectionId:e,productGroup:t}))).forEach(((e,t)=>Lt(e,t))),console.log("üîÑ Starting height equalization on load."),document.querySelectorAll(o.OTHER.PRODUCT_GRID_HEIGHT_EQUALIZER).forEach((e=>{const t=e.getBoundingClientRect();t.top<window.innerHeight&&t.bottom>0&&(console.log(`[${e.sectionId}] üü¢ Detected in view, running equalize now.`),e.equalize("immediate-on-load"))})),console.groupEnd()}function Mt(){window.__WWAI_HAS_DISPATCHED__||(window.__WWAI_HAS_DISPATCHED__=!0,window.runDispatch())}window.__wwai_discount_codes_applied=window.__wwai_discount_codes_applied||new Set,window.RENDER_WITH_LIQUID=!0,window.CONNECTOR_TYPE="shopify",window.heightEqualizeLogging=!0,window.MODE="prod",window.addEventListener("DOMContentLoaded",(()=>{Object.entries(Ct).forEach((([e,t])=>{document.querySelectorAll(e).forEach((o=>{o instanceof t||console.warn(`[WWAI] Element <${e}> is NOT an instance of its expected class.`)}))}));const e=function(){const e={};for(const t in o.PRODUCT_GROUP)if(Object.prototype.hasOwnProperty.call(o.PRODUCT_GROUP,t)){const n=o.PRODUCT_GROUP[t];Ot[n]?e[n]=Ot[n]:console.warn(`No debug function mapped for selector: ${n}`)}return e}();var t;t=e,Object.entries(t).forEach((([e,t])=>{document.querySelectorAll(e).forEach((e=>{t(e)}))})),ft(window.RENDER_WITH_LIQUID),Pt(),window.FUNCTIONALITY_DEBUG_MODE="dev"==window.MODE})),window.runDispatch=function(){console.log("üöÄ Running Dispatch Logic..."),U();const e=document.querySelector("product-variant-selector");(async()=>{const{has_static_loaded_liquid_products:t,has_js_loaded_products:o}=function(e){const{merged:t,liquid_loaded:o,js_loaded:n}=ke(e);return{has_static_loaded_liquid_products:!je(o),has_js_loaded_products:!je(n)}}(window.RENDER_WITH_LIQUID);await async function(e,t,o){if(ze(t),_storeDataApiInitialized)console.info("‚ö†Ô∏è initializeStoreDataViaApiCall() skipped (already initialized).");else{if(window._storeDataApiInitialized=!0,o)return console.log("Hydrating product group(s) via JS..."),void await Fe(e,o);console.log("No additional JS-based product groups to hydrate.")}}(window.CONNECTOR_TYPE,t,o),Ze(e),Gt(),console.log("Running Grid equalization from cache."),window.applyCachedHeightsOnLoad(),console.log("‚úÖ Product Groups Initialized Successfully")})()},window.__WWAI_HAS_DISPATCHED__=window.__WWAI_HAS_DISPATCHED__||!1,"interactive"===document.readyState||"complete"===document.readyState?Mt():document.addEventListener("DOMContentLoaded",Mt),window.addEventListener("pageshow",(e=>{e.persisted&&(console.log("üîÑ BFCache restore inside script"),window.__WWAI_HAS_DISPATCHED__=!1,requestAnimationFrame(Mt))}));const Wt=setInterval((()=>{window.__WWAI_HAS_DISPATCHED__?clearInterval(Wt):"interactive"!==document.readyState&&"complete"!==document.readyState||(console.log("‚è±Ô∏è Fallback Dispatch Triggered"),clearInterval(Wt),Mt())}),200)}();
//# sourceMappingURL=bundle.js.map
